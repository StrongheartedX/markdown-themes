# markdown-themes-terminal tmux config
# Self-contained — does not interfere with user's ~/.tmux.conf
# Used by the Go backend for terminal persistence across page refreshes,
# WebSocket reconnects, and backend restarts.

# Zero escape delay for responsive key handling
set -sg escape-time 0

# Generous scrollback (xterm.js scrollback set to 0 when tmux manages it)
set -g history-limit 10000

# True-color terminal support
set -g default-terminal "tmux-256color"
set -sa terminal-features ",xterm-256color:RGB"

# Don't fight with xterm.js for window sizing
set -g aggressive-resize off

# Kill pane when shell exits (don't leave dead panes)
set -g remain-on-exit off

# Mouse support (needed for TUI apps)
set -g mouse on

# Pass through xterm key sequences (arrow keys, function keys, etc.)
set -g xterm-keys on

# Status bar at top — avoids conflicts with Claude Code's dynamic statusline at bottom
set -g status on
set -g status-position top

# Plugins (via TPM)
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin '2kabhishek/tmux2k'

# tmux2k theme settings
set -g @tmux2k-theme 'onedark'
set -g @tmux2k-icons-only false
set -g @tmux2k-left-plugins "git"
set -g @tmux2k-right-plugins "cpu ram time"
set -g @tmux2k-refresh-rate 5
set -g @tmux2k-window-list-alignment 'absolute-centre'

# Menu styles (right-click context menus) — needs solid colors for visibility
# over xterm.js transparent backgrounds
set -g menu-style 'bg=colour237,fg=colour252'
set -g menu-selected-style 'bg=colour39,fg=colour232,bold'
set -g menu-border-style 'fg=colour245'

# Disable automatic renaming — we manage titles via xterm.js
set -g allow-rename off
set -g automatic-rename off

# Initialize TPM (must be at the very bottom)
run '~/.tmux/plugins/tpm/tpm'

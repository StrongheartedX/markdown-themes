{"id":"markdown-themes-05x","title":"Create prompty viewer/editor","description":"Render .prompty files with YAML frontmatter extraction, fillable {{variable}} fields.","notes":"## prepared.prompt\n\nCreate the Prompty viewer/editor section for rendering .prompty files with YAML frontmatter and fillable {{variable}} fields.\n\n**Context:** This ports the PromptyViewer from TabzChrome to markdown-themes. The viewer displays .prompty files (markdown with YAML frontmatter) and makes {{variable}} placeholders interactive - users can click them to fill in values. This enables a \"prompt notebook\" workflow for crafting and testing prompts.\n\n**Reference implementation:**\n- Main viewer: `/home/marci/projects/TabzChrome/extension/dashboard/components/files/PromptyViewer.tsx` (430 lines)\n- Utils: `/home/marci/projects/TabzChrome/extension/dashboard/utils/promptyUtils.ts`\n- Inline field editor: `/home/marci/projects/TabzChrome/extension/dashboard/components/files/InlineField.tsx` (259 lines)\n\n**Key patterns to port:**\n- YAML frontmatter regex: `/^---\\r?\\n([\\s\\S]*?)\\r?\\n---\\r?\\n([\\s\\S]*)$/`\n- Variable regex: `/\\{\\{([^:}]+)(?::([^}]+))?\\}\\}/g`\n- Supports `{{name}}`, `{{name:hint}}`, and `{{name:opt1|opt2|opt3}}` for dropdowns\n\n**Files to create:**\n1. `src/components/PromptNotebook.tsx` - Main section component (container, state management)\n2. `src/components/PromptyViewer.tsx` - Port from TabzChrome, displays frontmatter + fillable content\n3. `src/utils/promptyUtils.ts` - Parsing functions: extractFrontmatter(), parseVariables(), etc.\n4. `src/components/InlineField.tsx` - Clickable {{variable}} field with edit mode\n\n**UX requirements:**\n- Tab/Shift+Tab navigation between fields\n- Enter to save field value, Escape to cancel\n- Progress indicator showing \"X/Y fields filled\"\n- Visual distinction between filled and unfilled variables\n- Display YAML frontmatter metadata (name, description, model, etc.)\n\n**Acceptance criteria:**\n- [ ] Loads .prompty content and extracts YAML frontmatter\n- [ ] Renders markdown body with syntax highlighting\n- [ ] {{variable}} placeholders are clickable and editable inline\n- [ ] Dropdown support for `{{var:opt1|opt2}}` syntax\n- [ ] Progress shows filled vs total variables\n- [ ] Tab navigation works between fields\n- [ ] Frontmatter displayed in collapsible header\n\nWhen done, commit with descriptive message and run `bd close markdown-themes-05x`.","status":"closed","priority":2,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-03T11:44:58.657819785-05:00","created_by":"GGPrompts","updated_at":"2026-02-03T12:10:52.737094083-05:00","closed_at":"2026-02-03T12:10:52.737094083-05:00","close_reason":"Created Prompty viewer with YAML frontmatter, inline {{variable}} fields, Tab navigation, and dropdown support","labels":["frontend","ready"],"dependencies":[{"issue_id":"markdown-themes-05x","depends_on_id":"markdown-themes-kgj","type":"blocks","created_at":"2026-02-03T11:44:58.659752591-05:00","created_by":"GGPrompts"},{"issue_id":"markdown-themes-05x","depends_on_id":"markdown-themes-kgj","type":"parent-child","created_at":"2026-02-03T11:45:27.487102826-05:00","created_by":"GGPrompts"}]}
{"id":"markdown-themes-06j","title":"Add lazy loading for file tree expansion","description":"## Overview\nWhen workspace is a projects directory (~/projects), the file tree loads with depth=1 for performance. Add lazy loading to fetch folder contents when expanded.\n\n## Current State\n- Projects directories load with depth=1 (just folder names)\n- Clicking a folder doesn't load its contents\n- Must switch workspace to view files inside a project\n\n## Desired Behavior\n- Click folder â†’ fetch its contents from API\n- Show loading spinner while fetching\n- Cache loaded contents (don't refetch on collapse/expand)\n- Works recursively (can expand folders within folders)\n\n## Implementation\n1. Add loadChildren(path) function to WorkspaceContext\n2. Track which folders have been loaded vs pending\n3. In Sidebar, detect click on unloaded folder â†’ call loadChildren\n4. Update tree state with fetched children\n\n## API\nAlready have fetchFileTree(path, depth) - can use with depth=1 on the clicked folder to get its immediate children.","notes":"## prepared.prompt\n\n## Context\nProjects directories (~/projects) now load with depth=1 for performance, but clicking folders does not expand them. Users need to browse into project folders without switching workspaces.\n\n## Task\nAdd lazy loading so clicking an unloaded folder fetches its contents from the API.\n\n## Key Files\n- `src/context/WorkspaceContext.tsx` - Add `loadChildren(path)` function, track loaded paths\n- `src/components/Sidebar.tsx` - Detect click on unloaded folder, show loading spinner\n- `src/lib/api.ts` - Already has `fetchFileTree(path, depth)` - reuse it\n\n## Implementation\n1. Add `loadedPaths: Set\u003cstring\u003e` and `loadingPaths: Set\u003cstring\u003e` state to WorkspaceContext\n2. Add `loadChildren(folderPath)` that calls `fetchFileTree(folderPath, 1)` \n3. Merge fetched children into existing tree state\n4. In Sidebar `toggleExpandPath()`, if folder has no children and not loaded, call `loadChildren()` first\n5. Show spinner icon while loading\n\n## When Done\nbd close markdown-themes-06j --reason \"Lazy loading implemented - folders fetch on expand\"","status":"closed","priority":2,"issue_type":"feature","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-04T15:20:16.952827588-05:00","created_by":"GGPrompts","updated_at":"2026-02-04T15:30:05.499875842-05:00","closed_at":"2026-02-04T15:30:05.499875842-05:00","close_reason":"Added lazy loading for folder expansion: loadChildren(path) in WorkspaceContext, spinner in Sidebar, auto-expand after load"}
{"id":"markdown-themes-0ce","title":"Upgrade Noir theme","description":"Deep upgrade the Noir theme to match ~/projects/htmlstyleguides/styles/noir.html\n\n## Current State\n- File: src/themes/noir.css (1.4KB)\n- Has high contrast but missing film noir atmosphere\n\n## Fixes Needed\n1. **Load web fonts** - Typewriter or noir-era fonts from HTML styleguide\n2. **High contrast** - Deep blacks, cream whites\n3. **Film grain texture** - Subtle noise overlay for that cinematic feel\n4. **Dramatic shadows** - Study shadow values for that spotlight effect\n5. **Shiki theme** - Monochrome with cream/gold highlights\n6. **Prose typography** - Typewriter feel, measured pacing\n\n## Reference\n- HTML: ~/projects/htmlstyleguides/styles/noir.html","notes":"## Retro\n- What worked: Reference HTML styleguide provided clear patterns for film grain, vignette, and typography\n- What was unclear: Nothing - the task was well-specified with exact CSS patterns to implement","status":"closed","priority":2,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-02T23:49:18.828453396-05:00","created_by":"GGPrompts","updated_at":"2026-02-03T00:07:36.601956251-05:00","closed_at":"2026-02-03T00:07:36.601956251-05:00","close_reason":"Upgraded Noir theme with film noir atmosphere: SVG film grain overlay, radial vignette effect, dramatic text shadows, Courier Prime typewriter body text, Playfair Display headlines, blood red accents with glows, venetian blind HR styling, case file code blocks, evidence-style lists, dossier tables, and cigarette ember caret animation. Added Oswald font to index.css.","labels":["theme"],"dependencies":[{"issue_id":"markdown-themes-0ce","depends_on_id":"markdown-themes-7m8","type":"blocks","created_at":"2026-02-02T23:51:23.266927263-05:00","created_by":"GGPrompts"},{"issue_id":"markdown-themes-0ce","depends_on_id":"markdown-themes-iz9","type":"blocks","created_at":"2026-02-02T23:51:29.075784465-05:00","created_by":"GGPrompts"}]}
{"id":"markdown-themes-0dl","title":"Recently-closed tracking only applies to left pane","description":"Files.tsx:230-237 - handleCloseTab tracks recently closed files, but closeRightTab does not. When Follow AI opens file in right pane and user closes it, file immediately reopens.","design":"Create handleCloseRightTab wrapper that adds to recentlyClosedRef before calling closeRightTab","notes":"## prepared.prompt\n\n## Context\nWhen Follow AI mode auto-opens a file in right pane and user closes it, the file immediately reopens because recently-closed tracking only applies to left pane tabs.\n\n## Task\nCreate handleCloseRightTab wrapper that adds to recentlyClosedRef before calling closeRightTab.\n\n## Key Files\n- src/pages/Files.tsx:230-237 (existing handleCloseTab)\n- Search for closeRightTab usage\n\n## Pattern\n```typescript\nconst handleCloseRightTab = useCallback((id: string) =\u003e {\n  const tab = rightPaneTabs.find(t =\u003e t.id === id);\n  if (tab?.path) {\n    recentlyClosedRef.current.set(tab.path, Date.now());\n  }\n  closeRightTab(id);\n}, [rightPaneTabs, closeRightTab]);\n```\n\nThen update all closeRightTab calls to use handleCloseRightTab.\n\n## When Done\nbd close markdown-themes-0dl --reason \"Added recently-closed tracking to right pane tabs\"","status":"open","priority":2,"issue_type":"bug","created_at":"2026-02-05T11:41:26.346863429-05:00","updated_at":"2026-02-05T11:54:16.65050267-05:00","labels":["follow-mode","ready","ux-bug"]}
{"id":"markdown-themes-0i7","title":"Add split view","description":"Side-by-side file viewing, support for diff comparison mode.","notes":"## prepared.prompt\n\nAdd split view capability to markdown-themes for side-by-side file viewing and diff comparison.\n\n**Context:** Users want to compare files or view reference material alongside their work. This builds on the tab system (markdown-themes-2lc) to allow two files open simultaneously.\n\n**Files to create:**\n- src/components/SplitView.tsx - Container with draggable divider between two panes\n- src/components/DiffViewer.tsx - Side-by-side diff comparison view\n- src/hooks/useSplitView.ts - Split view state management\n\n**Files to modify:**\n- src/components/Toolbar.tsx - Add split view toggle button\n- src/App.tsx - Integrate SplitView around viewer area\n\n**Implementation details:**\n1. useSplitView.ts hook:\n   - Track: isSplit, splitRatio (0-1), leftFile, rightFile, isDiffMode\n   - toggleSplit() - enable/disable split view\n   - setSplitRatio(ratio) - for drag resize\n   - setDiffMode(enabled) - toggle diff comparison\n\n2. SplitView.tsx component:\n   - Two panes with independent file viewing\n   - Draggable divider between panes (cursor: col-resize)\n   - Track drag to update splitRatio\n   - Each pane renders ViewerContainer with its file\n   - When not split, render single pane full width\n\n3. DiffViewer.tsx component:\n   - Side-by-side text comparison\n   - Highlight added/removed/changed lines\n   - Sync scroll between panes\n   - Line-level diff using simple algorithm or diff library\n\n4. Toolbar.tsx additions:\n   - Split view toggle button (icon: columns)\n   - Diff mode toggle (only visible when split)\n\n**Acceptance criteria:**\n- [ ] Split view toggle shows two panes\n- [ ] Divider is draggable to resize panes\n- [ ] Each pane can display different file\n- [ ] Diff mode highlights changes between files\n- [ ] Scroll syncs in diff mode\n- [ ] Single view mode still works normally\n\nWhen complete, commit changes and run `bd close markdown-themes-0i7`.","status":"closed","priority":1,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-03T11:44:52.157405128-05:00","created_by":"GGPrompts","updated_at":"2026-02-03T12:20:35.073681614-05:00","closed_at":"2026-02-03T12:20:35.073681614-05:00","close_reason":"Added SplitView with draggable divider, dual file watchers, Ctrl+click to open in right pane","labels":["frontend","ready"],"dependencies":[{"issue_id":"markdown-themes-0i7","depends_on_id":"markdown-themes-wpi","type":"blocks","created_at":"2026-02-03T11:44:52.159632872-05:00","created_by":"GGPrompts"},{"issue_id":"markdown-themes-0i7","depends_on_id":"markdown-themes-wpi","type":"parent-child","created_at":"2026-02-03T11:45:25.798322052-05:00","created_by":"GGPrompts"}]}
{"id":"markdown-themes-0oi","title":"Add React Router and section routing","description":"Set up React Router with routes for Landing, Files, SourceControl, and PromptNotebook sections.","notes":"## prepared.prompt\n\nSet up React Router for the markdown-themes dashboard.\n\n**Context:** The app needs multi-section navigation between Landing, Files, Source Control, and Prompt Notebook.\n\n**Install dependency:**\n```bash\nnpm install react-router-dom\n```\n\n**Files to modify:**\n- `src/main.tsx` - Wrap App with BrowserRouter\n- `src/App.tsx` - Add Routes for each section\n\n**Routes to create:**\n- `/` â†’ Landing page\n- `/files` â†’ Files section (current markdown viewer)\n- `/source-control` â†’ Source Control section\n- `/prompts` â†’ Prompt Notebook section\n\n**Implementation:**\n1. Install react-router-dom\n2. Wrap App in BrowserRouter in main.tsx\n3. Create Routes in App.tsx\n4. Move current viewer content to /files route\n5. Create placeholder components for other routes\n\n**Acceptance criteria:**\n- [ ] react-router-dom installed\n- [ ] Routes work with browser navigation\n- [ ] Current functionality preserved at /files\n- [ ] Placeholder pages render at other routes\n\nWhen done, commit and run `bd close markdown-themes-0oi`.","status":"closed","priority":1,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-03T11:52:09.899325424-05:00","created_by":"GGPrompts","updated_at":"2026-02-03T11:56:54.497302949-05:00","closed_at":"2026-02-03T11:56:54.497302949-05:00","close_reason":"React Router setup complete with routes for /, /files, /source-control, /prompts","labels":["frontend","ready"],"dependencies":[{"issue_id":"markdown-themes-0oi","depends_on_id":"markdown-themes-xsf","type":"parent-child","created_at":"2026-02-03T11:52:17.972021504-05:00","created_by":"GGPrompts"}]}
{"id":"markdown-themes-0vc","title":"Add viewers for audio and SVG files","description":"Extend file viewers to support:\n\n- Audio (mp3, wav, ogg, etc.) - HTML5 audio player\n- SVG - Render as image with toggle to view source code\n\nAudio: Simple \u003caudio\u003e element with controls.\nSVG: Dual-mode - rendered preview + source view toggle since SVGs are both visual and code.","notes":"## Retro\n- What worked: Followed existing viewer patterns (ImageViewer, CodeViewer) for consistency. Reused CodeViewer for SVG source mode.\n- What was unclear: Whether webm should be in audio extensions (it can be both audio and video) - included it in audio since VideoViewer does not exist yet.","status":"closed","priority":3,"issue_type":"feature","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-03T14:24:13.280155696-05:00","created_by":"GGPrompts","updated_at":"2026-02-03T15:26:55.857296643-05:00","closed_at":"2026-02-03T15:26:55.857296643-05:00","close_reason":"Added AudioViewer and SvgViewer components with full functionality: audio playback with native controls and duration display; SVG rendering with render/source toggle and checkered transparency background. Updated ViewerContainer routing and fileIcons for audio file type.","labels":["frontend","nice-to-have","ready"]}
{"id":"markdown-themes-0vs","title":"Follow Conversations - auto-open active Claude conversations","description":"View current Claude session as themed markdown - see your conversation rendered live.\n\n## Simplified Approach\nUse CLAUDE_CODE_SESSION_ID environment variable to find exact conversation file.\n\n## Path Formula\n~/.claude/projects/{cwd-encoded}/{session-id}.jsonl\n\nWhere cwd-encoded = working directory with / replaced by -\n\n## Implementation\n1. Hook reads session ID (via TabzChrome env endpoint or passed from hook)\n2. Constructs path to conversation JSONL\n3. Opens in ConversationMarkdownViewer\n4. Existing file watcher shows live updates\n\n## No longer needed\n- Home directory file watching\n- Scanning for new conversations\n- Complex streaming detection","status":"closed","priority":1,"issue_type":"feature","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-04T23:34:21.734449306-05:00","created_by":"GGPrompts","updated_at":"2026-02-05T00:09:43.527765455-05:00","closed_at":"2026-02-05T00:09:43.527765455-05:00","close_reason":"Feature complete: useCurrentConversation hook + View Conversation toolbar button","dependencies":[{"issue_id":"markdown-themes-0vs","depends_on_id":"markdown-themes-3p3","type":"blocks","created_at":"2026-02-04T23:34:49.331142425-05:00","created_by":"GGPrompts"}]}
{"id":"markdown-themes-11q","title":"Upgrade Cyberpunk theme","description":"Deep upgrade the Cyberpunk theme to match ~/projects/htmlstyleguides/styles/cyberpunk.html\n\n## Current State\n- File: src/themes/cyberpunk.css (1.2KB)\n- Has neon colors but missing the glow effects and depth\n\n## Fixes Needed\n1. **Load web fonts** - Add Google Fonts import for the actual fonts\n2. **Neon glow effects** - text-shadow, box-shadow with neon colors\n3. **Grid lines/scanlines** - Study HTML styleguide for any CRT/terminal textures\n4. **Spacing scale** - Use consistent --space-N variables\n5. **Shiki theme** - Pick syntax highlighting with neon/terminal colors\n6. **Prose typography** - Match heading sizes, ALL CAPS if used, letter-spacing\n\n## Reference\n- HTML: ~/projects/htmlstyleguides/styles/cyberpunk.html","notes":"## Retro\n- What worked: The HTML styleguide provided a comprehensive reference with exact color values, glow effects, and CSS patterns to port\n- The upgrade significantly enhances the visual impact with true cyberpunk aesthetics: scanlines, vignette effects, neon glows, clipped corners\n- Font stack now properly uses Orbitron (display), Rajdhani (body), and Share Tech Mono (code)\n- What was unclear: Nothing major - the task was well-defined with clear acceptance criteria","status":"closed","priority":2,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-02T23:48:43.320755701-05:00","created_by":"GGPrompts","updated_at":"2026-02-03T00:06:55.102320027-05:00","closed_at":"2026-02-03T00:06:55.102320027-05:00","close_reason":"Upgraded Cyberpunk theme with full neon color palette (#FF2A6D pink, #05D9E8 cyan, #39FF14 green), scanlines overlay, vignette effects, clipped angular corners on code blocks, pulsing neon glow on headings, proper typography (Orbitron/Rajdhani/Share Tech Mono), and gradient accents. Matches the htmlstyleguides reference.","labels":["theme"],"dependencies":[{"issue_id":"markdown-themes-11q","depends_on_id":"markdown-themes-7m8","type":"blocks","created_at":"2026-02-02T23:50:14.006383883-05:00","created_by":"GGPrompts"},{"issue_id":"markdown-themes-11q","depends_on_id":"markdown-themes-iz9","type":"blocks","created_at":"2026-02-02T23:50:19.778381233-05:00","created_by":"GGPrompts"}]}
{"id":"markdown-themes-19l","title":"Upgrade Cosmic theme","description":"Deep upgrade the Cosmic theme to match ~/projects/htmlstyleguides/styles/cosmic.html\n\n## Current State\n- File: src/themes/cosmic.css (1.4KB)\n- Has dark purples but missing star field and nebula effects\n\n## Fixes Needed\n1. **Load web fonts** - Space-age or futuristic fonts from HTML styleguide\n2. **Star field background** - Radial gradients or animated stars\n3. **Gradient text** - Nebula-like gradient on headings\n4. **Glow effects** - Soft ethereal glow on accent elements\n5. **Shiki theme** - Deep space colors (purples, blues, pinks)\n6. **Prose typography** - Ethereal, floating feel\n\n## Reference\n- HTML: ~/projects/htmlstyleguides/styles/cosmic.html","notes":"## Retro\n- What worked: The HTML styleguide reference had all the CSS patterns documented clearly, making it straightforward to port. CSS pseudo-elements work well for the starfield without JavaScript.\n- What was unclear: Nothing major - the task was well-defined with specific color values and effect patterns.","status":"closed","priority":2,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-02T23:49:12.893059817-05:00","created_by":"GGPrompts","updated_at":"2026-02-03T00:08:12.738012975-05:00","closed_at":"2026-02-03T00:08:12.738012975-05:00","close_reason":"Upgraded Cosmic theme with full styleguide implementation: star field with twinkling animation via CSS pseudo-elements, nebula gradient clouds with drift animation, aurora-wave gradient text on headings (Cormorant Garamond 300), Lexend body font, ethereal glow effects on all interactive elements, and dracula shiki theme for code blocks.","labels":["theme"],"dependencies":[{"issue_id":"markdown-themes-19l","depends_on_id":"markdown-themes-7m8","type":"blocks","created_at":"2026-02-02T23:51:11.723280447-05:00","created_by":"GGPrompts"},{"issue_id":"markdown-themes-19l","depends_on_id":"markdown-themes-iz9","type":"blocks","created_at":"2026-02-02T23:51:17.484222509-05:00","created_by":"GGPrompts"}]}
{"id":"markdown-themes-1eh","title":"Add prompt library browser","description":"Browse .prompts folders, organize by project/category.","notes":"## prepared.prompt\n\nCreate a prompt library browser sidebar for browsing and selecting .prompty files from the filesystem.\n\n**Context:** This complements the PromptyViewer (markdown-themes-05x) by providing navigation through a library of prompt files. Users can browse folders, search/filter prompts, and click to open them in the viewer. The library reads from a `.prompts/` directory structure.\n\n**Reference:** The app already has a Sidebar.tsx at `src/components/Sidebar.tsx` - follow similar patterns for styling and state management.\n\n**Files to create:**\n1. `src/components/PromptLibrary.tsx` - Main library browser component\n\n**Implementation details:**\n\n1. **Folder structure browsing:**\n   - Recursively scan `.prompts/` directories\n   - Display as collapsible tree (folders expandable)\n   - Show file icons for .prompty, .md files\n   - Remember expanded/collapsed state\n\n2. **Frontmatter metadata display:**\n   - Parse YAML frontmatter from each file\n   - Show: name (or filename), description snippet, tags\n   - Use promptyUtils.ts from markdown-themes-05x\n\n3. **Search/filter functionality:**\n   - Text search across filename, name, description, tags\n   - Filter by tags (show tag chips, click to filter)\n   - Debounced search input\n\n4. **Selection and integration:**\n   - Click file to open in PromptyViewer\n   - Highlight currently selected file\n   - Callback: `onSelectPrompt(filePath: string, content: string)`\n\n**Component API:**\n```typescript\ninterface PromptLibraryProps {\n  rootPath: string;  // e.g., \".prompts/\"\n  onSelectPrompt: (path: string, content: string) =\u003e void;\n  selectedPath?: string;\n}\n```\n\n**Styling notes:**\n- Match existing Sidebar.tsx aesthetic\n- Use Tailwind classes consistent with the project\n- Collapsible sections with smooth animations\n- Tag chips with project's color palette\n\n**Acceptance criteria:**\n- [ ] Displays folder tree from .prompts/ directory\n- [ ] Shows frontmatter metadata (name, description, tags)\n- [ ] Search filters prompts by name/description/tags\n- [ ] Click to select and load prompt into viewer\n- [ ] Visual indication of selected file\n- [ ] Folders are expandable/collapsible\n- [ ] Empty state when no prompts found\n\nWhen done, commit with descriptive message and run `bd close markdown-themes-1eh`.","status":"closed","priority":2,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-03T11:44:59.59472551-05:00","created_by":"GGPrompts","updated_at":"2026-02-03T12:14:53.556515153-05:00","closed_at":"2026-02-03T12:14:53.556515153-05:00","close_reason":"Created PromptLibrary component with folder tree, frontmatter display, search/filter, and selection","labels":["frontend","ready"],"dependencies":[{"issue_id":"markdown-themes-1eh","depends_on_id":"markdown-themes-kgj","type":"blocks","created_at":"2026-02-03T11:44:59.596844275-05:00","created_by":"GGPrompts"},{"issue_id":"markdown-themes-1eh","depends_on_id":"markdown-themes-kgj","type":"parent-child","created_at":"2026-02-03T11:45:38.765006166-05:00","created_by":"GGPrompts"},{"issue_id":"markdown-themes-1eh","depends_on_id":"markdown-themes-05x","type":"blocks","created_at":"2026-02-03T11:45:40.981712667-05:00","created_by":"GGPrompts"}]}
{"id":"markdown-themes-1hk","title":"No fallback when HOTKEYS.md does not exist","description":"Files.tsx:750-758 - Hotkeys button assumes HOTKEYS.md exists in workspace. Opens split view with error if file missing.","design":"Check file exists before opening, or embed default hotkeys reference in app as fallback","notes":"## prepared.prompt\n\nFix together with markdown-themes-m76. See that issue for combined prompt.","status":"open","priority":2,"issue_type":"bug","created_at":"2026-02-05T11:41:30.179124943-05:00","updated_at":"2026-02-05T11:54:24.169350013-05:00","labels":["error-handling","ready","ux-bug"]}
{"id":"markdown-themes-1n6","title":"useSubagentWatcher has stale enabled closure","description":"useSubagentWatcher.ts:203,224 - reconnect timeout uses stale enabled value from closure. If user disables feature during reconnect delay, it still reconnects.","design":"Use enabledRef pattern or check current prop value in reconnect","notes":"## prepared.prompt\n\nFix together with markdown-themes-8px. See that issue for combined prompt.","status":"open","priority":2,"issue_type":"bug","created_at":"2026-02-05T11:41:16.613444143-05:00","updated_at":"2026-02-05T11:53:34.601307225-05:00","labels":["closure-bug","ready","websocket"]}
{"id":"markdown-themes-1tr","title":"Fix parse error flash when loading JSON files","description":"## Problem\nWhen clicking a JSON file in the file tree, a red \"Parse Error\" message flashes briefly before the JSON renders correctly. This happens even with valid JSON files.\n\n## What we've tried\n\n### 1. JsonViewer setState in useMemo (commit c440e8d)\n- Found `setParseError()` being called inside `useMemo` callback\n- This is a React anti-pattern (setting state during render)\n- Changed to derive `parseError` alongside `parsedData` in a single return value\n- **Result**: Still flashing\n\n### 2. WorkingTree error debouncing (commit fb38a93)\n- Added 300ms debounce to error display in WorkingTree\n- **Result**: Not the source - this was for a different component\n\n## Likely causes to investigate\n1. **Initial render with empty content** - ViewerContainer might render JsonViewer with empty string before file content arrives\n2. **File watcher delay** - Content arrives after initial render, causing JSON.parse to fail on empty/undefined\n3. **Race condition** - Component mounts before useFileWatcher returns content\n\n## Files involved\n- `src/components/viewers/JsonViewer.tsx` - The viewer showing the error\n- `src/components/ViewerContainer.tsx` - Routes to correct viewer\n- `src/pages/Files.tsx` - Uses useFileWatcher to get content\n\n## Suggested fix approaches\n1. Add loading state check in ViewerContainer - don't render JsonViewer until content is truthy\n2. Guard in JsonViewer - if content is empty/whitespace, show loading instead of trying to parse\n3. Debounce the parseError display similar to WorkingTree fix","status":"closed","priority":2,"issue_type":"bug","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-04T14:49:43.076489018-05:00","created_by":"GGPrompts","updated_at":"2026-02-04T15:05:35.417200905-05:00","closed_at":"2026-02-04T15:05:35.417200905-05:00","close_reason":"Fixed with two-part solution: (1) JsonViewer treats empty content as loading state, (2) useFileWatcher now tracks contentPath - loading is derived from path !== contentPath, so when switching files, loading is immediately true before the effect runs, preventing stale content from being passed to the viewer."}
{"id":"markdown-themes-1vh","title":"Show git status dots in file tree sidebar","description":"Show git status indicators (colored dots) next to files in the sidebar, like TabzChrome's dashboard file tree.\n\n## Reference Implementation\nTabzChrome's `extension/dashboard/components/files/FileTree.tsx` (lines 58-67, 219-235, 361-406)\n\n## API\n`GET /api/files/git-status?path=...` (already exists in TabzChrome backend)\n\nReturns:\n```ts\n{\n  isGitRepo: boolean,\n  files: {\n    [path: string]: {\n      status: 'staged' | 'modified' | 'untracked',\n      indexStatus: string,\n      workTreeStatus: string\n    }\n  }\n}\n```\n\n## UI Design\nColor-coded dots next to file names:\n- ðŸ”µ Blue (`bg-blue-400`) = staged for commit\n- ðŸŸ¡ Yellow (`bg-yellow-400`) = modified\n- ðŸŸ¢ Green (`bg-green-400`) = untracked\n\nFolders get smaller, subtle dots (`w-1.5 h-1.5 opacity-60`) if they contain modified files.\n\n## Implementation Steps\n1. Add `gitStatus` and `isGitRepo` state to Sidebar.tsx\n2. Create `fetchGitStatus()` function calling the API\n3. Call it alongside file tree fetches (on mount, refresh, file changes)\n4. Add `getGitStatusIndicator()` render helper\n5. Add `getFolderGitStatus()` to check if folder contains modified files\n6. Render dots in TreeItem component next to file names\n\n## Files to modify\n- `src/components/Sidebar.tsx` - main implementation","notes":"## prepared.prompt\n\n## Context\nTabzChrome's file tree shows git status dots next to files. We want the same in markdown-themes sidebar.\n\n## Task\nAdd git status indicators (colored dots) next to files in the Sidebar.\n\n## Key Files\n- src/components/Sidebar.tsx - TreeItem rendering (lines 246-284 for files)\n- src/lib/api.ts - add fetchGitStatus() function\n- Reference: TabzChrome FileTree.tsx lines 361-406\n\n## Implementation\n1. Add to api.ts:\n```ts\nexport async function fetchGitStatus(path: string): Promise\u003c{isGitRepo: boolean, files: Record\u003cstring, {status: 'staged'|'modified'|'untracked'}\u003e}\u003e {\n  const response = await fetch(`${API_BASE}/api/files/git-status?${new URLSearchParams({ path })}`);\n  return response.json();\n}\n```\n\n2. In Sidebar.tsx:\n- Add state: `const [gitStatus, setGitStatus] = useState\u003cRecord\u003cstring, {status: string}\u003e\u003e({});`\n- Fetch on mount and when workspace changes\n- Render dot in TreeItem: blue=staged, yellow=modified, green=untracked\n- Use: `\u003cspan className=\"w-2 h-2 rounded-full bg-yellow-400 ml-1\" /\u003e`\n\n3. Optional: smaller dots (w-1.5 h-1.5 opacity-60) on folders containing modified files\n\n## When Done\nRun `npm run test:run` then: bd close markdown-themes-1vh --reason \"Added git status dots to sidebar\"","status":"closed","priority":2,"issue_type":"feature","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-04T11:33:56.868676511-05:00","created_by":"GGPrompts","updated_at":"2026-02-04T12:28:43.42238611-05:00","closed_at":"2026-02-04T12:28:43.42238611-05:00","close_reason":"Added git status indicators (colored dots) to the Sidebar. Files show blue=staged, yellow=modified, green=untracked dots. Folders containing changed files show smaller opacity-60 dots. Status is fetched via new fetchGitStatus() API function and updates when workspace or file tree changes.","labels":["ready"]}
{"id":"markdown-themes-232","title":"Port Streamline Moderne theme","description":"Art deco streamlined aesthetic.","notes":"## prepared.prompt\n\nPort the Streamline Moderne theme from htmlstyleguides to markdown-themes.\n\n**Context:** 1930s Art Deco movement emphasizing aerodynamic curves, chrome accents, and speed lines. Think luxury ocean liners and classic automobiles.\n\n**Source file:** /home/marci/projects/htmlstyleguides/styles/streamline-moderne.html\n**Target file:** /home/marci/projects/markdown-themes/src/themes/streamline-moderne.css\n**Reference:** /home/marci/projects/markdown-themes/src/themes/dark-academia.css (for structure)\n\n**Extract and convert:**\n\n1. **CSS Variables to define:**\n   - `--bg-primary: #F5F0E6` (cream)\n   - `--bg-secondary` (slightly darker cream)\n   - `--chrome-light: #E8E8E8`, `--chrome-dark: #C0C0C0`\n   - `--accent-primary: #1A2A4A` (navy)\n   - `--accent-secondary: #7EBDB4` (mint)\n   - `--text-primary`, `--text-secondary`\n   - `--font-body: \"Quicksand\", sans-serif`\n   - `--font-display: \"Raleway\", sans-serif`\n   - `--font-mono` (pick complementary mono font)\n\n2. **Shiki syntax highlighting vars:**\n   - `--shiki-color-text`, `--shiki-color-background`\n   - `--shiki-token-*` in navy/mint/chrome palette\n\n3. **Theme-specific effects:**\n   - Speed lines (horizontal decorative stripes)\n   - Chrome reflections (linear-gradient metallic effects)\n   - Teardrop/aerodynamic shapes (border-radius variations)\n   - Smooth animations (transitions on hover)\n   - Horizontal emphasis (wide elements, speed feel)\n   - Art Deco geometric accents\n\n4. **Structure:** Wrap all styles in `.theme-streamline-moderne { ... }`\n\n5. **Register theme:** Add export to /home/marci/projects/markdown-themes/src/themes/index.ts\n\n**Acceptance criteria:**\n- [ ] streamline-moderne.css created with all CSS variables\n- [ ] Chrome/metallic gradient effects implemented\n- [ ] Speed line decorative elements\n- [ ] Smooth hover transitions\n- [ ] Theme exported from index.ts\n- [ ] Elegant 1930s moderne aesthetic\n\nWhen done, commit changes and run `bd close markdown-themes-232`.","status":"closed","priority":2,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-03T11:45:03.608200239-05:00","created_by":"GGPrompts","updated_at":"2026-02-03T12:01:17.776031425-05:00","closed_at":"2026-02-03T12:01:17.776031425-05:00","close_reason":"Ported Streamline Moderne theme with chrome gradients, speed lines, Art Deco curves, and navy/mint palette","labels":["ready","theme"],"dependencies":[{"issue_id":"markdown-themes-232","depends_on_id":"markdown-themes-dsk","type":"blocks","created_at":"2026-02-03T11:45:03.610899446-05:00","created_by":"GGPrompts"},{"issue_id":"markdown-themes-232","depends_on_id":"markdown-themes-dsk","type":"parent-child","created_at":"2026-02-03T11:45:28.405546736-05:00","created_by":"GGPrompts"}]}
{"id":"markdown-themes-234","title":"Integrate Streamdown for live AI streaming","description":"Replace react-markdown with Vercel Streamdown for live rendering of AI edits. Features: caret animation, incomplete markdown handling, built-in Shiki. Will show Claude editing in real-time.","status":"closed","priority":1,"issue_type":"feature","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-02T18:51:59.768839946-05:00","created_by":"GGPrompts","updated_at":"2026-02-02T18:53:59.974532884-05:00","closed_at":"2026-02-02T18:53:59.974532884-05:00","close_reason":"Implemented Streamdown with streaming detection and caret animation","labels":["ai-features","core"]}
{"id":"markdown-themes-26s","title":"Recent files and persistence","description":"Remember recently opened files, last used theme, window position using Tauri store plugin","notes":"## Retro\n- What worked: Context7 documentation for tauri-plugin-store was very helpful with clear code examples. LazyStore API is straightforward.\n- What was unclear: The LazyStore options type signature in the npm package differs from the documentation examples (autoSave option requires defaults in some versions).","status":"closed","priority":3,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-02T18:44:23.592887179-05:00","created_by":"GGPrompts","updated_at":"2026-02-02T19:12:22.803368471-05:00","closed_at":"2026-02-02T19:12:22.803368471-05:00","close_reason":"Added useAppStore with theme/recent files/workspace persistence","labels":["ux"]}
{"id":"markdown-themes-2cr","title":"Port remaining style guides as themes","description":"Convert more htmlstyleguides themes to CSS variable-based themes. Priority: noir, nordic, glassmorphism, retro-futurism, art-deco","status":"closed","priority":2,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-02T18:43:58.397512838-05:00","created_by":"GGPrompts","updated_at":"2026-02-02T19:03:20.33615269-05:00","closed_at":"2026-02-02T19:03:20.33615269-05:00","close_reason":"Ported 5 themes: noir, nordic, glassmorphism, retro-futurism, art-deco","labels":["themes"]}
{"id":"markdown-themes-2ej","title":"Port Industrial theme","description":"Factory aesthetic: steel, rust, warning colors, stencil typography.","notes":"## prepared.prompt\n\nPort the Industrial theme from htmlstyleguides to markdown-themes.\n\n**Context:** We are building a library of markdown preview themes. Industrial uses steel, rust, and warning colors with riveted metal aesthetic.\n\n**Source file:** /home/marci/projects/htmlstyleguides/styles/industrial.html\n**Target file:** /home/marci/projects/markdown-themes/src/themes/industrial.css\n**Reference:** /home/marci/projects/markdown-themes/src/themes/dark-academia.css (for structure)\n\n**Extract and convert:**\n\n1. **CSS Variables to define:**\n   - `--bg-primary`, `--bg-secondary` from Steel colors (#2C3033, #4A5459)\n   - `--text-primary`, `--text-secondary`, `--text-muted`\n   - `--accent-primary` from Rust (#8B3A1D, #B54A24)\n   - `--accent-secondary` from Warning (#FFB800)\n   - `--border-color`, `--code-bg`\n   - `--font-body: \"Oswald\", sans-serif`\n   - `--font-mono: \"Share Tech Mono\", monospace`\n   - `--font-display: \"Stencil One\", cursive` (for headings)\n\n2. **Shiki syntax highlighting vars:**\n   - `--shiki-color-text`, `--shiki-color-background`\n   - `--shiki-token-*` variables matching rust/steel palette\n\n3. **Theme-specific effects:**\n   - Riveted metal borders (dotted/inset patterns)\n   - Rust texture overlays where appropriate\n   - Warning stripe patterns for blockquotes or alerts\n   - Heavy, industrial-weight typography\n\n4. **Structure:** Wrap all styles in `.theme-industrial { ... }`\n\n5. **Register theme:** Add export to /home/marci/projects/markdown-themes/src/themes/index.ts\n\n**Acceptance criteria:**\n- [ ] industrial.css created with all CSS variables\n- [ ] Theme class `.theme-industrial` contains all styles\n- [ ] Shiki variables defined for syntax highlighting\n- [ ] Theme exported from index.ts\n- [ ] Visual style matches industrial/factory aesthetic\n\nWhen done, commit changes and run `bd close markdown-themes-2ej`.","status":"closed","priority":2,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-03T11:45:00.488858807-05:00","created_by":"GGPrompts","updated_at":"2026-02-03T12:00:57.872563151-05:00","closed_at":"2026-02-03T12:00:57.872563151-05:00","close_reason":"Ported Industrial theme with metal/rust palette, hazard stripes, stencil typography, and riveted borders","labels":["ready","theme"],"dependencies":[{"issue_id":"markdown-themes-2ej","depends_on_id":"markdown-themes-dsk","type":"blocks","created_at":"2026-02-03T11:45:00.491060051-05:00","created_by":"GGPrompts"},{"issue_id":"markdown-themes-2ej","depends_on_id":"markdown-themes-dsk","type":"parent-child","created_at":"2026-02-03T11:45:28.412332195-05:00","created_by":"GGPrompts"}]}
{"id":"markdown-themes-2hc","title":"Add git diff highlighting to MarkdownViewer","description":"Git diff highlighting (green for additions, yellow for modifications, red strikethrough for deletions) currently only works for code files in CodeViewer. MarkdownViewer doesn't show any git diff indicators.\n\nChallenge: MarkdownViewer renders markdown to HTML via Streamdown, so we can't easily highlight individual lines like we do with Shiki's .line spans. Would need a different approach - possibly:\n- Highlight at paragraph/block level instead of line level\n- Or inject markers into the rendered HTML based on source line mapping","notes":"## Retro\n- What worked: Reusing useGitDiff hook and mapLinesToBlocks utility. Post-render highlighting via useEffect was effective since Streamdown renders markdown as a whole.\n- What was unclear: Initial thought was to pre-process markdown but Streamdown does not preserve HTML wrappers in markdown. Post-processing the rendered DOM worked better.","status":"closed","priority":2,"issue_type":"feature","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-04T18:54:23.546142104-05:00","created_by":"GGPrompts","updated_at":"2026-02-04T23:11:07.877733585-05:00","closed_at":"2026-02-04T23:11:07.877733585-05:00","close_reason":"Block-level git diff highlighting added: mapLinesToBlocks utility, useGitDiff integration in MarkdownViewer, CSS for prose [data-diff] selectors, 8 new tests","labels":["ready"]}
{"id":"markdown-themes-2lc","title":"Add tab management system","description":"Preview/pin pattern like VS Code. Single-click = preview (italic, replaced by next), double-click = pin.","notes":"## Retro\n- What worked: Clear requirements made implementation straightforward. VS Code tab behavior is well-documented pattern.\n- What was unclear: Nothing significant - the acceptance criteria were clear and matched expected behavior.","status":"closed","priority":1,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-03T11:44:49.942224214-05:00","created_by":"GGPrompts","updated_at":"2026-02-03T12:15:25.635103177-05:00","closed_at":"2026-02-03T12:15:25.635103177-05:00","close_reason":"Added VS Code-style tab management with preview/pin pattern, useTabManager hook, TabBar component","labels":["frontend","ready"],"dependencies":[{"issue_id":"markdown-themes-2lc","depends_on_id":"markdown-themes-wpi","type":"blocks","created_at":"2026-02-03T11:44:49.944387728-05:00","created_by":"GGPrompts"},{"issue_id":"markdown-themes-2lc","depends_on_id":"markdown-themes-wpi","type":"parent-child","created_at":"2026-02-03T11:45:25.788928369-05:00","created_by":"GGPrompts"}]}
{"id":"markdown-themes-2v1","title":"Upgrade Nordic theme","description":"Deep upgrade the Nordic theme to match ~/projects/htmlstyleguides/styles/nordic.html\n\n## Current State\n- File: src/themes/nordic.css (1.6KB)\n- Has warm tones but missing the cozy texture\n\n## Fixes Needed\n1. **Load web fonts** - Nunito Sans, Playfair Display from HTML styleguide\n2. **Wood grain texture** - The HTML styleguide uses repeating-linear-gradient for wood effect\n3. **Soft warm shadows** - Study the shadow values (should be soft, not harsh)\n4. **Spacing scale** - Match the breathing whitespace feel\n5. **Shiki theme** - Pick syntax highlighting with warm/muted tones\n6. **Prose typography** - Match line-height (1.8), letter-spacing\n\n## Reference\n- HTML: ~/projects/htmlstyleguides/styles/nordic.html\n- Key: Warm wood tones (Birch #F5E6D3, Pine #E8D5B7, Oak #D4B896)","notes":"## prepared.prompt\n\nUpgrade the Nordic theme to match the HTML styleguide at ~/projects/htmlstyleguides/styles/nordic.html\n\n**Context:** The current theme has warm tones but lacks the cozy wood grain texture and breathing whitespace of Scandinavian design.\n\n**Key files:**\n- src/themes/nordic.css - upgrade this file\n- src/index.css - ensure fonts are imported (Playfair Display, Nunito Sans)\n- Reference: ~/projects/htmlstyleguides/styles/nordic.html\n\n**CSS Patterns to Implement:**\n\n1. **Fonts:**\n   - Serif: Playfair Display (500, 600) for headings\n   - Sans: Nunito Sans (300-700) for body\n\n2. **Color Palette (Warm Wood Tones):**\n   - Birch: #F5E6D3 (lightest)\n   - Pine: #E8D5B7\n   - Oak: #D4B896\n   - Walnut: #B8956E\n   - Teak: #8B6914 (darkest)\n   - Terracotta: #C67B5C (primary accent)\n   - Forest: #5B7B6D (secondary)\n   - Mustard: #D4A843\n   - Fjord: #7B9AAB (cool blue)\n\n3. **Wood Grain Texture:**\n   ```css\n   repeating-linear-gradient(\n     90deg,\n     transparent,\n     transparent 2px,\n     rgba(139, 105, 20, 0.02) 2px,\n     rgba(139, 105, 20, 0.02) 4px\n   ),\n   linear-gradient(180deg, var(--birch) 0%, var(--pine) 50%, var(--birch) 100%)\n   ```\n\n4. **Shadows (Soft \u0026 Warm):**\n   - Soft: 0 2px 8px rgba(45, 55, 72, 0.06)\n   - Medium: 0 4px 16px rgba(45, 55, 72, 0.08)\n   - Warm: 0 4px 20px rgba(198, 123, 92, 0.12)\n\n5. **Typography:**\n   - Line-height: 1.7 (generous breathing)\n   - Letter-spacing: -0.01em (headings), 0.15em (overlines)\n   - Max-width: 60ch (optimal reading)\n   - Border-radius: 6px (sm), 10px (md), 16px (lg), 24px (xl)\n\n6. **Shiki Theme:** nord or github-light (warm muted tones)\n\n**Acceptance:**\n- [ ] Wood grain texture visible on backgrounds\n- [ ] Feels cozy and lived-in\n- [ ] Generous whitespace throughout\n- [ ] Terracotta accents on interactive elements\n\nWhen done, commit and run `bd close markdown-themes-2v1`.","status":"closed","priority":2,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-02T23:48:49.227202296-05:00","created_by":"GGPrompts","updated_at":"2026-02-03T00:06:21.91329561-05:00","closed_at":"2026-02-03T00:06:21.91329561-05:00","close_reason":"Upgraded Nordic theme to match HTML styleguide. Added wood grain texture background, warm wood tones (birch, pine, oak, walnut, teak), terracotta/forest/mustard/fjord accent colors, generous 1.7 line-height, 60ch max-width, soft shadows, and cozy styling throughout. Updated Shiki theme to github-light for warm muted tones.","labels":["theme"],"dependencies":[{"issue_id":"markdown-themes-2v1","depends_on_id":"markdown-themes-7m8","type":"blocks","created_at":"2026-02-02T23:50:25.523702015-05:00","created_by":"GGPrompts"},{"issue_id":"markdown-themes-2v1","depends_on_id":"markdown-themes-iz9","type":"blocks","created_at":"2026-02-02T23:50:31.300260284-05:00","created_by":"GGPrompts"}]}
{"id":"markdown-themes-2z1","title":"Add Claude Code filter","description":"Filter showing all Claude-related files: .claude/ folders, CLAUDE.md, plugin.json, .mcp.json, hooks, keybindings.json.","notes":"## Retro\n- What worked: Clear task spec with file patterns made implementation straightforward\n- What was unclear: Had to discover that useWorkspace excludes hidden files by default, needed to modify to allow Claude config files","status":"closed","priority":1,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-03T11:44:53.192633121-05:00","created_by":"GGPrompts","updated_at":"2026-02-03T12:20:54.196945702-05:00","closed_at":"2026-02-03T12:20:54.196945702-05:00","close_reason":"Added Claude Code filter with pattern matching, filter dropdown, match count display","labels":["frontend","ready"],"dependencies":[{"issue_id":"markdown-themes-2z1","depends_on_id":"markdown-themes-wpi","type":"blocks","created_at":"2026-02-03T11:44:53.194923323-05:00","created_by":"GGPrompts"},{"issue_id":"markdown-themes-2z1","depends_on_id":"markdown-themes-wpi","type":"parent-child","created_at":"2026-02-03T11:45:25.805275509-05:00","created_by":"GGPrompts"}]}
{"id":"markdown-themes-3fr","title":"Implement Send to Chat action","description":"Add 'Send to Chat' context menu action that queues file content to TabzChrome sidebar chat.\n\nUse queueToChat() from lib/api.ts which sends { type: 'QUEUE_COMMAND', command } via WebSocket.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-03T22:52:29.452407535-05:00","created_by":"matt","updated_at":"2026-02-03T23:07:46.359166616-05:00","closed_at":"2026-02-03T23:07:46.359166616-05:00","close_reason":"Implemented in FileContextMenu.tsx - Send to Chat action with queueToChat","dependencies":[{"issue_id":"markdown-themes-3fr","depends_on_id":"markdown-themes-eq5","type":"blocks","created_at":"2026-02-03T22:52:38.039387562-05:00","created_by":"matt"}]}
{"id":"markdown-themes-3io","title":"Transfer tabs between panes on drag instead of duplicate","description":"When dragging tabs between left and right panes, transfer instead of duplicate.\n\n## Current Behavior\n- Drag left tab to right pane: Opens copy in right, keeps original in left\n\n## Desired Behavior  \n- Drag left â†’ right: Close from left, open in right\n- Drag right â†’ left: Close from right, open in left\n- Bidirectional transfer\n\n## Key Files\n- src/pages/Files.tsx - handleDropToRight, need handleDropToLeft\n- src/components/TabBar.tsx - drag source info\n- May need to track drag origin pane","status":"closed","priority":2,"issue_type":"feature","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-05T01:02:39.802850912-05:00","created_by":"GGPrompts","updated_at":"2026-02-05T01:06:20.259949311-05:00","closed_at":"2026-02-05T01:06:20.259949311-05:00","close_reason":"Tab drag transfers between panes instead of duplicating"}
{"id":"markdown-themes-3p3","title":"Add Follow Conversations toggle to Files toolbar","description":"Add toolbar button to view current Claude conversation.\n\n## UI\n- Button with chat icon (not a toggle - direct action)\n- Tooltip: \"View Current Conversation\"\n- Only visible/enabled when conversation path is available\n\n## Behavior\n- Click opens the current session JSONL in ConversationMarkdownViewer\n- Uses path from useCurrentConversation hook\n- Existing file watcher handles live updates\n\n## Key Files\n- src/pages/Files.tsx - Toolbar\n- src/hooks/useFileWatcher.ts - Already watches open files","status":"closed","priority":2,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-04T23:34:43.762095407-05:00","created_by":"GGPrompts","updated_at":"2026-02-05T00:09:21.557118026-05:00","closed_at":"2026-02-05T00:09:21.557118026-05:00","close_reason":"View Conversation button added to Files toolbar","dependencies":[{"issue_id":"markdown-themes-3p3","depends_on_id":"markdown-themes-9vw","type":"blocks","created_at":"2026-02-04T23:34:49.279881261-05:00","created_by":"GGPrompts"}]}
{"id":"markdown-themes-3q4","title":"Skip file watcher for video and other binary files","description":"## Problem\nThe useFileWatcher hook was subscribing to ALL file types, including binary files like audio/video. This caused:\n\n1. **Binary content leak**: When switching from audio tab to markdown tab, binary data (e.g., WAV header \"RIFF...\") was briefly passed to the markdown renderer\n2. **Performance**: Fetching large binary files via WebSocket is wasteful - viewers for these files fetch their own data URIs\n3. **HTML errors**: Streamdown tried to parse binary as markdown, creating invalid HTML nesting (`\u003cdiv\u003e` inside `\u003cp\u003e`)\n\n## Already Fixed\n- Audio files (.mp3, .wav, .ogg, .m4a, .aac, .flac, .webm) now skip the file watcher\n\n## TODO\nExtend the skip list to include:\n- Video files (.mp4, .webm, .mov, .avi, .mkv)\n- Images (.png, .jpg, .jpeg, .gif, .webp, .svg, .ico, .bmp)\n- PDFs (.pdf)\n- Any other binary formats that have dedicated viewers\n\n## Implementation\nIn Files.tsx, extend the AUDIO_EXTENSIONS check to include all binary file types that have their own viewers fetching data independently.","status":"closed","priority":3,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-04T13:06:48.598437271-05:00","created_by":"GGPrompts","updated_at":"2026-02-04T13:10:44.950948428-05:00","closed_at":"2026-02-04T13:10:44.950948428-05:00","close_reason":"Closed"}
{"id":"markdown-themes-3up","title":"JsonlViewer crashes: hooks order violation in JsonlLine","description":"White screen crash when viewing .jsonl files.\n\n## Error\n```\nReact has detected a change in the order of Hooks called by JsonlLine.\nRendered more hooks than during the previous render.\n```\n\n## Location\n`src/components/viewers/JsonlViewer.tsx:257` - JsonlLine component\n\n## Cause\nLikely an early return before all hooks are called, violating Rules of Hooks.\n\n## Fix\nEnsure all hooks are called unconditionally at the top of the component before any early returns.","status":"closed","priority":1,"issue_type":"bug","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-04T16:44:28.642243591-05:00","created_by":"GGPrompts","updated_at":"2026-02-04T16:45:02.981464221-05:00","closed_at":"2026-02-04T16:45:02.981464221-05:00","close_reason":"Moved useMemo before early return to fix hooks order"}
{"id":"markdown-themes-407","title":"Create file/folder picker modal component","description":"Build a reusable file/folder picker modal for selecting paths from the filesystem. Currently users have to type paths manually which is error-prone.","design":"## Use Cases\n- Working directory selector in header (ProjectSelector)\n- Prompty fillable fields for file/folder inputs\n- Any future path input needs\n\n## Features\n- Browse filesystem via TabzChrome API\n- Navigate folders (expand/collapse)\n- Filter by file type (optional)\n- Show recent locations\n- Search/filter within current directory\n- Keyboard navigation support\n\n## Implementation\n- New `FilePickerModal` component\n- Props: `mode: 'file' | 'folder' | 'both'`, `onSelect`, `initialPath`, `filter?`\n- Use existing TabzChrome `/api/files/tree` endpoint\n- Match current theme styling","acceptance_criteria":"- [ ] Modal opens from ProjectSelector 'Open Folder' button\n- [ ] Can browse and navigate folder structure\n- [ ] Can select a folder and it updates the workspace\n- [ ] Works with all themes\n- [ ] Keyboard accessible (arrow keys, enter, escape)","notes":"## prepared.prompt\n\nCreate a reusable file/folder picker modal component.\n\n**Problem:** Users must type paths manually, which is error-prone.\n\n**Solution:** Visual file browser modal for selecting files/folders.\n\n**Create:** `src/components/FilePickerModal.tsx`\n\n**Props interface:**\n```typescript\ninterface FilePickerModalProps {\n  mode: 'file' | 'folder' | 'both'\n  onSelect: (path: string) =\u003e void\n  onCancel: () =\u003e void\n  initialPath?: string\n  filter?: string[]  // e.g., ['.md', '.txt']\n  title?: string\n}\n```\n\n**Features:**\n1. Browse filesystem via TabzChrome `/api/files/tree` endpoint\n2. Folder navigation (click to enter, breadcrumb to go back)\n3. File type filtering (optional)\n4. Recent locations section (from useAppStore)\n5. Search/filter within current directory\n6. Keyboard: arrows to navigate, Enter to select, Escape to cancel\n\n**UI layout:**\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ Select Folder              [X] â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ ðŸ” Search...                    â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ Recent:  ~/proj  ~/docs         â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ /home/user/projects             â”‚\nâ”‚ â”œâ”€â”€ ðŸ“ src                      â”‚\nâ”‚ â”œâ”€â”€ ðŸ“ docs                     â”‚\nâ”‚ â””â”€â”€ ðŸ“„ README.md                â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚           [Cancel]  [Select]    â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n**Acceptance criteria:**\n- [ ] Modal opens from ProjectSelector\n- [ ] Can browse and navigate folders\n- [ ] Selection updates workspace\n- [ ] Keyboard accessible\n- [ ] Themed correctly\n\nWhen done, commit and run `bd close markdown-themes-407`.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-02-03T15:02:54.654308849-05:00","updated_at":"2026-02-03T15:29:45.331050896-05:00","closed_at":"2026-02-03T15:29:45.331050896-05:00","close_reason":"Created FilePickerModal component with visual file browser for selecting files/folders. Features: mode prop (file/folder/both), folder navigation with breadcrumbs, search filtering, recent locations from appStore, keyboard navigation (arrows/Enter/Escape/Backspace). Integrated into ProjectSelector to replace manual path input.","labels":["enhancement","ready","ui"]}
{"id":"markdown-themes-40i","title":"Show git diffs in left pane instead of replacing git graph","description":"## Overview\nWhen clicking a file in the git graph, open the diff in the left pane instead of replacing the git graph. This lets users see both simultaneously.\n\n## Current Behavior\n- Click file in git graph â†’ diff replaces git graph in right pane\n- Back button returns to git graph (but loses scroll position)\n\n## Desired Behavior\n- Click file in git graph â†’ diff opens in left pane as a tab\n- Git graph stays visible in right pane\n- Can compare multiple files by clicking different ones\n- Preserves git graph scroll position and expanded commits\n\n## Implementation Ideas\n1. Add a 'diff' tab type to the tab system\n2. Or open the actual file and scroll to changed lines\n3. Or add a dedicated diff viewer mode to the left pane\n\n## Complexity\nMedium - requires changes to tab system or left pane content types","notes":"## Retro\n- What worked: Clear task breakdown, straightforward extension of existing Tab interface\n- What was unclear: Nothing major, the existing code was well-structured","status":"closed","priority":3,"issue_type":"feature","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-04T15:46:39.094087999-05:00","created_by":"GGPrompts","updated_at":"2026-02-04T17:30:44.987552222-05:00","closed_at":"2026-02-04T17:30:44.987552222-05:00","close_reason":"Git diffs open in left pane tabs","dependencies":[{"issue_id":"markdown-themes-40i","depends_on_id":"markdown-themes-h96","type":"blocks","created_at":"2026-02-04T17:20:25.992921941-05:00","created_by":"daemon"}]}
{"id":"markdown-themes-43n","title":"Large conversation files freeze UI","description":"ConversationMarkdownViewer.tsx:115-118 - jsonlToMarkdown processes entire file synchronously in useMemo. 10MB+ files with thousands of messages block main thread.","design":"Options: 1) Virtualize message list with react-window, 2) Process JSONL in chunks with requestIdleCallback, 3) Use web worker for parsing","notes":"## prepared.prompt\n\n## Context\nLarge conversation files (10MB+) freeze the UI because jsonlToMarkdown processes synchronously.\n\n## Task\nImplement virtualized rendering or chunked processing for large conversation files.\n\n## Key Files\n- src/components/viewers/ConversationMarkdownViewer.tsx:115-118\n- src/utils/conversationMarkdown.ts (jsonlToMarkdown function)\n\n## Strategy Options\n1. Virtualization - Use react-window to only render visible messages\n2. Chunked parsing - Process JSONL in chunks with requestIdleCallback\n3. Web Worker - Move parsing to background thread\n4. Pagination - Load messages in pages with lazy loading\n\nRecommendation: Start with pagination (simplest), consider virtualization for best UX.\n\n## When Done\nbd close markdown-themes-43n --reason \"Implemented virtualization/chunking for large conversation files\"","status":"open","priority":1,"issue_type":"bug","created_at":"2026-02-05T11:41:11.509049917-05:00","updated_at":"2026-02-05T11:54:03.349057833-05:00","labels":["conversation-viewer","high-severity","performance","ready"],"dependencies":[{"issue_id":"markdown-themes-43n","depends_on_id":"markdown-themes-r0i","type":"blocks","created_at":"2026-02-05T11:51:27.882128956-05:00","created_by":"daemon"},{"issue_id":"markdown-themes-43n","depends_on_id":"markdown-themes-e30","type":"blocks","created_at":"2026-02-05T11:51:28.789811607-05:00","created_by":"daemon"},{"issue_id":"markdown-themes-43n","depends_on_id":"markdown-themes-atb","type":"blocks","created_at":"2026-02-05T11:51:29.62082769-05:00","created_by":"daemon"}]}
{"id":"markdown-themes-43w","title":"Markdown Themes MVP","description":"Core markdown viewer with theme switching and file watching","status":"closed","priority":1,"issue_type":"epic","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-02T18:43:46.638610885-05:00","created_by":"GGPrompts","updated_at":"2026-02-02T19:20:32.710384979-05:00","closed_at":"2026-02-02T19:20:32.710384979-05:00","close_reason":"MVP complete: themes, Shiki highlighting, folder mode, persistence, frontmatter, HTML export"}
{"id":"markdown-themes-46o","title":"Add resizable sidebar with drag handle","description":"The file tree sidebar has a fixed 250px width which causes deeply nested files/folders to get cut off. Add a drag handle to resize the sidebar width, similar to the split pane drag handle.","design":"## Current State\n- Sidebar fixed at 250px (`w-[250px] min-w-[250px]` in Sidebar.tsx)\n- Deep folder hierarchies get truncated\n\n## Implementation\n- Add vertical drag handle on right edge of sidebar\n- Store width in localStorage (useAppStore)\n- Set min-width (150px) and max-width (400px) constraints\n- Reuse drag handle styling from SplitView component\n- Cursor should change to `col-resize` on hover\n\n## Files to Modify\n- `src/components/Sidebar.tsx` - Add drag handle, accept width prop\n- `src/pages/Files.tsx` - Manage sidebar width state\n- `src/hooks/useAppStore.ts` - Persist sidebar width\n- `src/context/AppStoreContext.tsx` - Add sidebarWidth to state","acceptance_criteria":"- [ ] Drag handle visible on right edge of sidebar\n- [ ] Can drag to resize between 150-400px\n- [ ] Width persists across page refreshes\n- [ ] Works with all themes\n- [ ] Smooth drag experience (no jank)","notes":"## Retro\n- What worked: Reused drag handle pattern from SplitView.tsx successfully\n- What was unclear: Nothing significant - the existing patterns were clear","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-02-03T15:20:57.194703046-05:00","updated_at":"2026-02-03T15:27:10.009274749-05:00","closed_at":"2026-02-03T15:27:10.009274749-05:00","close_reason":"Implemented resizable sidebar with drag handle on right edge. Width constrained to 150-400px, persists to localStorage on drag end. Works with all themes.","labels":["enhancement","ready","ui"]}
{"id":"markdown-themes-49f","title":"Integrate SourceControl into Files split view","description":"## Overview\nReplace the standalone SourceControl page with a workspace-aware git status view that lives in the Files page split panel.\n\n## Current State\n- SourceControl is a separate page showing ALL repos in ~/projects\n- Header shows current workspace but SourceControl ignores it\n- Inconsistent UX - workspace selection doesn't affect what you see\n\n## Desired State\n- Git status view respects workspace selection:\n  - `~/projects/markdown-themes` â†’ shows just that repo's working tree\n  - `~/projects` â†’ shows all repos (multi-repo dashboard)\n  - `~` â†’ shows all repos under home\n- Lives in Files right pane (like GitGraph)\n- Click changed file â†’ opens in left pane\n- Remove SourceControl as separate page/nav item\n\n## Benefits\n- Consistent workspace-scoped UX\n- Fewer navigation points (Files becomes the hub)\n- Can view code and git status side-by-side","notes":"## Status: Partially Complete\n\nWorkingTree integration is already done:\n- Toggle button in toolbar (Ctrl+Shift+G)\n- WorkingTree renders in right pane\n- File clicks open in left pane\n\n## Remaining Work\nThis issue is essentially complete once `markdown-themes-4wo` (multi-repo view) is done. The integration is there - we just need multi-repo support for ~/projects workspaces.\n\n## When Done  \nbd close markdown-themes-49f --reason \"Integration complete with single + multi-repo support\"","status":"closed","priority":2,"issue_type":"feature","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-04T13:56:37.420294707-05:00","created_by":"GGPrompts","updated_at":"2026-02-04T15:33:08.182521379-05:00","closed_at":"2026-02-04T15:33:08.182521379-05:00","close_reason":"Integration complete - WorkingTree for single repos, MultiRepoView for directory workspaces, file clicks open in left pane","dependencies":[{"issue_id":"markdown-themes-49f","depends_on_id":"markdown-themes-4wo","type":"blocks","created_at":"2026-02-04T15:25:36.311952366-05:00","created_by":"GGPrompts"}]}
{"id":"markdown-themes-4wo","title":"Support multi-repo view when workspace is directory of repos","description":"## Task\nWhen workspace is a directory containing multiple repos (like ~/projects), show the multi-repo dashboard view instead of single WorkingTree.\n\n## Requirements\n- Detect if workspace contains multiple git repos vs is itself a repo\n- If multiple repos: show RepoCard list (current SourceControl behavior)\n- If single repo: show WorkingTree\n- Preserve bulk operations (fetch/pull/push all) for multi-repo view\n- Search/filter repos in multi-repo view\n\n## Detection Logic\n```ts\n// Check if workspace itself is a git repo\nconst isRepo = await checkIsGitRepo(workspacePath);\nif (isRepo) {\n  return \u003cWorkingTree repoPath={workspacePath} /\u003e;\n} else {\n  return \u003cMultiRepoView projectsDir={workspacePath} /\u003e;\n}\n```\n\n## Note\nThis makes the view workspace-aware - selecting ~/projects shows dashboard, selecting ~/projects/foo shows just foo's status.","notes":"## Retro\n- What worked: Extracting multi-repo logic from SourceControl into a reusable MultiRepoView component. The RepoCard already had most of the needed functionality, just needed to add onFileSelect prop.\n- What was unclear: Nothing - the task had very clear direction with specific files and implementation approach.","status":"closed","priority":2,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-04T13:57:02.330569152-05:00","created_by":"GGPrompts","updated_at":"2026-02-04T15:30:42.27551658-05:00","closed_at":"2026-02-04T15:30:42.27551658-05:00","close_reason":"Created MultiRepoView component and integrated with Files.tsx. When WorkingTree is toggled and workspace is not a git repo (no .git dir at root), shows multi-repo dashboard instead. Files clicked in repo cards open in left pane.","dependencies":[{"issue_id":"markdown-themes-4wo","depends_on_id":"markdown-themes-ajy","type":"blocks","created_at":"2026-02-04T13:57:15.92214524-05:00","created_by":"GGPrompts"}]}
{"id":"markdown-themes-57c","title":"Add audio endpoint to TabzChrome backend","description":"AudioViewer in markdown-themes uses /api/files/content?raw=true which doesn't exist. TabzChrome needs a /api/files/audio endpoint similar to /api/files/image and /api/files/video that returns audio files as base64 data URIs. See TabzChrome/backend/routes/files.js for the existing image/video implementations.","status":"closed","priority":3,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-03T18:55:45.601712496-05:00","created_by":"GGPrompts","updated_at":"2026-02-04T09:35:56.28781356-05:00","closed_at":"2026-02-03T23:23:06.870524807-05:00"}
{"id":"markdown-themes-5b2","title":"Scan home and project .prompts folders in Prompt Notebook","description":"The PromptLibrary should scan both ~/.prompts (global prompts) and the current project's .prompts folder (project-specific prompts). Display them in separate collapsible sections like TabzChrome does.","notes":"## Retro\n- What worked: Clear requirements with specific file changes and acceptance criteria\n- What was unclear: Nothing significant - implementation was straightforward","status":"closed","priority":1,"issue_type":"feature","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-03T12:38:14.162604212-05:00","created_by":"GGPrompts","updated_at":"2026-02-03T12:51:35.838594904-05:00","closed_at":"2026-02-03T12:51:35.838594904-05:00","close_reason":"Implemented multi-source prompt scanning with collapsible Global Prompts and Project Prompts sections. Search works across both sources, missing folders handled gracefully."}
{"id":"markdown-themes-5ky","title":"Enhance Claude filter to show conversation files","description":"Update the Claude filter in the sidebar to show Claude Code conversation JSONL files.\n\n## Current\nClaude filter shows .claude files\n\n## Enhancement\nAlso show *.jsonl files when path contains `.claude/projects/`\n\n## Benefit\nUsers can browse their Claude Code conversation history directly from the sidebar.","notes":"## prepared.prompt\n\n## Context\nUsers want to browse Claude Code conversation history from the sidebar. The Claude filter should show conversation JSONL files.\n\n## Task\nEnhance the Claude filter to show conversation files from ~/.claude/projects/.\n\n## Key Files\n- src/lib/filters.ts - Filter definitions\n- src/lib/filters.test.ts - Add tests\n\n## Implementation\n1. Update FILTERS.claude patterns to include:\n   - `**/.claude/projects/**/*.jsonl` (conversation logs)\n   - Keep existing `.claude/`, `CLAUDE.md`, `.mcp.json` patterns\n2. Add test cases for JSONL matching\n\n## Behavior\n- Claude filter shows conversation JSONL files alongside CLAUDE.md files\n- Users can browse past conversations from sidebar\n\n## When Done\nbd close markdown-themes-5ky --reason \"Claude filter now shows conversation JSONL files\"","status":"closed","priority":3,"issue_type":"task","created_at":"2026-02-04T23:16:27.580168212-05:00","updated_at":"2026-02-04T23:23:55.271396456-05:00","closed_at":"2026-02-04T23:23:55.271396456-05:00","close_reason":"Claude filter now shows conversation JSONL files","labels":["ready"]}
{"id":"markdown-themes-6vl","title":"Port Knolling theme","description":"Organized grid aesthetic.","notes":"## Retro\n- What worked: The HTML source had excellent CSS variable definitions that translated directly. The dark-academia.css provided a good structural template.\n- What was unclear: Nothing major - straightforward port.","status":"closed","priority":2,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-03T11:45:01.3843987-05:00","created_by":"GGPrompts","updated_at":"2026-02-03T11:59:27.229754551-05:00","closed_at":"2026-02-03T11:59:27.229754551-05:00","close_reason":"Ported Knolling theme with layered shadows, 8px grid pattern, sharp corners, and IBM Plex fonts","labels":["ready","theme"],"dependencies":[{"issue_id":"markdown-themes-6vl","depends_on_id":"markdown-themes-dsk","type":"blocks","created_at":"2026-02-03T11:45:01.386572284-05:00","created_by":"GGPrompts"},{"issue_id":"markdown-themes-6vl","depends_on_id":"markdown-themes-dsk","type":"parent-child","created_at":"2026-02-03T11:45:28.403728018-05:00","created_by":"GGPrompts"}]}
{"id":"markdown-themes-706","title":"Add .convlog routing to ViewerContainer","description":"Update ViewerContainer to route .convlog files to ConversationMarkdownViewer.\n\n## Changes\n1. Add 'convlog' to file type detection in getViewerType()\n2. Import and render ConversationMarkdownViewer for this type\n3. Pass filePath and content props\n\n## Alternative\nCould also detect JSONL files in ~/.claude/projects/ paths and auto-route those.","notes":"## prepared.prompt\n\n## Context\nConversationMarkdownViewer is ready. Now we need to route .convlog files to it.\n\n## Task\nUpdate ViewerContainer.tsx to route .convlog files to ConversationMarkdownViewer.\n\n## Key Files\n- src/components/ViewerContainer.tsx - Main target\n- src/components/viewers/ConversationMarkdownViewer.tsx - New viewer to import\n\n## Implementation\n1. Add 'convlog' to ViewerType union\n2. Add convlogExtensions set: `new Set(['convlog'])`\n3. In getViewerType(), add check for convlog extensions\n4. Import ConversationMarkdownViewer\n5. Add case in switch for 'convlog' type\n6. Pass content and filePath props\n\n## Also Consider\nRoute JSONL files from ~/.claude/projects/ paths as conversations too.\n\n## When Done\nbd close markdown-themes-706 --reason \"ViewerContainer routes .convlog files to ConversationMarkdownViewer\"","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-04T23:16:24.550671674-05:00","updated_at":"2026-02-04T23:26:53.913958372-05:00","closed_at":"2026-02-04T23:26:53.913958372-05:00","close_reason":"ViewerContainer routes .convlog files to ConversationMarkdownViewer","dependencies":[{"issue_id":"markdown-themes-706","depends_on_id":"markdown-themes-dxh","type":"blocks","created_at":"2026-02-04T23:19:35.225565568-05:00","created_by":"daemon"}]}
{"id":"markdown-themes-73v","title":"Noir theme: fix contrast in PromptNotebook headers and fields","description":"The Noir theme red-on-red contrast issue was fixed in PromptLibrary sidebar, but the same problem exists in the PromptNotebook component.\n\n## Problem\n- Prompt headers use accent color (blood red) that's hard to read\n- Fillable `{{variable}}` fields use accent color styling with poor contrast\n\n## Affected Areas\n- `src/components/PromptNotebook.tsx` - main prompt renderer\n- `src/components/InlineField.tsx` - the editable {{variable}} fields\n\n## Fix Approach\nApply same CSS variable pattern used in Sidebar.tsx and PromptLibrary.tsx:\n- Use `var(--selection-bg, ...)` for backgrounds\n- Use `var(--selection-text, ...)` for text colors\n- Or add new Noir-specific CSS variables for prompty styling\n\n## Related\n- Fixed in PromptLibrary.tsx (markdown-themes-qff) - use as reference\n- Noir theme defines `--selection-text` and `--selection-bg` in noir.css","notes":"## prepared.prompt\n\n## Context\nThe Noir theme uses blood red (#8b0000) as accent which has poor contrast. We fixed this in PromptLibrary.tsx using --selection-text and --selection-bg CSS variables. The same fix is needed in PromptNotebook and InlineField.\n\n## Task\nApply the CSS variable pattern to PromptNotebook.tsx and InlineField.tsx for better Noir theme contrast.\n\n## Key Files\n- src/components/PromptNotebook.tsx - headers and metadata tags (lines 392, 410, 447)\n- src/components/InlineField.tsx - fillable fields (lines 212-216, 250-253, 327-328, 362-365, 380)\n- src/components/PromptLibrary.tsx - reference with working fix (lines 288-309)\n\n## What to Change\nReplace hardcoded `var(--accent)` with fallback pattern:\n- Text: `var(--selection-text, var(--accent))`\n- Background: `var(--selection-bg, color-mix(in srgb, var(--accent) X%, transparent))`\n\nNoir theme already defines --selection-text and --selection-bg in noir.css.\n\n## When Done\nRun `npm run test:run` then: bd close markdown-themes-73v --reason \"Applied selection CSS variables to PromptNotebook and InlineField\"","status":"closed","priority":2,"issue_type":"bug","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-04T11:50:57.27729067-05:00","created_by":"GGPrompts","updated_at":"2026-02-04T12:26:55.119778888-05:00","closed_at":"2026-02-04T12:26:55.119778888-05:00","close_reason":"Applied --selection-text and --selection-bg CSS variable fallbacks to PromptNotebook.tsx (header name, frontmatter background, metadata tags) and InlineField.tsx (select triggers, dropdown options, text inputs, file picker buttons) for better Noir theme contrast","labels":["ready"]}
{"id":"markdown-themes-79u","title":"Upgrade Glassmorphism theme","description":"Deep upgrade the Glassmorphism theme to match ~/projects/htmlstyleguides/styles/glassmorphism.html\n\n## Current State\n- File: src/themes/glassmorphism.css (2.2KB)\n- Has backdrop-filter but may be missing gradient depth\n\n## Fixes Needed\n1. **Load web fonts** - Modern clean fonts from HTML styleguide\n2. **Frosted glass layers** - backdrop-filter: blur(), rgba backgrounds\n3. **Gradient backgrounds** - Study the gradient mesh/aurora effects\n4. **Border glow** - Subtle border with rgba white glow\n5. **Shiki theme** - Soft muted code colors that work on glass\n6. **Prose typography** - Clean, modern, good contrast on blur\n\n## Reference\n- HTML: ~/projects/htmlstyleguides/styles/glassmorphism.html","notes":"## prepared.prompt\n\nUpgrade the Glassmorphism theme to match the HTML styleguide at ~/projects/htmlstyleguides/styles/glassmorphism.html\n\n**Context:** The current theme has backdrop-filter but lacks the aurora gradient backgrounds and proper glass layering.\n\n**Key files:**\n- src/themes/glassmorphism.css - upgrade this file\n- src/index.css - ensure fonts are imported (Inter)\n- Reference: ~/projects/htmlstyleguides/styles/glassmorphism.html\n\n**CSS Patterns to Implement:**\n\n1. **Fonts:**\n   - Primary: Inter (300-700 weights)\n\n2. **Color Palette:**\n   - Background gradient: #0f0c29 â†’ #302b63 â†’ #24243e (135deg)\n   - Accent gradient: #667eea â†’ #764ba2\n   - Pink accent: #f093fb\n   - Blue accent: #667eea\n   - Purple accent: #764ba2\n   - Glass base: rgba(255, 255, 255, 0.08)\n   - Glass hover: rgba(255, 255, 255, 0.12)\n   - Glass border: rgba(255, 255, 255, 0.18)\n\n3. **Floating Orbs (Background):**\n   - Orb 1: rgba(102, 126, 234, 0.6) with 80px blur\n   - Orb 2: rgba(240, 147, 251, 0.5) with 80px blur\n   - Orb 3: rgba(118, 75, 162, 0.4) with 80px blur\n   - Animate with float keyframes (20s ease-in-out)\n\n4. **Blur Values:**\n   - Glass blur: backdrop-filter: blur(20px)\n   - Orbs blur: filter: blur(80px)\n\n5. **Borders \u0026 Shadows:**\n   - Glass border: 1px solid rgba(255, 255, 255, 0.18)\n   - Glass shadow: 0 8px 32px rgba(0, 0, 0, 0.3)\n   - Focus glow: 0 0 0 3px rgba(102, 126, 234, 0.2)\n\n6. **Typography:**\n   - Display: 48px, 700 weight, -1px letter-spacing\n   - Body: 16px, 400 weight\n   - Border-radius: 8px (sm), 16px (md), 24px (lg)\n\n7. **Shiki Theme:** github-dark-dimmed (soft muted colors)\n\n**Acceptance:**\n- [ ] Frosted glass effect on content areas\n- [ ] Aurora gradient background with floating orbs\n- [ ] Proper depth with layered translucency\n- [ ] Modern, clean typography\n\nWhen done, commit and run `bd close markdown-themes-79u`.","status":"closed","priority":2,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-02T23:49:01.04576151-05:00","created_by":"GGPrompts","updated_at":"2026-02-03T00:06:32.868652401-05:00","closed_at":"2026-02-03T00:06:32.868652401-05:00","close_reason":"Upgraded glassmorphism.css with aurora gradient background (#0f0c29 -\u003e #302b63 -\u003e #24243e), 3 floating orbs with 80px blur and 20s float animation, glass layering on content areas with 20px backdrop-filter blur, proper color palette (accents #667eea, #764ba2, #f093fb), Inter font, and github-dark-dimmed Shiki theme. All acceptance criteria met.","labels":["theme"],"dependencies":[{"issue_id":"markdown-themes-79u","depends_on_id":"markdown-themes-7m8","type":"blocks","created_at":"2026-02-02T23:50:48.664904041-05:00","created_by":"GGPrompts"},{"issue_id":"markdown-themes-79u","depends_on_id":"markdown-themes-iz9","type":"blocks","created_at":"2026-02-02T23:50:54.464765478-05:00","created_by":"GGPrompts"}]}
{"id":"markdown-themes-7m8","title":"Set up Shiki syntax highlighting integration","description":"Configure Streamdown to use Shiki for syntax highlighting with theme-aware color schemes.\n\n## Current State\n- Streamdown renders code blocks as plain \u003cpre\u003e\u003ccode\u003e\n- No syntax highlighting currently\n- All code blocks look the same grey regardless of theme\n\n## Implementation\n1. Install @streamdown/code plugin (Shiki integration for Streamdown)\n2. Configure Shiki with multiple themes that can switch based on markdown-theme\n3. Create mapping: theme name -\u003e Shiki theme\n   - dark-academia -\u003e rose-pine or monokai-pro\n   - cyberpunk -\u003e synthwave-84 or tokyo-night\n   - nordic -\u003e nord or github-light\n   - etc.\n4. Update MarkdownViewer.tsx to use the Shiki plugin\n5. Pass current theme to Shiki for color matching\n\n## Reference\n- Streamdown docs: https://github.com/vercel/ai/tree/main/packages/streamdown\n- Shiki themes: https://shiki.style/themes\n\n## Acceptance\n- Code blocks have syntax highlighting\n- Colors match the current theme aesthetic","notes":"## Retro\n- What worked: Streamdown already has @streamdown/code plugin installed; context7 docs made integration straightforward\n- What was unclear: Initially forgot to type-check Shiki theme names as BundledTheme","status":"closed","priority":1,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-02T23:49:40.879486412-05:00","created_by":"GGPrompts","updated_at":"2026-02-03T00:02:17.493920224-05:00","closed_at":"2026-02-03T00:02:17.493920224-05:00","close_reason":"Integrated @streamdown/code Shiki plugin with theme-specific color schemes. Each app theme now maps to a matching Shiki syntax theme (e.g., rose-pine for dark-academia, synthwave-84 for cyberpunk, nord for nordic). Code blocks now have proper syntax highlighting that complements each theme aesthetic.","labels":["infrastructure"]}
{"id":"markdown-themes-7uc","title":"Race condition in useTabManager openTab","description":"useTabManager.ts:106,160 - tabsRef.current read twice with potential staleness between reads. If another tab operation occurs between reads, state can become inconsistent.","design":"Read tabsRef.current once at start of function and use that snapshot throughout","notes":"## prepared.prompt\n\n## Context\nReading tabsRef.current twice can cause state inconsistency if another operation occurs between reads.\n\n## Task\nFix race condition in openTab by reading tabsRef.current once at start and using that snapshot.\n\n## Key Files\n- src/hooks/useTabManager.ts:106,160\n\n## Pattern\n```typescript\nconst openTab = useCallback((path, options) =\u003e {\n  const currentTabs = tabsRef.current; // Read once\n  // Use currentTabs throughout instead of tabsRef.current\n}, []);\n```\n\n## When Done\nbd close markdown-themes-7uc --reason \"Fixed race condition in useTabManager.openTab\"","status":"open","priority":2,"issue_type":"bug","created_at":"2026-02-05T11:41:13.130375809-05:00","updated_at":"2026-02-05T11:53:44.671955931-05:00","labels":["race-condition","ready","state-management"]}
{"id":"markdown-themes-7v1","title":"[Gate] Test Files section","description":"Run tests for tab management, file viewers, split view, Claude Code filter.","status":"closed","priority":1,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-03T11:48:22.87022057-05:00","created_by":"GGPrompts","updated_at":"2026-02-03T12:24:01.668013367-05:00","closed_at":"2026-02-03T12:24:01.668013367-05:00","close_reason":"Files section complete with all features","labels":["gate:test-runner"],"dependencies":[{"issue_id":"markdown-themes-7v1","depends_on_id":"markdown-themes-wpi","type":"parent-child","created_at":"2026-02-03T11:48:43.363887582-05:00","created_by":"GGPrompts"},{"issue_id":"markdown-themes-7v1","depends_on_id":"markdown-themes-ic9","type":"blocks","created_at":"2026-02-03T11:48:44.138524327-05:00","created_by":"GGPrompts"}]}
{"id":"markdown-themes-819","title":"Create DiffViewer component","description":"Build a diff viewer that shows file changes between commits. Support unified and side-by-side modes. Integrate with Shiki for syntax highlighting.","notes":"## Retro\n- What worked: Following existing viewer patterns (CodeViewer, JsonViewer) made implementation straightforward. The CSS variables theme system made styling simple.\n- What was unclear: Initially unsure if DiffViewer should be added to ViewerContainer for .diff file support, but clarified it is for git diff display in SourceControl page.","status":"closed","priority":2,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-04T09:36:09.648957429-05:00","created_by":"GGPrompts","updated_at":"2026-02-04T09:54:09.992525577-05:00","closed_at":"2026-02-04T09:54:09.992525577-05:00","close_reason":"Completed","labels":["git","ui"],"dependencies":[{"issue_id":"markdown-themes-819","depends_on_id":"markdown-themes-yd3","type":"blocks","created_at":"2026-02-04T09:36:31.894559763-05:00","created_by":"GGPrompts"}]}
{"id":"markdown-themes-842","title":"Upgrade Retro Futurism theme","description":"Deep upgrade the Retro Futurism theme to match similar HTML styleguides\n\n## Current State\n- File: src/themes/retro-futurism.css (2.1KB)\n- Has pastel gradients but missing atomic age curves and depth\n\n## Fixes Needed\n1. **Load web fonts** - 1950s/60s inspired fonts\n2. **Atomic age shapes** - Study curves, starbursts, boomerang motifs\n3. **Pastel gradients** - Soft warm gradients, not harsh\n4. **Rounded radius** - Generous border-radius for that space-age feel\n5. **Shiki theme** - Warm retro colors for code\n6. **Prose typography** - Optimistic, spacious, mid-century feel\n\n## Reference\n- HTML: ~/projects/htmlstyleguides/styles/frutiger-aero.html\n- HTML: ~/projects/htmlstyleguides/styles/midcentury.html","notes":"## Retro\n- What worked: Reference HTML styleguides for Frutiger Aero and Mid-Century Modern provided excellent patterns to adapt\n- The glossy overlay pattern (50% white fading) is key to the Aero look\n- Atomic starburst clip-path creates authentic mid-century feel\n- What was unclear: Nothing major - the acceptance criteria were well-defined","status":"closed","priority":2,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-02T23:49:06.970929975-05:00","created_by":"GGPrompts","updated_at":"2026-02-03T00:07:54.755585204-05:00","closed_at":"2026-02-03T00:07:54.755585204-05:00","close_reason":"Upgraded Retro Futurism theme with Frutiger Aero + Mid-Century Modern aesthetics: glossy button overlays, atomic starburst decorations, warm pastel colors (sky blue, grass green, burnt orange, brass), glass panel effects with backdrop blur, floating cloud animation, and proper font imports (Archivo Black, Source Sans Pro, Josefin Sans).","labels":["theme"],"dependencies":[{"issue_id":"markdown-themes-842","depends_on_id":"markdown-themes-7m8","type":"blocks","created_at":"2026-02-02T23:51:00.217387416-05:00","created_by":"GGPrompts"},{"issue_id":"markdown-themes-842","depends_on_id":"markdown-themes-iz9","type":"blocks","created_at":"2026-02-02T23:51:05.962531041-05:00","created_by":"GGPrompts"}]}
{"id":"markdown-themes-8mo","title":"Add batch operations","description":"Fetch all, push all, pull all across repos. Better button sizing and layout than TabzChrome.","notes":"## prepared.prompt\n\nAdd batch git operations for managing multiple repos at once. This enables Fetch All, Pull All, and Push All functionality.\n\n**What to build:**\n\n1. Create `src/components/git/BulkActionsBar.tsx`:\n   - Large, clear buttons for Fetch All, Pull All, Push All\n   - Min-width of 100px per button, larger icons (w-5 h-5)\n   - Progress indicator showing X/Y repos processed\n   - Disabled state while operations in progress\n\n2. Create `src/hooks/useBulkGitOperations.ts`:\n   - Port from TabzChrome's implementation\n   - Process repos in chunks (3 concurrent max)\n   - Track progress: `{ completed: number, total: number, current: string }`\n   - Return `{ fetchAll, pullAll, pushAll, progress, isRunning }`\n\n3. Integrate with SourceControl section:\n   - Add BulkActionsBar at top of section\n   - Show progress overlay during bulk operations\n   - Refresh all repos after bulk operation completes\n\n**Reference files from TabzChrome:**\n- `/home/marci/projects/TabzChrome/extension/dashboard/hooks/useBulkGitOperations.ts`\n- `/home/marci/projects/TabzChrome/extension/dashboard/sections/Git.tsx` (bulk action integration)\n\n**Button styling:**\n```tsx\n\u003cButton \n  variant=\"outline\" \n  size=\"lg\"\n  className=\"min-w-[100px] h-10 gap-2\"\n\u003e\n  \u003cRefreshCw className=\"w-5 h-5\" /\u003e\n  Fetch All\n\u003c/Button\u003e\n```\n\n**Progress indicator:**\n- Show \"Fetching 3/12 repos...\" style text\n- Optional: progress bar below buttons\n- Clear visual feedback that something is happening\n\n**Acceptance criteria:**\n- [ ] BulkActionsBar renders with 3 action buttons\n- [ ] Fetch All fetches all repos with progress\n- [ ] Pull All pulls all repos with progress  \n- [ ] Push All pushes all repos with progress\n- [ ] Buttons disabled during operations\n- [ ] Progress shows current/total count\n- [ ] Repos refresh after bulk operation completes\n\nWhen done, commit changes and run `bd close markdown-themes-8mo`.","status":"closed","priority":1,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-03T11:44:57.191481301-05:00","created_by":"GGPrompts","updated_at":"2026-02-03T12:19:23.155113075-05:00","closed_at":"2026-02-03T12:19:23.155113075-05:00","close_reason":"Added BulkActionsBar with Fetch/Pull/Push All, progress tracking, concurrent processing","labels":["frontend","ready"],"dependencies":[{"issue_id":"markdown-themes-8mo","depends_on_id":"markdown-themes-baw","type":"blocks","created_at":"2026-02-03T11:44:57.194338157-05:00","created_by":"GGPrompts"},{"issue_id":"markdown-themes-8mo","depends_on_id":"markdown-themes-baw","type":"parent-child","created_at":"2026-02-03T11:45:26.662942895-05:00","created_by":"GGPrompts"}]}
{"id":"markdown-themes-8mz","title":"Fix z-index: file tree header covers open file dropdown","description":"The file tree header has a higher z-index than the open file dropdown, causing the first dropdown option to be hidden behind the header. Lower the tree header z-index or raise the dropdown z-index.","notes":"## prepared.prompt\n\nFix z-index layering issue where the file tree header covers the open file dropdown.\n\n**Problem:** First option in the open file dropdown is hidden behind the file tree header.\n\n**Files to check:**\n- `src/components/Sidebar.tsx` - tree header z-index\n- `src/components/Toolbar.tsx` - dropdown z-index\n- `src/index.css` - any global z-index values\n\n**Fix:** Ensure dropdown z-index \u003e sidebar header z-index. Typical pattern:\n- Dropdowns/modals: z-50 or higher\n- Sticky headers: z-10 or z-20\n\n**Acceptance criteria:**\n- [ ] Open file dropdown fully visible\n- [ ] No overlap with sidebar header\n- [ ] Other dropdowns still work correctly\n\nWhen done, commit and run `bd close \u003cid\u003e`.","status":"closed","priority":1,"issue_type":"bug","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-03T14:16:53.265630707-05:00","created_by":"GGPrompts","updated_at":"2026-02-03T14:29:00.62601049-05:00","closed_at":"2026-02-03T14:29:00.62601049-05:00","close_reason":"Fixed z-index layering issue by reducing sidebar header z-index from z-20 to z-10, allowing toolbar dropdowns (z-100) to render above it.","labels":["frontend","ready","ux"]}
{"id":"markdown-themes-8px","title":"Unsafe WebSocket message cast in useSubagentWatcher","description":"useSubagentWatcher.ts:124 - as SubagentMessage cast without validation. Malformed server responses could cause runtime errors.","design":"Add type guard function similar to useFileWatcher fix","notes":"## prepared.prompt\n\n## Context\nMultiple issues in useSubagentWatcher: unsafe cast, missing error logging, stale closure.\n\n## Task\nFix all three issues together:\n1. Add type guard for SubagentMessage (line 124)\n2. Add console.error to WebSocket onerror (lines 210-229)\n3. Fix stale enabled closure using enabledRef pattern (lines 203, 224)\n\n## Key Files\n- src/hooks/useSubagentWatcher.ts\n\n## Pattern for closure fix\n```typescript\nconst enabledRef = useRef(enabled);\nuseEffect(() =\u003e { enabledRef.current = enabled; }, [enabled]);\n// Then use enabledRef.current in reconnect timeout\n```\n\n## Related\nAlso fixes markdown-themes-gj7 and markdown-themes-1n6\n\n## When Done\nbd close markdown-themes-8px markdown-themes-gj7 markdown-themes-1n6 --reason \"Added type guard, error logging, and fixed closure in useSubagentWatcher\"","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-05T11:41:41.120317287-05:00","updated_at":"2026-02-05T11:53:32.495923234-05:00","labels":["ready","type-safety","websocket"]}
{"id":"markdown-themes-8tp","title":"Add home-watch WebSocket endpoint to TabzChrome","description":"TabzChrome backend needs to support watching paths outside the workspace (like ~/.claude/projects).\n\n## Current\nworkspace-watch only watches the current workspace directory\n\n## Needed\n- New message type: home-watch / home-unwatch\n- Watches a path relative to home directory\n- Broadcasts home-file-change with path and isStreaming flag\n\n## Implementation\nIn TabzChrome backend, handle home-watch message and use chokidar to watch the path.","status":"closed","priority":1,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-04T23:34:40.706368254-05:00","created_by":"GGPrompts","updated_at":"2026-02-04T23:39:39.588172823-05:00","closed_at":"2026-02-04T23:39:39.588172823-05:00","close_reason":"Not needed - can use CLAUDE_CODE_SESSION_ID env var instead of file watching"}
{"id":"markdown-themes-97j","title":"Select conversation tab when clicking View Conversation button","description":"Clicking the View Conversation button opens the tab but does not activate/select it.\n\n## Expected\nButton click should open AND select the conversation tab.\n\n## Key Files\n- src/pages/Files.tsx - handleViewConversation callback\n- src/hooks/useTabManager.ts - openTab should have option to activate","notes":"## prepared.prompt\n\n## Context\nClicking View Conversation opens a tab but doesnt activate it - user has to click the tab to see it.\n\n## Task\nFix: Ensure openTab activates the conversation tab when clicked.\n\n## Key Files\n- src/pages/Files.tsx (lines 524-529) - handleViewConversation calls openTab\n- src/hooks/useTabManager.ts (lines 83-172) - openTab function\n\n## Bug Analysis\nThe `openTab(path, false)` call should activate the tab via `setActiveTabId(newTab.id)` at line 168.\nIssue may be timing/race condition or the setActiveTabId inside setTabs callback.\n\n## Fix Options\n1. Call setActiveTabId separately after openTab returns\n2. Ensure openTab returns the new tab ID and explicitly activate\n3. Check if tab already exists and just activate it\n\n## When Done\nbd close markdown-themes-97j --reason \"Conversation tab now activates on click\"","status":"closed","priority":2,"issue_type":"bug","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-05T00:42:40.562140722-05:00","created_by":"GGPrompts","updated_at":"2026-02-05T00:57:31.751986672-05:00","closed_at":"2026-02-05T00:57:31.751986672-05:00","close_reason":"Fixed by moving setActiveTabId calls outside of setTabs callbacks in openTab function. The React state batching issue was causing the tab to be added but not activated.","labels":["ready"],"dependencies":[{"issue_id":"markdown-themes-97j","depends_on_id":"markdown-themes-hwx","type":"blocks","created_at":"2026-02-05T00:48:01.131326927-05:00","created_by":"GGPrompts"}]}
{"id":"markdown-themes-98q","title":"Implement Copy Path and Copy @Path actions","description":"Add clipboard actions to context menu:\n- Copy Path: copies absolute path\n- Copy @Path: copies path with @ prefix for Claude/AI references\n\nUse navigator.clipboard.writeText()","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-03T22:52:29.001188619-05:00","created_by":"matt","updated_at":"2026-02-03T23:07:45.823573832-05:00","closed_at":"2026-02-03T23:07:45.823573832-05:00","close_reason":"Implemented in FileContextMenu.tsx - Copy Path and Copy @Path actions","dependencies":[{"issue_id":"markdown-themes-98q","depends_on_id":"markdown-themes-eq5","type":"blocks","created_at":"2026-02-03T22:52:37.368220891-05:00","created_by":"matt"}]}
{"id":"markdown-themes-9vw","title":"Create useCurrentConversation hook","description":"Hook that opens the current Claude session conversation file using environment variables.\n\n## Approach\nNo file watching needed\\! Use CLAUDE_CODE_SESSION_ID env var to construct exact path.\n\n## Path Construction\n1. Get session ID from $CLAUDE_CODE_SESSION_ID\n2. Get working dir, replace / with - (e.g., /home/marci/projects/foo -\u003e -home-marci-projects-foo)\n3. Path: ~/.claude/projects/{encoded-cwd}/{session-id}.jsonl\n\n## Interface\nuseCurrentConversation() returns:\n- conversationPath: string | null (null if not in Claude session)\n- isAvailable: boolean\n\n## How to get env vars\n- Hook sends session ID to app via WebSocket or URL param\n- Or: TabzChrome API endpoint that reads env vars\n\n## Key Files\n- src/hooks/useFileWatcher.ts - Already handles file watching once we have the path","status":"closed","priority":1,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-04T23:34:42.952502979-05:00","created_by":"GGPrompts","updated_at":"2026-02-05T00:07:11.452219202-05:00","closed_at":"2026-02-05T00:07:11.452219202-05:00","close_reason":"useCurrentConversation hook created","dependencies":[{"issue_id":"markdown-themes-9vw","depends_on_id":"markdown-themes-8tp","type":"blocks","created_at":"2026-02-04T23:34:49.224840292-05:00","created_by":"GGPrompts"},{"issue_id":"markdown-themes-9vw","depends_on_id":"markdown-themes-ng7","type":"blocks","created_at":"2026-02-04T23:40:10.269222893-05:00","created_by":"GGPrompts"}]}
{"id":"markdown-themes-9zo","title":"WebSocket queueToChat can hang forever","description":"api.ts:221-234 - queueToChat promise never resolves/rejects if WebSocket closes before onopen fires. Missing ws.onclose handler to reject promise on connection failure.","design":"Add ws.onclose handler that rejects promise if connection closes unexpectedly","notes":"## prepared.prompt\n\n## Context\nWebSocket connections can fail silently, leaving promises hanging forever.\n\n## Task\nFix queueToChat in api.ts to handle WebSocket close events. Add ws.onclose handler that rejects the promise if connection closes unexpectedly before onopen fires.\n\n## Key Files\n- src/lib/api.ts:221-234\n\n## Pattern\n```typescript\nws.onclose = (event) =\u003e {\n  if (!event.wasClean) {\n    reject(new Error(`WebSocket closed unexpectedly: ${event.code}`));\n  }\n};\n```\n\n## Related\nAlso fix pasteToTerminal (lines 240-253) with same pattern - see issue markdown-themes-gd5\n\n## When Done\nbd close markdown-themes-9zo markdown-themes-gd5 --reason \"Added onclose handlers to WebSocket functions\"","status":"open","priority":1,"issue_type":"bug","created_at":"2026-02-05T11:41:06.989387008-05:00","updated_at":"2026-02-05T11:53:13.06539092-05:00","labels":["api","high-severity","ready","websocket"]}
{"id":"markdown-themes-a29","title":"Fix mermaid chart sizing in conversation viewer","description":"Mermaid charts render but are squished vertically in conversation viewer. Need min-height or proper container sizing for .mermaid elements in conversation context. Height is off, not width.","notes":"## prepared.prompt\n\n## Context\nMermaid diagrams in ConversationMarkdownViewer render with squished height. The width is fine but vertical sizing is broken.\n\n## Task\nFix mermaid chart vertical sizing in conversation viewer by adding min-height or proper container styling for `.mermaid` elements.\n\n## Key Files\n- src/components/viewers/ConversationMarkdownViewer.tsx\n- src/index.css (prose/mermaid styles around line 102)\n- src/components/MarkdownViewer.tsx (mermaid plugin config)\n\n## Approach\n1. Check if `.conversation-viewer .mermaid` needs specific height rules\n2. Add min-height or aspect-ratio to mermaid containers\n3. Test with flowchart, sequence diagram, and pie chart\n\n## When Done\nClose issue: bd close markdown-themes-a29 --reason \"Added min-height styling for mermaid in conversation viewer\"","status":"closed","priority":1,"issue_type":"bug","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-05T01:27:01.97557472-05:00","created_by":"GGPrompts","updated_at":"2026-02-05T09:45:40.45574004-05:00","closed_at":"2026-02-05T09:45:40.45574004-05:00","close_reason":"Added CSS rules for mermaid diagram vertical sizing in index.css. Added min-height constraints for .mermaid containers (200px general, 250px for conversation-viewer) and their SVGs (150-200px min-height with height: auto). This ensures mermaid diagrams expand to their natural height instead of being squished.","labels":["ready"]}
{"id":"markdown-themes-agx","title":"View subagent conversations via session hooks","description":"Use new subagent start hooks + session IDs to show subagent work in real-time instead of black box.\n\n## How It Works\n1. Hook fires on subagent start â†’ get session ID + working dir\n2. Find conversation file â†’ ~/.claude/projects/{project}/conversations/{sessionId}.jsonl\n3. Auto-open in right pane â†’ watch subagent think in real-time\n4. Multiple tabs â†’ see parallel agents working simultaneously\n\n## UI\n- 'Subagents' section or indicator in toolbar\n- Live tabs for each running agent\n- Click to watch thinking blocks, tool calls, everything\n\n## Benefits\n- Debug complex multi-agent workflows\n- See exactly where things go wrong\n- Understand what agents are doing instead of waiting","notes":"## Retro\n- What worked: Followed existing patterns in codebase (useWorkspaceStreaming, useTabManager) to create similar hook for subagents\n- What was unclear: Exact WebSocket message format from TabzChrome for subagent events - assumed reasonable structure based on existing patterns","status":"closed","priority":2,"issue_type":"feature","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-05T01:25:09.038455964-05:00","created_by":"GGPrompts","updated_at":"2026-02-05T09:57:01.646873083-05:00","closed_at":"2026-02-05T09:57:01.646873083-05:00","close_reason":"Implemented subagent conversation viewing: added useSubagentWatcher hook, extended Tab types for conversation tabs, integrated into Files page with auto-open on subagent start, added Users icon for conversation tabs, and active subagent count badge in toolbar","labels":["ready"],"dependencies":[{"issue_id":"markdown-themes-agx","depends_on_id":"markdown-themes-a29","type":"blocks","created_at":"2026-02-05T09:41:56.094702982-05:00","created_by":"GGPrompts"}]}
{"id":"markdown-themes-ajn","title":"Archive can overwrite same-second archives","description":"api.ts:421-436 - Archive filename timestamp only includes seconds. Archiving same conversation twice in one second overwrites first without warning.","design":"Add milliseconds to timestamp, or check existence and prompt for overwrite/rename","notes":"## prepared.prompt\n\n## Context\nArchiving same file twice within one second silently overwrites the first archive.\n\n## Task\nAdd milliseconds to archive filename timestamp in archiveConversation function.\n\n## Key Files\n- src/lib/api.ts:421-436\n\n## Pattern\nChange timestamp format from YYYY-MM-DDTHH-MM-SS to YYYY-MM-DDTHH-MM-SS-mmm\n\n## When Done\nbd close markdown-themes-ajn --reason \"Added milliseconds to archive timestamp\"","status":"open","priority":2,"issue_type":"bug","created_at":"2026-02-05T11:41:32.268303589-05:00","updated_at":"2026-02-05T11:53:18.403275629-05:00","labels":["archive","data-loss-risk","ready"]}
{"id":"markdown-themes-ajy","title":"Add WorkingTree toggle to Files toolbar","description":"## Task\nAdd a toolbar button in Files page to show WorkingTree in the right pane.\n\n## Requirements\n- Add git status icon button next to GitGraph button in toolbar\n- Clicking opens WorkingTree in right pane (like GitGraph does)\n- Keyboard shortcut: Ctrl+Shift+G (or similar, don't conflict with Ctrl+G for GitGraph)\n- Track right pane content type: 'file' | 'git-graph' | 'working-tree'\n- Clicking a file in WorkingTree opens it in left pane\n\n## Implementation\n- Update `rightPaneContent` state to support 'working-tree' type\n- Pass workspace path to WorkingTree component\n- Wire up file selection to open files in main viewer","status":"closed","priority":2,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-04T13:56:53.822469811-05:00","created_by":"GGPrompts","updated_at":"2026-02-04T14:10:26.582677625-05:00","closed_at":"2026-02-04T14:10:26.582677625-05:00","close_reason":"Closed","dependencies":[{"issue_id":"markdown-themes-ajy","depends_on_id":"markdown-themes-de1","type":"blocks","created_at":"2026-02-04T13:57:15.862000926-05:00","created_by":"GGPrompts"}]}
{"id":"markdown-themes-alw","title":"Create GitGraph component with canvas + DOM rendering","description":"Build GitGraph.tsx with canvas layer for rails/curves and DOM layer for commit nodes. Include virtual scrolling for performance with large repos.","notes":"## Retro\n- What worked: Clean separation of canvas rendering (lines) from DOM rendering (nodes, rows). Using CSS variables for rail colors allows theme compatibility. The graphLayout algorithm from the backend was already well-structured.\n- What was unclear: Initially had extra props in GitGraphRow that were not needed. The exact integration point in Files.tsx was clear from the existing placeholder code.","status":"closed","priority":2,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-04T09:36:07.842907409-05:00","created_by":"GGPrompts","updated_at":"2026-02-04T10:05:33.049033088-05:00","closed_at":"2026-02-04T10:05:33.049033088-05:00","close_reason":"Completed","labels":["canvas","git","ui"],"dependencies":[{"issue_id":"markdown-themes-alw","depends_on_id":"markdown-themes-td9","type":"blocks","created_at":"2026-02-04T09:36:30.568925499-05:00","created_by":"GGPrompts"},{"issue_id":"markdown-themes-alw","depends_on_id":"markdown-themes-x8w","type":"blocks","created_at":"2026-02-04T09:36:31.223773947-05:00","created_by":"GGPrompts"}]}
{"id":"markdown-themes-an3","title":"Add gitlogue replay button to git graph commits","description":"Add a button to each commit row that spawns gitlogue in a terminal to replay that commit.\n\nUse TabzChrome spawn API: POST /api/spawn with command like `gitlogue \u003chash\u003e`\n\nReference: SourceControl page already has this working - check how it launches gitlogue there.","status":"closed","priority":2,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-04T10:14:29.480035044-05:00","created_by":"GGPrompts","updated_at":"2026-02-04T10:21:36.326229711-05:00","closed_at":"2026-02-04T10:21:36.326229711-05:00","close_reason":"Merged into markdown-themes-nmq","labels":["git","tabzchrome","ui"]}
{"id":"markdown-themes-aok","title":"Fix auto-scroll with Follow AI Edits mode","description":"When auto-scroll is enabled for Follow AI Edits mode (not just streaming), it causes:\n1. WebSocket file-watcher to repeatedly subscribe/resubscribe\n2. Files randomly closing and returning to Recent Files screen\n3. Possible path comparison issues between streamingFile and currentFile\n\nRoot cause investigation needed:\n- Check if useCallback dependencies are causing effect re-runs\n- Check path format consistency between workspace-file-change messages and tab paths\n- May need to debounce or dedupe the Follow AI Edits effect\n\nCurrent workaround: Auto-scroll only enabled during actual streaming (rapid file changes \u003c 1.5s)","notes":"## prepared.prompt\n\n## Context\nAuto-scroll with Follow AI Edits causes WebSocket resubscription loops and files randomly closing. This may be resolved by markdown-themes-h96 (right pane approach) - evaluate first.\n\n## Task\nAfter h96 is implemented, test if the auto-scroll bug still occurs. If yes, fix path normalization issues.\n\n## Key Files\n- src/pages/Files.tsx (line 288 - path comparison)\n- src/hooks/useFileWatcher.ts (lines 261-297 - subscription effect)\n- src/hooks/useWorkspaceStreaming.ts (path handling)\n- src/lib/api.ts (no path normalization utility)\n\n## Root Cause Analysis\n1. Path comparison streamingFile !== currentFile fails if formats differ\n2. Server sends paths that may differ from client format (trailing slash, etc.)\n3. Mismatch causes repeated subscribe/unsubscribe cycles\n\n## Implementation (if needed after h96)\n1. Add path normalization utility in src/utils/\n2. Normalize paths before comparison in Files.tsx\n3. Use consistent path format in useFileWatcher and useWorkspaceStreaming\n\n## When Done\nTest: Enable Follow AI Edits with auto-scroll, no random file closing.\n\nClose: bd close markdown-themes-aok --reason \"Path normalization fixed\" OR \"Fixed by h96 right pane approach\"","status":"closed","priority":2,"issue_type":"bug","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-04T17:15:32.838258657-05:00","created_by":"GGPrompts","updated_at":"2026-02-04T17:25:50.573605055-05:00","closed_at":"2026-02-04T17:25:50.573605055-05:00","close_reason":"Fixed by h96 - right pane approach eliminates all reported instabilities","dependencies":[{"issue_id":"markdown-themes-aok","depends_on_id":"markdown-themes-h96","type":"blocks","created_at":"2026-02-04T17:20:24.145596822-05:00","created_by":"daemon"}]}
{"id":"markdown-themes-ar6","title":"Move file tree actions to separate row","description":"The file tree header is crowded with project name + multiple action icons in one row. Split into two rows:\n\nRow 1: Project name (with more horizontal space) + close button\nRow 2: Action icons (expand all, collapse all, filter dropdown)\n\nThis gives the project name room to display and groups actions together.","notes":"## prepared.prompt\n\nReorganize the file tree header into two rows to reduce crowding.\n\n**Current:** One cramped row with truncated project name + 5 action icons\n\n**Proposed layout:**\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ markdown-themes          âœ•  â”‚  Row 1: Project name + close\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ âŠž  âŠŸ   â–½ All Files â–¾       â”‚  Row 2: Expand/collapse all + filter\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n**File to modify:** `src/components/Sidebar.tsx`\n\n**Implementation:**\n1. Split header into two flex rows\n2. Row 1: Project name (flex-1, truncate with ellipsis) + close button\n3. Row 2: Expand all, collapse all, filter dropdown\n4. Add subtle border or spacing between rows\n5. Consider making Row 2 slightly smaller font/icons\n\n**Acceptance criteria:**\n- [ ] Project name has room to display (less truncation)\n- [ ] Actions grouped on their own row\n- [ ] Clean visual separation\n- [ ] Still compact overall height\n\nWhen done, commit and run `bd close markdown-themes-ar6`.","status":"closed","priority":2,"issue_type":"feature","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-03T14:14:56.066184535-05:00","created_by":"GGPrompts","updated_at":"2026-02-03T14:15:21.504480882-05:00","closed_at":"2026-02-03T14:15:21.504480882-05:00","close_reason":"Covered by x08 - moving project selector to header will free up sidebar space","labels":["frontend","ready","ux"]}
{"id":"markdown-themes-asg","title":"Implement Edit action (spawn $EDITOR)","description":"Add 'Edit' context menu action that spawns a new terminal with $EDITOR on the file.\n\nUse TabzChrome's /api/spawn endpoint:\nPOST /api/spawn { command: \"$EDITOR /path/to/file\", workingDir: \"...\" }","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-03T22:52:32.101057832-05:00","created_by":"matt","updated_at":"2026-02-03T23:07:46.87070774-05:00","closed_at":"2026-02-03T23:07:46.87070774-05:00","close_reason":"Implemented in FileContextMenu.tsx - Edit action spawns terminal with $EDITOR","dependencies":[{"issue_id":"markdown-themes-asg","depends_on_id":"markdown-themes-eq5","type":"blocks","created_at":"2026-02-03T22:52:39.297685176-05:00","created_by":"matt"}]}
{"id":"markdown-themes-atb","title":"extractMetadata parses entire file on every throttled update","description":"ConversationMarkdownViewer.tsx:65-95 - extractMetadata runs on every content change during streaming. Parses first lines repeatedly instead of caching.","design":"Memoize extractMetadata with content length check - only reparse if content grew significantly or changed structure","notes":"## prepared.prompt\n\n## Context\nextractMetadata parses the entire file on every throttled content update during streaming, wasting CPU.\n\n## Task\nOptimize extractMetadata to avoid re-parsing when content just grew (streaming). Cache result or add early return.\n\n## Key Files\n- src/components/viewers/ConversationMarkdownViewer.tsx:65-95\n\n## Strategy\nOption 1: Add ref to cache last parsed metadata + content length, only reparse if length decreased\nOption 2: Move metadata extraction to only run when not streaming\n\n## When Done\nbd close markdown-themes-atb --reason \"Optimized extractMetadata to avoid unnecessary re-parsing\"","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-05T11:41:38.074611122-05:00","updated_at":"2026-02-05T11:53:57.634426806-05:00","labels":["conversation-viewer","performance","ready"]}
{"id":"markdown-themes-baw","title":"Source Control Section","description":"Port TabzChrome's Source Control functionality with improved UX - larger buttons, better layout. Include git status, staging, AI commit messages, batch operations (fetch/push/pull).","status":"closed","priority":1,"issue_type":"epic","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-03T11:44:41.951559629-05:00","created_by":"GGPrompts","updated_at":"2026-02-03T12:21:43.180242745-05:00","closed_at":"2026-02-03T12:21:43.180242745-05:00","close_reason":"Source Control Section complete: status view, commit UI, batch ops","labels":["frontend"]}
{"id":"markdown-themes-bca","title":"Unsafe WebSocket message cast in useFileWatcher","description":"useFileWatcher.ts:81 - as FileWatcherMessage cast without validation. Malformed messages could cause runtime errors.","design":"Add type guard function that validates message shape before cast","notes":"## prepared.prompt\n\n## Context\nUnsafe type casts can cause runtime errors if server sends malformed messages.\n\n## Task\nAdd type guard function for FileWatcherMessage and use it before casting. Also add console.error for WebSocket errors.\n\n## Key Files\n- src/hooks/useFileWatcher.ts:81 (unsafe cast)\n- src/hooks/useFileWatcher.ts:198-202 (error handler)\n\n## Pattern\n```typescript\nfunction isFileWatcherMessage(data: unknown): data is FileWatcherMessage {\n  if (typeof data !== 'object' || data === null) return false;\n  const msg = data as Record\u003cstring, unknown\u003e;\n  return ['file-content', 'file-change', 'file-deleted', 'file-watch-error'].includes(msg.type as string);\n}\n```\n\n## Related\nAlso fixes markdown-themes-mzd\n\n## When Done\nbd close markdown-themes-bca markdown-themes-mzd --reason \"Added type guard and error logging to useFileWatcher\"","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-05T11:41:39.658165631-05:00","updated_at":"2026-02-05T11:53:24.318217637-05:00","labels":["ready","type-safety","websocket"]}
{"id":"markdown-themes-bdt","title":"Auto-open edited files as right pane tabs","description":"Re-enable the auto-open tabs feature but target the right pane instead of left.\n\n## Behavior\n- When Follow mode is active and Claude edits a file\n- Open it as a tab in the RIGHT pane (not left)\n- Apply same filtering (skip node_modules, .git, lock files, etc.)\n\n## Key Files\n- src/pages/Files.tsx - Re-enable the disabled useEffect\n- Change openTab calls to use right pane tab manager","notes":"## Retro\n- What worked: The original code was still in git history, making it easy to re-enable with proper changes\n- What was unclear: Nothing - the issue was well-documented with key files and implementation steps","status":"closed","priority":2,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-05T00:27:47.931526936-05:00","created_by":"GGPrompts","updated_at":"2026-02-05T00:59:36.124190102-05:00","closed_at":"2026-02-05T00:59:36.124190102-05:00","close_reason":"Auto-open now targets right pane tabs","labels":["ready"],"dependencies":[{"issue_id":"markdown-themes-bdt","depends_on_id":"markdown-themes-ixu","type":"blocks","created_at":"2026-02-05T00:27:55.601746716-05:00","created_by":"GGPrompts"}]}
{"id":"markdown-themes-bmh","title":"Fix z-index issues on all dropdown menus","description":"Multiple dropdown menus across the app have z-index issues where they appear behind other content. Need to audit and fix all dropdowns: ThemeSelector, filter menu, and any others in SourceControl/Prompts pages.","notes":"## Retro\n- What worked: Systematic audit of all components with dropdowns\n- Portal pattern already used in InlineField - good existing pattern\n- z-[100] consistent across toolbar and sidebar dropdowns","status":"closed","priority":1,"issue_type":"bug","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-03T12:42:13.686975562-05:00","created_by":"GGPrompts","updated_at":"2026-02-03T13:02:26.140246176-05:00","closed_at":"2026-02-03T13:02:26.140246176-05:00","close_reason":"Fixed z-index issues: Sidebar filter dropdown z-index increased to z-[100], header z-20 added for stacking context, consistent box-shadow on all dropdowns, added reusable CSS classes"}
{"id":"markdown-themes-c72","title":"Add staging and commit UI","description":"Stage/unstage files, commit with message, AI-generated commit message option (Haiku backend).","notes":"## prepared.prompt\n\nAdd staging and commit UI to the Source Control section. Build on top of the git status view to enable committing changes.\n\n**What to build:**\n\n1. Create `src/components/git/CommitForm.tsx`:\n   - Large textarea for commit message (min 4 rows)\n   - Bigger commit button (min-width: 120px, larger padding)\n   - AI generate button that calls `/api/git/repos/:repo/generate-message`\n   - Clear visual hierarchy with proper spacing\n\n2. Enhance `ChangesTree.tsx`:\n   - Add stage/unstage buttons per file\n   - Larger clickable areas for better UX\n   - Visual feedback on hover/active states\n\n3. Port commit logic to `useGitOperations.ts`:\n   - `stageFile(repo, path)` - Stage single file\n   - `unstageFile(repo, path)` - Unstage single file\n   - `commit(repo, message)` - Create commit\n   - `generateMessage(repo)` - Get AI-suggested message\n\n**Reference files from TabzChrome:**\n- `/home/marci/projects/TabzChrome/extension/dashboard/components/GitCommitForm.tsx`\n- `/home/marci/projects/TabzChrome/backend/routes/git.js` (for API endpoints)\n\n**UX improvements over TabzChrome:**\n- More padding around form elements (p-4 instead of p-2)\n- Larger buttons: `h-10` minimum, clear labels\n- Better textarea: larger default size, proper resize behavior\n- Stage/unstage icons with text labels, not just icons\n\n**Acceptance criteria:**\n- [ ] CommitForm renders with textarea and buttons\n- [ ] AI generate button fetches suggested message\n- [ ] Stage/unstage buttons work on individual files\n- [ ] Commit button creates commit and refreshes status\n- [ ] Form clears after successful commit\n- [ ] Error toast on failures\n\nWhen done, commit changes and run `bd close markdown-themes-c72`.","status":"closed","priority":1,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-03T11:44:56.18400771-05:00","created_by":"GGPrompts","updated_at":"2026-02-03T12:15:01.702238189-05:00","closed_at":"2026-02-03T12:15:01.702238189-05:00","close_reason":"Added CommitForm with AI message generation, enhanced ChangesTree with larger UI, text labels, better hover states","labels":["frontend","ready"],"dependencies":[{"issue_id":"markdown-themes-c72","depends_on_id":"markdown-themes-baw","type":"blocks","created_at":"2026-02-03T11:44:56.186458191-05:00","created_by":"GGPrompts"},{"issue_id":"markdown-themes-c72","depends_on_id":"markdown-themes-baw","type":"parent-child","created_at":"2026-02-03T11:45:38.021176198-05:00","created_by":"GGPrompts"},{"issue_id":"markdown-themes-c72","depends_on_id":"markdown-themes-tzh","type":"blocks","created_at":"2026-02-03T11:45:40.22863724-05:00","created_by":"GGPrompts"}]}
{"id":"markdown-themes-ch8","title":"useWorkspaceStreaming reconnects when Follow mode disabled","description":"useWorkspaceStreaming.ts:163-167 - Missing enabled check in reconnect callback. Can reconnect WebSocket even when Follow AI Edits mode is disabled.","design":"Add if (!enabled) return; at start of reconnect callback","notes":"## prepared.prompt\n\nFix together with markdown-themes-yxh. See that issue for combined prompt.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-02-05T11:41:14.951422258-05:00","updated_at":"2026-02-05T12:02:19.601532445-05:00","closed_at":"2026-02-05T12:02:19.601532445-05:00","close_reason":"Added error logging to WebSocket onerror handler and enabled check to prevent reconnect when Follow mode is disabled","labels":["follow-mode","ready","websocket"]}
{"id":"markdown-themes-ciu","title":"Add shared navigation header across all sections","description":"Create a persistent navigation header that appears on all pages including Landing. This enables theme switching from the landing page and provides consistent navigation between sections (Home, Files, Source Control, Prompts).","notes":"## Retro\n- What worked: Clear requirements made implementation straightforward. Reusing existing ThemeSelector component saved time.\n- What was unclear: Nothing major - the design spec was comprehensive.","status":"closed","priority":1,"issue_type":"feature","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-03T12:35:55.150083801-05:00","created_by":"GGPrompts","updated_at":"2026-02-03T12:57:03.080195578-05:00","closed_at":"2026-02-03T12:57:03.080195578-05:00","close_reason":"Created NavHeader component with navigation links and theme selector. Updated App.tsx to render NavHeader above routes. Removed theme selector from Toolbar.tsx, Files.tsx, Prompts.tsx, and SourceControl.tsx. Theme switching now works from all pages."}
{"id":"markdown-themes-cqs","title":"BINARY_EXTENSIONS Set recreated every render","description":"Files.tsx:308-317 - new Set() called inside component body, recreating Set on every render. Causes unnecessary work and potential dependency array issues.","design":"Move Set definition outside component as module-level constant","notes":"## prepared.prompt\n\n## Context\nCreating new Set() inside component body causes unnecessary object creation on every render.\n\n## Task\nMove BINARY_EXTENSIONS Set to module level (outside component). Also move followableExtensions Set.\n\n## Key Files\n- src/pages/Files.tsx:308-317 (BINARY_EXTENSIONS)\n- src/pages/Files.tsx:441,529 (followableExtensions)\n\n## Pattern\n```typescript\n// At module level, before component\nconst BINARY_EXTENSIONS = new Set(['png', 'jpg', ...]);\nconst FOLLOWABLE_EXTENSIONS = new Set(['ts', 'tsx', ...]);\n\nexport function Files() {\n  // Use the constants\n}\n```\n\n## Related\nAlso fixes markdown-themes-xo1\n\n## When Done\nbd close markdown-themes-cqs markdown-themes-xo1 --reason \"Moved Sets to module level\"","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-05T11:41:34.083131983-05:00","updated_at":"2026-02-05T11:54:09.035890284-05:00","labels":["optimization","performance","ready"]}
{"id":"markdown-themes-d20","title":"[Gate] Visual QA themes","description":"Review all 4 ported themes visually for consistency, readability, and effects.","status":"closed","priority":2,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-03T11:48:25.145777403-05:00","created_by":"GGPrompts","updated_at":"2026-02-03T12:04:01.340929307-05:00","closed_at":"2026-02-03T12:04:01.340929307-05:00","close_reason":"All 4 themes ported and build verified","labels":["gate:visual-qa"],"dependencies":[{"issue_id":"markdown-themes-d20","depends_on_id":"markdown-themes-dsk","type":"parent-child","created_at":"2026-02-03T11:48:54.681875287-05:00","created_by":"GGPrompts"},{"issue_id":"markdown-themes-d20","depends_on_id":"markdown-themes-2ej","type":"blocks","created_at":"2026-02-03T11:48:55.418642702-05:00","created_by":"GGPrompts"},{"issue_id":"markdown-themes-d20","depends_on_id":"markdown-themes-6vl","type":"blocks","created_at":"2026-02-03T11:48:56.177777919-05:00","created_by":"GGPrompts"},{"issue_id":"markdown-themes-d20","depends_on_id":"markdown-themes-n6w","type":"blocks","created_at":"2026-02-03T11:48:56.912059458-05:00","created_by":"GGPrompts"},{"issue_id":"markdown-themes-d20","depends_on_id":"markdown-themes-232","type":"blocks","created_at":"2026-02-03T11:48:57.647287176-05:00","created_by":"GGPrompts"}]}
{"id":"markdown-themes-d40","title":"Create Landing page component","description":"Create Landing.tsx with navigation cards for Files, Source Control, and Prompt Notebook sections.","notes":"## prepared.prompt\n\nCreate the Landing page component for the dashboard hub.\n\n**Context:** This is the home page users see when opening the app. It provides navigation to the main sections.\n\n**File to create:** `src/sections/Landing.tsx`\n\n**Design:**\n- Full viewport height with centered content\n- App title/logo at top\n- Three large navigation cards:\n  1. **Files** - Icon: folder, Description: \"Browse and view files with themes\"\n  2. **Source Control** - Icon: git-branch, Description: \"Git operations and batch actions\"\n  3. **Prompt Notebook** - Icon: book-open, Description: \"Create and manage prompts\"\n- Cards link to their respective routes\n- Use current theme's CSS variables for styling\n- Hover effects on cards\n\n**Implementation:**\n1. Create sections/ directory\n2. Create Landing.tsx with navigation cards\n3. Import Lucide icons (Folder, GitBranch, BookOpen)\n4. Style cards with theme variables (--bg-secondary, --text-primary, --accent)\n5. Add Link components from react-router-dom\n\n**Acceptance criteria:**\n- [ ] Landing page renders at /\n- [ ] Three navigation cards displayed\n- [ ] Cards navigate to correct routes\n- [ ] Theme variables applied\n- [ ] Hover effects work\n\nWhen done, commit and run `bd close markdown-themes-d40`.","status":"closed","priority":1,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-03T11:52:10.712004308-05:00","created_by":"GGPrompts","updated_at":"2026-02-03T11:58:41.887711139-05:00","closed_at":"2026-02-03T11:58:41.887711139-05:00","close_reason":"Enhanced Landing page with Lucide icons, responsive card grid, hover effects, and theme variable styling","labels":["frontend","ready"],"dependencies":[{"issue_id":"markdown-themes-d40","depends_on_id":"markdown-themes-xsf","type":"parent-child","created_at":"2026-02-03T11:52:18.767316519-05:00","created_by":"GGPrompts"},{"issue_id":"markdown-themes-d40","depends_on_id":"markdown-themes-0oi","type":"blocks","created_at":"2026-02-03T11:52:19.547253978-05:00","created_by":"GGPrompts"},{"issue_id":"markdown-themes-d40","depends_on_id":"markdown-themes-x08","type":"blocks","created_at":"2026-02-03T13:54:45.90631396-05:00","created_by":"GGPrompts"}]}
{"id":"markdown-themes-d6c","title":"Create useRightPaneTabs hook","description":"Create a tab manager hook for the right pane, similar to useTabManager.\n\n## Interface\nSimilar to useTabManager but scoped to right pane:\n- tabs, activeTab, openTab, closeTab, setActiveTab\n- Store in PageStateContext for persistence across navigation\n\n## Key Files\n- src/hooks/useTabManager.ts - Pattern to follow\n- src/context/PageStateContext.tsx - Add right pane tab state","notes":"## Retro\n- What worked: Following existing useTabManager pattern exactly made implementation straightforward\n- What was unclear: Nothing - the task spec was clear","status":"closed","priority":1,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-05T00:27:42.88512263-05:00","created_by":"GGPrompts","updated_at":"2026-02-05T00:50:56.742519183-05:00","closed_at":"2026-02-05T00:50:56.742519183-05:00","close_reason":"Created useRightPaneTabs hook following useTabManager pattern. Extended PageStateContext with rightPaneTabs and rightActiveTabId. Hook supports openTab, closeTab, pinTab, setActiveTab, and clearAllTabs operations with sessionStorage persistence.","labels":["ready"]}
{"id":"markdown-themes-d8v","title":"Add Mermaid diagram rendering support","description":"Render Mermaid diagrams inline in markdown files.\n\n**SIMPLE IMPLEMENTATION** - Streamdown has a built-in plugin!\n\nSteps:\n1. npm install @streamdown/mermaid\n2. Import in MarkdownViewer.tsx: import { mermaid } from '@streamdown/mermaid'\n3. Add to plugins: plugins={{ code: codePlugin, mermaid }}\n\nBuilt-in features from @streamdown/mermaid:\n- Render toggle button (diagram â†” source)\n- Fullscreen view with zoom/pan (v1.5.0+)\n- Export as SVG, PNG, or source\n- Custom error components for invalid syntax\n- Handles streaming gracefully\n\nOptional: May want to style mermaid diagrams to match themes (CSS custom properties).\n\nReference: https://github.com/vercel/streamdown","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-02-03T22:53:41.043480865-05:00","created_by":"matt","updated_at":"2026-02-03T23:04:14.196717048-05:00","closed_at":"2026-02-03T23:04:14.196717048-05:00","close_reason":"Added @streamdown/mermaid plugin"}
{"id":"markdown-themes-de1","title":"Create WorkingTree component for single-repo git status","description":"## Task\nCreate a new `WorkingTree` component that shows git status for a single repository.\n\n## Requirements\n- Display staged, unstaged, and untracked files in collapsible sections\n- Show file status icons (A/M/D/?)\n- Click a file â†’ emit event to open in viewer\n- Reuse existing git API: `GET /api/git/status?path=...`\n- Style with CSS variables for theming\n- Support refresh button\n\n## Component API\n```tsx\ninterface WorkingTreeProps {\n  repoPath: string;\n  onFileSelect: (path: string) =\u003e void;\n  onRefresh?: () =\u003e void;\n}\n```\n\n## Based on\nAdapt from RepoCard's file listing logic in SourceControl, but as a standalone right-pane component.","status":"closed","priority":2,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-04T13:56:45.761556362-05:00","created_by":"GGPrompts","updated_at":"2026-02-04T14:07:30.547622262-05:00","closed_at":"2026-02-04T14:07:30.547622262-05:00","close_reason":"Closed"}
{"id":"markdown-themes-diy","title":"Drag tabs to split view instead of dropdown","description":"Replace the recent files dropdown in the right split pane with drag-and-drop tab functionality. Users can drag a tab from the tab bar to the right pane to open it there. More intuitive UX similar to VS Code.","notes":"## prepared.prompt\n\nReplace the split view dropdown with drag-and-drop tab functionality for a more intuitive UX.\n\n**Context:** Currently the right split pane has a dropdown to select from recent files. Dragging tabs to the right pane (like VS Code) would be more intuitive.\n\n**Files to modify:**\n- `src/components/TabBar.tsx` - Add drag source functionality to tabs\n- `src/components/SplitView.tsx` - Add drop target for right pane\n- `src/pages/Files.tsx` - Handle drop events, remove dropdown logic\n\n**Implementation:**\n\n1. **TabBar.tsx - Make tabs draggable:**\n   ```tsx\n   \u003cdiv\n     draggable\n     onDragStart={(e) =\u003e {\n       e.dataTransfer.setData(\"text/plain\", tab.path);\n       e.dataTransfer.effectAllowed = \"move\";\n     }}\n     // ... existing tab content\n   \u003e\n   ```\n\n2. **SplitView.tsx - Add drop zone to right pane:**\n   ```tsx\n   const [isDragOver, setIsDragOver] = useState(false);\n   \n   // Right pane wrapper\n   \u003cdiv\n     onDragOver={(e) =\u003e {\n       e.preventDefault();\n       setIsDragOver(true);\n     }}\n     onDragLeave={() =\u003e setIsDragOver(false)}\n     onDrop={(e) =\u003e {\n       e.preventDefault();\n       const path = e.dataTransfer.getData(\"text/plain\");\n       onDropToRight?.(path);\n       setIsDragOver(false);\n     }}\n     style={{\n       outline: isDragOver ? \"2px dashed var(--accent)\" : \"none\"\n     }}\n   \u003e\n   ```\n\n3. **Visual feedback:**\n   - Dashed outline on right pane when dragging over\n   - Ghost image of tab while dragging\n   - \"Drop here\" placeholder text when pane is empty and dragging\n\n4. **Files.tsx changes:**\n   - Add `handleDropToRight(path)` handler\n   - Remove dropdown from right pane header\n   - Show file name in header instead (with close button)\n\n5. **Edge cases:**\n   - Dragging to right when not in split mode: auto-enable split\n   - Dragging same file that's already in right: no-op\n   - Close button in right pane header to clear right file\n\n**Acceptance criteria:**\n- [ ] Tabs are draggable\n- [ ] Dragging over right pane shows drop indicator\n- [ ] Dropping tab opens file in right pane\n- [ ] Visual feedback during drag\n- [ ] Remove dropdown from right pane\n- [ ] Right pane header shows current file name\n- [ ] Close button to clear right pane\n\nWhen complete, commit and run `bd close markdown-themes-diy`.","status":"closed","priority":2,"issue_type":"feature","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-03T12:41:33.633508291-05:00","created_by":"GGPrompts","updated_at":"2026-02-03T12:59:16.196332774-05:00","closed_at":"2026-02-03T12:59:16.196332774-05:00","close_reason":"Implemented drag-and-drop tabs for split view. Tabs are now draggable with visual feedback (reduced opacity). The right pane shows a dashed outline drop indicator and displays the file name with a close button instead of a dropdown."}
{"id":"markdown-themes-dk4","title":"Extend file type support","description":"Add viewers for: code files (use Shiki), images (zoom controls), CSV (tabular), JSON (syntax highlighted).","notes":"## Retro\n- What worked: Clean separation of viewer components, reusing existing Shiki setup for code highlighting\n- What was unclear: Pre-existing TypeScript errors in unrelated files initially appeared concerning but were pre-existing issues","status":"closed","priority":1,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-03T11:44:51.155572283-05:00","created_by":"GGPrompts","updated_at":"2026-02-03T12:10:05.192824552-05:00","closed_at":"2026-02-03T12:10:05.192824552-05:00","close_reason":"Added viewers for code (Shiki), images (zoom/pan), CSV (sortable tables), JSON (collapsible tree)","labels":["frontend","ready"],"dependencies":[{"issue_id":"markdown-themes-dk4","depends_on_id":"markdown-themes-wpi","type":"blocks","created_at":"2026-02-03T11:44:51.157846416-05:00","created_by":"GGPrompts"},{"issue_id":"markdown-themes-dk4","depends_on_id":"markdown-themes-wpi","type":"parent-child","created_at":"2026-02-03T11:45:25.792717138-05:00","created_by":"GGPrompts"}]}
{"id":"markdown-themes-dsk","title":"Theme Expansion","description":"Port 4 favorite themes from htmlstyleguides: Industrial, Knolling, Pixel Art, Streamline Moderne.","status":"closed","priority":2,"issue_type":"epic","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-03T11:44:43.842941881-05:00","created_by":"GGPrompts","updated_at":"2026-02-03T12:04:01.399035182-05:00","closed_at":"2026-02-03T12:04:01.399035182-05:00","close_reason":"All 4 themes ported: Industrial, Knolling, Pixel Art, Streamline Moderne","labels":["theme"]}
{"id":"markdown-themes-dtn","title":"Add JSONL file viewer","description":"Add support for viewing .jsonl (JSON Lines) files in the file viewer.\n\n## Use Cases\n- Viewing `.beads/issues.jsonl` to see beads issues\n- Watching Claude Code conversation/log files\n- Any streaming JSON data format\n\n## JSONL Format\nEach line is a separate, valid JSON object:\n```jsonl\n{\"id\": \"1\", \"title\": \"First issue\", \"status\": \"open\"}\n{\"id\": \"2\", \"title\": \"Second issue\", \"status\": \"closed\"}\n```\n\n## UI Design Options\n1. **Table view** - Parse all objects, show as table with columns from keys\n2. **List of collapsible JSON** - Each line as a collapsible JSON tree (like current JsonViewer)\n3. **Hybrid** - Table with expandable rows for full JSON detail\n\n## Implementation\n1. Create `src/components/viewers/JsonlViewer.tsx`\n2. Add `.jsonl` extension detection in file type routing\n3. Parse file content line-by-line, skip empty lines\n4. Render each parsed object (reuse JsonViewer tree logic?)\n\n## Considerations\n- Large files: virtual scrolling or pagination?\n- Malformed lines: show error inline, don't break whole view\n- Live updates: works with existing file watcher for streaming","notes":"## prepared.prompt\n\n## Context\nJSONL (JSON Lines) files store one JSON object per line. Useful for viewing .beads/issues.jsonl and Claude Code logs.\n\n## Task\nCreate a JSONL file viewer component.\n\n## Key Files\n- src/components/viewers/JsonlViewer.tsx - NEW file to create\n- src/components/viewers/JsonViewer.tsx - reference for JSON tree rendering\n- src/components/ViewerContainer.tsx - add routing for .jsonl extension\n\n## Implementation\n1. Create JsonlViewer.tsx:\n```tsx\nexport function JsonlViewer({ content, fontSize = 100 }: { content: string; fontSize?: number }) {\n  const lines = useMemo(() =\u003e {\n    return content.split('\\n')\n      .filter(line =\u003e line.trim())\n      .map((line, idx) =\u003e {\n        try {\n          return { id: idx, data: JSON.parse(line), error: null };\n        } catch (e) {\n          return { id: idx, data: null, error: e.message };\n        }\n      });\n  }, [content]);\n  \n  // Render each line as collapsible JSON tree\n  // Reuse JsonNode from JsonViewer or inline similar logic\n}\n```\n\n2. Update ViewerContainer.tsx:\n- Add: `const jsonlExtensions = new Set(['jsonl', 'ndjson']);`\n- Add check in getViewerType()\n- Add case in switch to render JsonlViewer\n\n3. Create JsonlViewer.test.ts with basic tests\n\n## When Done\nRun `npm run test:run` then: bd close markdown-themes-dtn --reason \"Added JSONL viewer with line-by-line JSON display\"","status":"closed","priority":3,"issue_type":"feature","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-04T11:48:56.130368413-05:00","created_by":"GGPrompts","updated_at":"2026-02-04T12:28:02.195893837-05:00","closed_at":"2026-02-04T12:28:02.195893837-05:00","close_reason":"Added JSONL viewer with line-by-line JSON display. Created JsonlViewer.tsx with collapsible tree rendering for each line, updated ViewerContainer to route .jsonl and .ndjson files, added 10 tests for parsing.","labels":["ready"]}
{"id":"markdown-themes-dxh","title":"Create ConversationMarkdownViewer component","description":"React component that renders Claude Code conversations as themed markdown.\n\n## Approach\n1. Accept JSONL content as prop\n2. Use conversationMarkdown.ts to transform to markdown\n3. Pass to existing MarkdownViewer for themed rendering\n4. Show metadata header (session ID, timestamp, git branch)\n\n## Props\n- content: string (raw JSONL)\n- filePath: string (for metadata display)\n- Optional: collapsed thinking by default\n\n## Reuses\n- MarkdownViewer for rendering\n- All 15+ existing themes","notes":"## prepared.prompt\n\n## Context\nWith conversationMarkdown.ts ready, we need a React component to render the transformed markdown with themes.\n\n## Task\nCreate `src/components/viewers/ConversationMarkdownViewer.tsx` - renders Claude Code conversations as themed markdown.\n\n## Key Files\n- src/components/MarkdownViewer.tsx - Reuse for rendering\n- src/components/viewers/JsonViewer.tsx - Viewer pattern\n- src/utils/conversationMarkdown.ts - Transformer to use\n\n## Implementation\n1. Create component with props: `content: string`, `filePath?: string`\n2. Import `jsonlToMarkdown` from conversationMarkdown.ts\n3. Transform content on render (useMemo)\n4. Pass transformed markdown to MarkdownViewer\n5. Add optional metadata header showing session info\n\n## Component Structure\n```tsx\nexport function ConversationMarkdownViewer({ content, filePath }: Props) {\n  const markdown = useMemo(() =\u003e jsonlToMarkdown(content), [content]);\n  return (\n    \u003cdiv\u003e\n      {/* Optional: metadata header */}\n      \u003cMarkdownViewer content={markdown} /\u003e\n    \u003c/div\u003e\n  );\n}\n```\n\n## When Done\nbd close markdown-themes-dxh --reason \"ConversationMarkdownViewer component created\"","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-04T23:16:21.095726661-05:00","updated_at":"2026-02-04T23:25:47.7976599-05:00","closed_at":"2026-02-04T23:25:47.7976599-05:00","close_reason":"ConversationMarkdownViewer component created with metadata header showing message count, thinking/tools badges, and file path. Uses jsonlToMarkdown transformer and MarkdownViewer for themed rendering.","dependencies":[{"issue_id":"markdown-themes-dxh","depends_on_id":"markdown-themes-so7","type":"blocks","created_at":"2026-02-04T23:19:34.391841201-05:00","created_by":"daemon"}]}
{"id":"markdown-themes-dzz","title":"Sidebar folders randomly re-expand","description":"Folders that are manually collapsed will randomly re-expand.\n\n## Symptoms\n- Collapse a folder in the sidebar\n- At some point it re-expands on its own\n- Possibly triggered by file changes or tree updates\n\n## Likely causes\n1. File tree updates from WebSocket resetting expanded state\n2. useEffect re-initializing expandedDirs when tree changes\n3. Key prop changes causing component remount\n\n## Investigation areas\n- `src/components/Sidebar.tsx` - expandedDirs state management\n- `src/hooks/useFileWatcher.ts` - file change events\n- Check if expandedDirs is derived from tree or independent\n\n## Fix approach\n- Expanded state should persist independently of tree updates\n- Only auto-expand new directories, don't collapse existing\n- Consider storing expanded paths in a Set that survives tree refreshes","notes":"## prepared.prompt\n\n## Context\nFolders randomly re-expand after user collapses them. The useEffect at lines 548-561 re-adds directories when fileTree changes.\n\n## Task\nFix the expansion logic to preserve user collapse decisions.\n\n## Key File\n- src/components/Sidebar.tsx (lines 541-573) - expansion state management\n\n## Root Cause\nThe useEffect runs on every fileTree change and re-adds ALL directories to expandedPaths, including ones the user just collapsed.\n\n## Fix Approach\nTrack explicitly collapsed paths separately. When fileTree updates:\n- Add NEW directories (not seen before)\n- Never re-add paths the user explicitly collapsed\n- Use a collapsedPaths Set alongside expandedPaths\n\n## When Done\nRun `npm run test:run` then close issue: bd close markdown-themes-dzz --reason \"Fixed folder expansion to respect user collapse decisions\"","status":"closed","priority":2,"issue_type":"bug","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-04T11:11:07.350909014-05:00","created_by":"GGPrompts","updated_at":"2026-02-04T11:20:41.073724301-05:00","closed_at":"2026-02-04T11:20:41.073724301-05:00","close_reason":"Fixed folder expansion to respect user collapse decisions by tracking explicitly collapsed paths in a separate collapsedPaths Set","labels":["ready"]}
{"id":"markdown-themes-e30","title":"Accessing parsed JSON without type guards in ConversationMarkdownViewer","description":"ConversationMarkdownViewer.tsx:82-85 - After JSON.parse, properties accessed without checking they exist. Could throw on malformed JSONL entries.","design":"Add defensive checks before accessing properties on parsed JSON objects","notes":"## prepared.prompt\n\n## Context\nAfter JSON.parse, properties are accessed without checking they exist, risking runtime errors.\n\n## Task\nAdd defensive type checks before accessing properties on parsed JSON objects.\n\n## Key Files\n- src/components/viewers/ConversationMarkdownViewer.tsx:82-85\n\n## Pattern\n```typescript\nif (parsed \u0026\u0026 typeof parsed === 'object' \u0026\u0026 'type' in parsed) {\n  // Safe to access parsed.type\n}\n```\n\n## When Done\nbd close markdown-themes-e30 --reason \"Added type guards for parsed JSON in ConversationMarkdownViewer\"","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-05T11:41:43.016312975-05:00","updated_at":"2026-02-05T11:53:52.429283602-05:00","labels":["conversation-viewer","ready","type-safety"]}
{"id":"markdown-themes-e5h","title":"Fix SVG viewer broken image rendering","description":"## Problem\nSVG files in the viewer show broken/empty instead of rendering. The checkered background shows but no image content.\n\n## What we tried\n\n### 1. Data URL with encodeURIComponent (original)\n```js\nconst encoded = encodeURIComponent(content);\nreturn `data:image/svg+xml,${encoded}`;\n```\nResult: Broken image icon\n\n### 2. Base64 encoding\n```js\nconst bytes = new TextEncoder().encode(content);\nconst binary = Array.from(bytes, byte =\u003e String.fromCharCode(byte)).join('');\nconst base64 = btoa(binary);\nreturn `data:image/svg+xml;base64,${base64}`;\n```\nResult: Hooks error (early return before hooks), then empty\n\n### 3. dangerouslySetInnerHTML (current)\n```jsx\n\u003cdiv dangerouslySetInnerHTML={{ __html: content || '' }} /\u003e\n```\nResult: Empty - no content rendering\n\n## Observations\n- API returns valid SVG content (verified with curl)\n- SvgViewer toolbar shows filename, so component renders\n- Source view might show content (not confirmed)\n- Issue appeared after contentPath fix in useFileWatcher\n- public/tauri.svg and public/vite.svg both affected\n\n## Files\n- src/components/viewers/SvgViewer.tsx\n- src/hooks/useFileWatcher.ts (contentPath changes)\n- src/components/ViewerContainer.tsx\n\n## Next steps to try\n1. Add console.log to verify content is passed to SvgViewer\n2. Check if Source view shows SVG code\n3. Verify content isn't empty string\n4. Check if issue is specific to public/ folder files\n5. Test with other SVG files outside public/","notes":"## Additional context\nSVGs render correctly in TabzChrome's own file tree viewer, so the issue is specific to markdown-themes - likely in how content is loaded/passed via useFileWatcher or ViewerContainer, not the encoding approach.\n\nReference TabzChrome's SVG rendering implementation for comparison.","status":"closed","priority":2,"issue_type":"bug","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-04T15:57:24.478714716-05:00","created_by":"GGPrompts","updated_at":"2026-02-04T16:01:08.453647848-05:00","closed_at":"2026-02-04T16:01:08.453647848-05:00","close_reason":"SVG was incorrectly in BINARY_EXTENSIONS list, so content was never loaded. Removed SVG from binary list - it needs text content passed to SvgViewer, not URL-based fetch."}
{"id":"markdown-themes-eq5","title":"Add file context menu with TabzChrome actions","description":"Port the context menu from TabzChrome's file viewer to markdown-themes. This is the main feature for turning markdown-themes into a battlestation alongside TabzChrome terminals.\n\nActions to include:\n- Copy Path\n- Copy @Path (for Claude references)\n- Toggle Favorite\n- Pin tab\n- Send to Chat (queue to TabzChrome sidebar)\n- Paste to Terminal (paste content to active terminal)\n- Read Aloud (TTS via tabz_speak)\n- Edit (spawn $EDITOR in new terminal via /api/spawn)\n\nReference: TabzChrome's FileTreeContextMenu.tsx and FileActionsMenu.tsx","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-02-03T22:52:18.052038381-05:00","created_by":"matt","updated_at":"2026-02-03T23:07:06.58656696-05:00","closed_at":"2026-02-03T23:07:06.58656696-05:00","close_reason":"Added context menu with Copy Path, Copy @Path, Toggle Favorite, Send to Chat, and Edit actions"}
{"id":"markdown-themes-eqg","title":"Auto-scroll to bottom when streaming (Follow AI Edits)","description":"When Follow AI Edits opens a file that Claude is actively writing to, auto-scroll to the bottom to keep up with where new content is being added.\n\n## Current behavior\n- Files flash/switch when Claude writes to multiple files rapidly\n- No indication of where in the file you are or what's new\n- User has to manually scroll to see new content\n\n## Proposed solution\nAdd auto-scroll behavior when `isStreaming=true`:\n\n1. **MarkdownViewer** - Scroll to bottom when streaming starts, keep scrolling as content updates\n2. **CodeViewer** - Same behavior for code files\n\n## Implementation notes\n- `isStreaming` prop is already passed to viewers\n- Could use `useEffect` watching `isStreaming` and `content` to trigger scroll\n- Should only auto-scroll when streaming, not on manual file open\n- Consider a small \"scroll to bottom\" indicator/button when streaming\n\n## Future enhancements\n- Highlight new lines briefly (yellow flash)\n- Show line number indicator for changes\n- Track cursor/change position from server","status":"closed","priority":2,"issue_type":"feature","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-04T16:43:47.62913032-05:00","created_by":"GGPrompts","updated_at":"2026-02-04T16:53:43.220790433-05:00","closed_at":"2026-02-04T16:53:43.220790433-05:00","close_reason":"Implemented diff-based auto-scroll that finds where content changed and scrolls to that position during streaming"}
{"id":"markdown-themes-f6i","title":"Remove SourceControl page and nav","description":"## Task\nAfter WorkingTree integration is complete, remove the standalone SourceControl page.\n\n## Cleanup\n- Remove `src/pages/SourceControl.tsx`\n- Remove SourceControl from App.tsx routing\n- Remove nav tab for SourceControl\n- Update any imports/references\n- Update CLAUDE.md documentation\n\n## Prerequisite\nOnly do this after:\n- WorkingTree component is working\n- Files toolbar integration is done\n- Multi-repo view is supported\n\nThe functionality should be fully available in Files split view before removing the page.","notes":"## prepared.prompt\n\n## Context\nAfter multi-repo view is integrated into Files split pane, SourceControl as a separate page is redundant. Clean up the codebase.\n\n## Task\nRemove the standalone SourceControl page and its navigation entry.\n\n## Key Files\n- `src/pages/SourceControl.tsx` - DELETE this file\n- `src/App.tsx` - Remove SourceControl route and import\n- `src/components/Header.tsx` or nav component - Remove SourceControl tab\n- `CLAUDE.md` - Update documentation\n\n## Checklist\n- [ ] Delete `src/pages/SourceControl.tsx`\n- [ ] Remove route from `App.tsx`\n- [ ] Remove nav link/tab\n- [ ] Search codebase for any remaining imports: `grep -r \"SourceControl\" src/`\n- [ ] Update CLAUDE.md Project Structure section\n- [ ] Test that app still builds: `npm run build`\n\n## When Done\nbd close markdown-themes-f6i --reason \"SourceControl page removed, functionality lives in Files split view\"","status":"closed","priority":3,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-04T13:57:09.070314068-05:00","created_by":"GGPrompts","updated_at":"2026-02-04T15:35:03.40235418-05:00","closed_at":"2026-02-04T15:35:03.40235418-05:00","close_reason":"Removed SourceControl page: deleted src/pages/SourceControl.tsx, removed route and nav entry from App.tsx and NavHeader.tsx, cleaned up PageStateContext.tsx, updated Landing.tsx navigation cards, and updated CLAUDE.md documentation. Build and all 145 tests pass.","dependencies":[{"issue_id":"markdown-themes-f6i","depends_on_id":"markdown-themes-4wo","type":"blocks","created_at":"2026-02-04T13:57:15.98136523-05:00","created_by":"GGPrompts"}]}
{"id":"markdown-themes-ffx","title":"Folder/workspace mode","description":"Support opening a folder and browsing markdown files in a sidebar. Tree view for journal/notebook organization","status":"closed","priority":2,"issue_type":"feature","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-02T18:44:11.157579691-05:00","created_by":"GGPrompts","updated_at":"2026-02-02T19:12:17.643940324-05:00","closed_at":"2026-02-02T19:12:17.643940324-05:00","close_reason":"Added sidebar with file tree, useWorkspace hook, folder picker","labels":["feature"]}
{"id":"markdown-themes-gd5","title":"WebSocket pasteToTerminal can hang forever","description":"api.ts:240-253 - Same issue as queueToChat. Promise never resolves/rejects if WebSocket closes before opening. No onclose handler.","design":"Add ws.onclose handler identical to queueToChat fix","notes":"## prepared.prompt\n\n## Context\nSame issue as markdown-themes-9zo. Fix together.\n\n## Task\nFix pasteToTerminal in api.ts with same onclose handler pattern.\n\n## Key Files\n- src/lib/api.ts:240-253\n\n## When Done\nClose with markdown-themes-9zo","status":"open","priority":1,"issue_type":"bug","created_at":"2026-02-05T11:41:08.650985323-05:00","updated_at":"2026-02-05T11:53:15.044245711-05:00","labels":["api","high-severity","ready","websocket"]}
{"id":"markdown-themes-gj7","title":"useSubagentWatcher errors not logged, no error state","description":"useSubagentWatcher.ts:210-229 - WebSocket errors not logged. Hook does not expose error state for UI to display connection problems.","design":"Add error logging and return error state from hook: { subagents, error, isConnected }","notes":"## prepared.prompt\n\nFix together with markdown-themes-8px. See that issue for combined prompt.","status":"open","priority":2,"issue_type":"bug","created_at":"2026-02-05T11:41:22.273096315-05:00","updated_at":"2026-02-05T11:53:33.487026358-05:00","labels":["error-handling","ready","websocket"]}
{"id":"markdown-themes-gtt","title":"Auto-open files when they start being edited","description":"Add option to automatically open/switch to files when they start being modified, so users can watch Claude edit files in real-time without manually navigating.\n\n## Use Case\nUser has markdown-themes open while Claude is working. When Claude starts editing a file, the viewer automatically shows that file with live streaming updates.\n\n## UI Options\n1. **Follow mode toggle** - Button in toolbar to enable/disable auto-follow\n2. **Open in new tab** - Don't replace current file, open modified file in new tab\n3. **Open in split view** - Show modified file in right pane\n4. **Notification** - Toast/badge showing \"File X is being edited\" with click to open\n\n## Implementation Considerations\n- Need to detect \"new\" file activity vs ongoing edits to same file\n- Debounce to avoid rapid tab switching if multiple files edited\n- User should be able to disable/ignore for specific files\n- Maybe only trigger for files within current workspace\n\n## Technical\n- WebSocket already receives file-change events\n- Would need to track which files are \"actively streaming\" vs just changed once\n- Could use `timeSinceLastChange \u003c 1500ms` threshold (existing streaming detection)","notes":"## prepared.prompt\n\n## Context\nWhen Claude starts editing a file (rapid changes detected), it would be nice to auto-open that file instead of manually navigating to it.\n\n## Task\nAdd a \"follow mode\" toggle that auto-opens files when streaming is detected.\n\n## Key Files\n- src/context/AppStoreContext.tsx - add followStreamingMode setting\n- src/components/Toolbar.tsx - add toggle button\n- src/pages/Files.tsx - hook up auto-open logic\n- src/hooks/useFileWatcher.ts - streaming detection (already works)\n\n## Implementation\n1. AppStoreContext.tsx:\n- Add `followStreamingMode: boolean` to AppState interface and DEFAULT_STATE\n- Add `toggleFollowMode()` method\n\n2. Toolbar.tsx:\n- Add toggle button near other toolbar controls\n- Icon suggestion: Eye or Crosshair icon\n- Show active state when enabled\n\n3. Files.tsx:\n- Need a way to detect streaming on OTHER files (not just current)\n- Option A: Subscribe to all workspace files (heavy)\n- Option B: Have TabzChrome send events when any file starts streaming\n- Option C: Simpler - just detect when current file stops streaming and another starts\n\nNote: This is trickier than other issues - may need to rethink the WebSocket subscription model.\n\n## When Done\nRun `npm run test:run` then: bd close markdown-themes-gtt --reason \"Added follow mode to auto-open streaming files\"","status":"closed","priority":3,"issue_type":"feature","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-04T11:57:49.014214913-05:00","created_by":"GGPrompts","updated_at":"2026-02-04T12:33:22.69899018-05:00","closed_at":"2026-02-04T12:33:22.69899018-05:00","close_reason":"Added follow streaming mode feature: toggle button in toolbar (Crosshair icon), followStreamingMode setting persisted in localStorage, useWorkspaceStreaming hook for workspace-wide file change detection, auto-opens files when streaming is detected and mode is enabled"}
{"id":"markdown-themes-h96","title":"Follow AI Edits should use right pane","description":"Currently Follow AI Edits opens streaming files in the main (left) pane, which:\n- Disrupts the user's current file\n- Makes it hard to reference other files while watching\n- Feels intrusive\n\nBetter UX: Open streaming files in the RIGHT (split) pane instead:\n- User keeps their current file in left pane\n- AI-edited files auto-open in right pane\n- Can still browse file tree and open files manually\n- Natural 'reference left, AI work right' layout\n- Auto-enable split view when Follow AI Edits is turned on\n\nImplementation:\n- When followStreamingMode is enabled, auto-enable split view if not already\n- Use setRightPaneFile(streamingFile) instead of openTab(streamingFile)\n- Keep left pane unchanged\n- Auto-scroll would then target the right pane scroll container","notes":"## prepared.prompt\n\n## Context\nFollow AI Edits currently disrupts the user by opening streaming files in the main pane. Moving them to the right pane creates a natural \"reference left, AI work right\" layout.\n\n## Task\nModify Follow AI Edits to open streaming files in the RIGHT pane instead of the left pane.\n\n## Key Files\n- src/pages/Files.tsx (lines 277-349 - streaming file effect)\n- src/hooks/useSplitView.ts (has setRightPaneFile ready to use)\n- src/hooks/useWorkspaceStreaming.ts (returns streamingFile)\n\n## Implementation\n1. In Files.tsx around line 288, when followStreamingMode is enabled:\n   - If not already split, call toggleSplit()\n   - Replace openTab(streamingFile, true) with setRightPaneFile(streamingFile)\n2. useSplitView already has setRightPaneFile() - just use it\n3. No changes needed to useWorkspaceStreaming\n\n## When Done\nTest: Enable Follow AI Edits, have Claude edit a file. File should open in right pane while left pane stays unchanged.\n\nClose: bd close markdown-themes-h96 --reason \"Follow AI opens in right pane\"","status":"closed","priority":1,"issue_type":"feature","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-04T17:16:59.440681982-05:00","created_by":"GGPrompts","updated_at":"2026-02-04T17:24:38.606178806-05:00","closed_at":"2026-02-04T17:24:38.606178806-05:00","close_reason":"Follow AI opens streaming files in right pane, auto-enables split view","labels":["ready"]}
{"id":"markdown-themes-hvk","title":"[Gate] Test Prompt Notebook","description":"Run tests for prompty parsing, variable editing, library browsing.","status":"closed","priority":2,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-03T11:48:24.400534739-05:00","created_by":"GGPrompts","updated_at":"2026-02-03T12:16:25.819711983-05:00","closed_at":"2026-02-03T12:16:25.819711983-05:00","close_reason":"Prompty viewer and library browser implemented, build verified","labels":["gate:test-runner"],"dependencies":[{"issue_id":"markdown-themes-hvk","depends_on_id":"markdown-themes-kgj","type":"parent-child","created_at":"2026-02-03T11:48:47.17056793-05:00","created_by":"GGPrompts"},{"issue_id":"markdown-themes-hvk","depends_on_id":"markdown-themes-1eh","type":"blocks","created_at":"2026-02-03T11:48:47.91185439-05:00","created_by":"GGPrompts"}]}
{"id":"markdown-themes-hvo","title":"Click commit hash to copy to clipboard","description":"Add click-to-copy on the commit short hash in GitGraphRow:\n- Click the hash badge copies full hash to clipboard\n- Show brief feedback (checkmark or tooltip)\n- Could also add a small copy icon on hover","status":"closed","priority":2,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-04T10:13:35.756896591-05:00","created_by":"GGPrompts","updated_at":"2026-02-04T10:21:35.610330003-05:00","closed_at":"2026-02-04T10:21:35.610330003-05:00","close_reason":"Merged into markdown-themes-nmq","labels":["git","ui"]}
{"id":"markdown-themes-hwx","title":"Auto-scroll conversation viewer to follow new messages","description":"When viewing a live conversation, auto-scroll to bottom as new messages arrive.\n\n## Context\nAuto-scroll was disabled for conversation files to fix crashes, but now the race condition is fixed. Can add simpler scroll-to-bottom behavior.\n\n## Approach\n- Detect when content updates and new messages are added\n- Scroll to bottom (not diff-based scrolling like other files)\n- Respect user scroll interruption (if user scrolls up, pause auto-scroll)\n\n## Key Files\n- src/pages/Files.tsx - Enable scrolling for conversation files\n- src/hooks/useDiffAutoScroll.ts - May need simpler \"scroll to bottom\" mode","notes":"## prepared.prompt\n\n## Context\nConversation viewer auto-scrolls to bottom as new messages arrive. When viewing a live Claude session, users want to see the latest output automatically.\n\n## Task\nEnable auto-scroll for conversation files using scroll-to-bottom behavior.\n\n## Key Files\n- src/pages/Files.tsx (line 407) - Change `enabled: isStreaming \u0026\u0026 !isConversationFile` to remove exclusion\n- src/hooks/useDiffAutoScroll.ts - Already has addition detection + scroll-to-last-block (lines 214-230)\n- src/components/viewers/ConversationMarkdownViewer.tsx - May need scroll container ref\n\n## Implementation\n1. In Files.tsx line 407, change:\n   `enabled: isStreaming \u0026\u0026 !isConversationFile` â†’ `enabled: isStreaming`\n2. The existing useDiffAutoScroll already handles scrolling to additions\n3. Test with live conversation file to verify auto-scroll works\n\n## When Done\nbd close markdown-themes-hwx --reason \"Auto-scroll enabled for conversation files\"","status":"closed","priority":2,"issue_type":"feature","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-05T00:42:38.041171618-05:00","created_by":"GGPrompts","updated_at":"2026-02-05T00:49:39.420334273-05:00","closed_at":"2026-02-05T00:49:39.420334273-05:00","close_reason":"Auto-scroll enabled for conversation files by removing isConversationFile exclusion from useDiffAutoScroll enabled condition","labels":["ready"]}
{"id":"markdown-themes-ic9","title":"Add toolbar actions","description":"Copy content, Copy @path, Send to Terminal integration.","notes":"## prepared.prompt\n\nAdd toolbar action buttons to markdown-themes for common file operations.\n\n**Context:** Users frequently need to copy file contents, get the @path for Claude references, or open files in terminal. This builds on the tab system (markdown-themes-2lc) to add actions for the active file. TabzChrome provides terminal integration via its API.\n\n**Files to create:**\n- src/components/actions/CopyButton.tsx - Copy file content to clipboard\n- src/components/actions/PathButton.tsx - Copy @path format for Claude\n- src/components/actions/TerminalButton.tsx - Send file to TabzChrome terminal\n\n**Files to modify:**\n- src/components/Toolbar.tsx - Add action buttons section\n\n**Implementation details:**\n1. CopyButton.tsx:\n   - Icon: clipboard\n   - onClick: copy current file content to clipboard\n   - Toast notification on success\n   - Disabled state when no file open\n\n2. PathButton.tsx:\n   - Icon: @ symbol or link\n   - onClick: copy \"@/relative/path/to/file.ext\" format\n   - Useful for referencing files in Claude conversations\n   - Tooltip explaining the format\n\n3. TerminalButton.tsx:\n   - Icon: terminal\n   - onClick: send file path to TabzChrome terminal\n   - Use TabzChrome API: tabz_send_keys to active terminal\n   - Dropdown for: \"Open in terminal\", \"cat file\", \"code file\"\n   - Graceful fallback if TabzChrome not available\n\n4. Toolbar.tsx integration:\n   - Add actions section (right side of toolbar)\n   - Group buttons with separator from other toolbar items\n   - Pass current file path/content to action components\n\n**Acceptance criteria:**\n- [ ] Copy button copies file content to clipboard\n- [ ] Path button copies @path format (e.g., @src/App.tsx)\n- [ ] Terminal button sends command to TabzChrome\n- [ ] All buttons show appropriate icons\n- [ ] Buttons disabled when no file selected\n- [ ] Success feedback (toast or visual) on action\n\nWhen complete, commit changes and run `bd close markdown-themes-ic9`.","status":"closed","priority":2,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-03T11:44:54.136929087-05:00","created_by":"GGPrompts","updated_at":"2026-02-03T12:24:01.606872478-05:00","closed_at":"2026-02-03T12:24:01.606872478-05:00","close_reason":"Added Copy, @Path, and Terminal action buttons to toolbar with feedback","labels":["frontend","ready"],"dependencies":[{"issue_id":"markdown-themes-ic9","depends_on_id":"markdown-themes-wpi","type":"blocks","created_at":"2026-02-03T11:44:54.138826233-05:00","created_by":"GGPrompts"},{"issue_id":"markdown-themes-ic9","depends_on_id":"markdown-themes-wpi","type":"parent-child","created_at":"2026-02-03T11:45:25.79516906-05:00","created_by":"GGPrompts"},{"issue_id":"markdown-themes-ic9","depends_on_id":"markdown-themes-2lc","type":"blocks","created_at":"2026-02-03T11:45:41.729309431-05:00","created_by":"GGPrompts"}]}
{"id":"markdown-themes-iiv","title":"Git graph visualization in right pane","description":"Add a GitKraken-style git graph that can be shown in the right pane of the split view. This transforms the right pane from file-only to a flexible context pane supporting files, git graph, diffs, and commit details.","design":"## Architecture\n\n### 1. Extend Right Pane Content Type\n\nChange `rightFile: string | null` to:\n```typescript\ntype RightPaneContent = \n  | { type: 'file'; path: string }\n  | { type: 'git-graph' }\n  | { type: 'diff'; base: string; head: string; file?: string }\n  | { type: 'commit'; hash: string };\n```\n\nUpdate `useSplitView.ts` and `PageStateContext.tsx` accordingly.\n\n### 2. TabzChrome Backend Endpoints\n\nAdd to TabzChrome backend:\n```\nGET /api/git/log?path=\u003crepo\u003e\u0026limit=50\u0026offset=0\nGET /api/git/diff?path=\u003crepo\u003e\u0026base=\u003csha\u003e\u0026head=\u003csha\u003e\nGET /api/git/show?path=\u003crepo\u003e\u0026commit=\u003csha\u003e\nGET /api/git/branches?path=\u003crepo\u003e\n```\n\n### 3. Git Graph Layout Algorithm\n\nPort from Maestro's approach:\n1. Fetch commits via `git log --all --topo-order --format=\"%H|%h|%s|%an|%ae|%aI|%P|%D\"`\n2. Process newestâ†’oldest, assign rails (columns)\n3. Track active columns for branch lines\n4. Connection types: straight, mergeLeft/Right (Bezier), offScreen\n5. 8 colors assigned by column index mod 8\n\n### 4. Components\n\n```\nsrc/components/git/\nâ”œâ”€â”€ GitGraph.tsx          # Main container\nâ”œâ”€â”€ GitGraphCanvas.tsx    # Canvas layer for rails/lines\nâ”œâ”€â”€ GitGraphRow.tsx       # Commit node + metadata\nâ”œâ”€â”€ CommitDetailPanel.tsx # Expanded commit view\nâ”œâ”€â”€ DiffViewer.tsx        # Side-by-side or unified diff\nâ””â”€â”€ graphLayout.ts        # Layout algorithm\n```\n\n### 5. Rendering Strategy\n\n- **Canvas layer** (background): Draw rails and Bezier curves\n- **DOM layer** (foreground): Commit nodes and text for accessibility\n- **Virtual scrolling**: Load 50 commits at a time, infinite scroll\n\n### 6. Node Styles\n\n- Normal: filled circle\n- Merge commit: hollow center\n- HEAD: double ring\n- Selected: thick border\n- Colors: 8-color palette based on rail index\n\n### 7. Interactions\n\n- Click commit â†’ show commit details in panel\n- Click file in commit â†’ switch right pane to diff view\n- Double-click file â†’ open in left pane\n- Toolbar buttons: checkout, revert, cherry-pick (spawn terminal)\n\n### 8. Integration Points\n\n- Toolbar: Add git graph toggle button\n- Sidebar context menu: \"Show in Git Graph\"\n- SourceControl page: Link to detailed graph view","acceptance_criteria":"- [ ] Git log endpoint returns paginated commits with parent refs\n- [ ] Layout algorithm correctly assigns rails to branches\n- [ ] Canvas renders branch lines with Bezier curves for merges\n- [ ] Commits display in virtual scrolling list\n- [ ] Click commit shows diff/details\n- [ ] Works with current workspace repo\n- [ ] Infinite scroll loads more commits\n- [ ] HEAD and current branch highlighted","status":"closed","priority":2,"issue_type":"feature","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-04T09:35:56.305277151-05:00","created_by":"GGPrompts","updated_at":"2026-02-04T10:05:33.774662823-05:00","closed_at":"2026-02-04T10:05:33.774662823-05:00","close_reason":"Completed","labels":["git","ui","v2"]}
{"id":"markdown-themes-ixu","title":"Add tab bar UI to right pane","description":"Add a tab bar component to the right pane header.\n\n## UI\n- Similar to left pane tab bar styling\n- Shows file tabs with close buttons\n- Active tab indicator\n- Maybe slightly different styling to distinguish from left pane\n\n## Key Files\n- src/pages/Files.tsx - Right pane section\n- src/components/TabBar.tsx - May need to extract/reuse","notes":"## Retro\n- What worked: Reusing the existing TabBar component pattern for the right pane\n- What was unclear: Initial linter conflicts during edit but resolved by re-reading files","status":"closed","priority":1,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-05T00:27:44.721439152-05:00","created_by":"GGPrompts","updated_at":"2026-02-05T00:55:51.733794235-05:00","closed_at":"2026-02-05T00:55:51.733794235-05:00","close_reason":"Added RightPaneTabBar component and integrated useRightPaneTabs hook into Files.tsx. Tab bar shows when right pane is in file mode, allowing users to see and switch between multiple files.","labels":["ready"],"dependencies":[{"issue_id":"markdown-themes-ixu","depends_on_id":"markdown-themes-d6c","type":"blocks","created_at":"2026-02-05T00:27:55.541592303-05:00","created_by":"GGPrompts"}]}
{"id":"markdown-themes-iz9","title":"Add web font loading system","description":"Create a centralized font loading system so themes can use their proper fonts.\n\n## Current State\n- Themes reference fonts like Playfair Display, Nunito Sans, DM Sans\n- But no @import or \u003clink\u003e tags load them\n- Falls back to system fonts\n\n## Implementation\n1. Add Google Fonts imports for all fonts used across themes\n2. Either in index.css with @import or index.html with \u003clink\u003e\n3. Use font-display: swap for performance\n4. Document which fonts each theme uses\n\n## Fonts Needed (from HTML styleguides)\n- Playfair Display (Dark Academia, Nordic)\n- Cormorant Garamond (Parchment, Art Deco)\n- Nunito Sans (Nordic)\n- DM Sans (Cyberpunk)\n- Space Grotesk (Glassmorphism)\n- etc. (each theme upgrade task will identify specific fonts)\n\n## Acceptance\n- Web fonts load correctly\n- Theme typography matches HTML styleguides\n- Performance acceptable (font-display: swap)","notes":"## Retro\n- What worked: Cross-referencing the htmlstyleguides HTML files to find the exact Google Fonts URLs for each theme.\n- What was unclear: Nothing major - the theme CSS files clearly showed which fonts were needed, and the HTML styleguides provided the exact import URLs.","status":"closed","priority":1,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-02T23:49:46.821056705-05:00","created_by":"GGPrompts","updated_at":"2026-02-03T00:01:39.468093066-05:00","closed_at":"2026-02-03T00:01:39.468093066-05:00","close_reason":"Added Google Fonts @import to src/index.css with 16 font families covering all 9 themes. Uses display=swap for non-blocking render. Fonts verified loading via HTTP 200 response from Google Fonts API.","labels":["infrastructure"]}
{"id":"markdown-themes-jdx","title":"Add LaTeX math rendering support","description":"Render LaTeX math expressions in markdown files using KaTeX.\n\n**SIMPLE IMPLEMENTATION** - Streamdown has a built-in plugin!\n\nSteps:\n1. npm install @streamdown/math katex\n2. Import in MarkdownViewer.tsx:\n   import { math } from '@streamdown/math'\n   import 'katex/dist/katex.min.css'\n3. Add to plugins: plugins={{ code: codePlugin, mermaid, math }}\n\nSupports:\n- Inline math: $E = mc^2$\n- Block math: $$\\int_0^\\infty ...$$\n\nGreat for when Claude explains math, physics, statistics, or any technical content with equations.\n\nReference: https://github.com/vercel/streamdown","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-02-03T23:00:22.437368242-05:00","created_by":"matt","updated_at":"2026-02-03T23:04:16.363820572-05:00","closed_at":"2026-02-03T23:04:16.363820572-05:00","close_reason":"Added @streamdown/math plugin with KaTeX"}
{"id":"markdown-themes-jqd","title":"Auto-open changed files as tabs in right pane, close on commit","description":"When Follow AI Edits is on, open changed files as separate tabs in the right pane instead of replacing. This creates a 'review queue' workflow:\n\n1. Left pane: navigation / working file\n2. Right pane: tabs for all changed files with diff highlighting\n3. On commit: auto-close tabs for files no longer in git changed list\n\nBenefits:\n- Natural review workflow before committing\n- Encourages frequent commits (clean up your tabs!)\n- Right pane becomes the 'watch Claude work' area\n\nImplementation notes:\n- Track which tabs were auto-opened via Follow mode\n- Watch git status changes (or hook into commit)\n- Close auto-opened tabs when their file is no longer in changed set","notes":"## Retro\n- What worked: Clean separation of concerns - Tab metadata for tracking auto-opened state, commit callback for cleanup trigger\n- What was unclear: closeTabsWithMetadata ended up not being needed since we need to match on file path + metadata together","status":"closed","priority":1,"issue_type":"feature","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-04T19:00:11.351343975-05:00","created_by":"GGPrompts","updated_at":"2026-02-04T23:10:50.696120915-05:00","closed_at":"2026-02-04T23:10:50.696120915-05:00","close_reason":"Auto-open tabs implemented: TabMetadata with autoOpened flag, WorkingTree onCommitSuccess callback, Files.tsx auto-opens changed files in split view and closes on commit","labels":["ready"]}
{"id":"markdown-themes-kgj","title":"Prompt Notebook","description":"Prompty-style prompt engineering workspace with YAML frontmatter, fillable {{variables}}, organized prompt library.","status":"closed","priority":2,"issue_type":"epic","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-03T11:44:42.89420002-05:00","created_by":"GGPrompts","updated_at":"2026-02-03T12:16:25.881350524-05:00","closed_at":"2026-02-03T12:16:25.881350524-05:00","close_reason":"Prompt Notebook complete: viewer, inline fields, library browser","labels":["frontend"]}
{"id":"markdown-themes-m76","title":"No error handling when conversation path does not exist","description":"Files.tsx:761-765 - handleViewConversation opens tab without checking if file exists. User sees error state after tab is already opened.","design":"Check file existence before opening, or show toast notification on load failure instead of inline error","notes":"## prepared.prompt\n\n## Context\nClicking View Conversation when the file does not exist opens a tab with an error state. Same issue with HOTKEYS.md button.\n\n## Task\nAdd file existence check before opening, or show toast/notification on failure. Fix both handleViewConversation and handleHotkeysClick.\n\n## Key Files\n- src/pages/Files.tsx:761-765 (handleViewConversation)\n- src/pages/Files.tsx:750-758 (handleHotkeysClick)\n- src/lib/api.ts (check for file existence API)\n\n## Strategy\nOption 1: Check file exists before opening (async check, slight delay)\nOption 2: Handle error in ViewerContainer and show user-friendly message\nOption 3: For HOTKEYS.md, embed default content as fallback\n\n## Related\nAlso fixes markdown-themes-1hk\n\n## When Done\nbd close markdown-themes-m76 markdown-themes-1hk --reason \"Added file existence handling for conversation and hotkeys buttons\"","status":"open","priority":2,"issue_type":"bug","created_at":"2026-02-05T11:41:28.454663728-05:00","updated_at":"2026-02-05T11:54:23.179226082-05:00","labels":["error-handling","ready","ux-bug"]}
{"id":"markdown-themes-ma7","title":"Add file type filters (Markdown, Media, Config)","description":"Add more filter presets to the sidebar filter menu.\n\n## Candidates\n- **Markdown**: `.md`, `.mdx` files\n- **Media**: images (`.png`, `.jpg`, `.gif`, `.webp`, `.svg`), audio (`.mp3`, `.wav`, `.ogg`), video (`.mp4`, `.webm`, `.mov`)\n- **Config**: `.json`, `.yaml`, `.yml`, `.toml`, `.env`, `.*rc`\n- **Tests**: `.test.ts`, `.spec.ts`, `__tests__/`, `.test.tsx`\n\n## Implementation\n1. Add patterns to `src/lib/filters.ts`\n2. Extend `FilterId` type union\n3. Add to `FILTERS` array\n\n## Notes\n- Follow existing pattern structure (directory `/`, extension `.ext`, exact filename)\n- Consider which filters make sense without cluttering the menu\n- Media filter particularly useful for finding assets","notes":"## prepared.prompt\n\n## Context\nThe sidebar has a filter menu but limited presets. Users want Markdown, Media, and Config filters.\n\n## Task\nAdd new file type filter presets to the filter system.\n\n## Key File\n- src/lib/filters.ts - add new filter definitions\n- src/lib/filters.test.ts - add tests for new filters\n\n## Implementation\n1. Update FilterId type to include: \"markdown\" | \"media\" | \"config\"\n2. Add pattern constants:\n   - MARKDOWN_PATTERNS = [\".md\", \".mdx\"]\n   - MEDIA_PATTERNS = [\".png\", \".jpg\", \".gif\", \".webp\", \".svg\", \".mp4\", \".webm\", \".mov\", \".mp3\", \".wav\", \".ogg\"]\n   - CONFIG_PATTERNS = [\".json\", \".yaml\", \".yml\", \".toml\", \".env\"]\n3. Add FilterDefinition objects to FILTERS array\n4. Add tests for each new filter\n\n## When Done\nRun `npm run test:run` then close issue: bd close markdown-themes-ma7 --reason \"Added Markdown, Media, and Config filter presets\"","status":"closed","priority":2,"issue_type":"feature","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-04T11:09:50.620812302-05:00","created_by":"GGPrompts","updated_at":"2026-02-04T11:21:06.535666958-05:00","closed_at":"2026-02-04T11:21:06.535666958-05:00","close_reason":"Added Markdown, Media, and Config filter presets to src/lib/filters.ts with corresponding tests in filters.test.ts. All 135 tests pass.","labels":["ready"]}
{"id":"markdown-themes-mq1","title":"Upgrade themes to match HTML styleguide quality","description":"Deep upgrade all 9 existing themes to capture the rich visual feel of the HTML styleguides at ~/projects/htmlstyleguides.\n\n## The Gap\nCurrent themes have the right architecture (CSS variables) but lack:\n- **Web fonts** - themes reference fonts but fallback to system fonts\n- **Texture/depth** - no washi paper, grain, patterns, or meaningful shadows\n- **Code syntax matching** - all code blocks look the same regardless of theme\n- **Consistent spacing** - hardcoded values instead of a scale\n\n## Reference\n- HTML styleguides: ~/projects/htmlstyleguides/styles/\n- Each has its own .html file with embedded CSS\n- Study the patterns: fonts, shadows, textures, spacing, border-radius, transitions\n\n## Success Criteria\n- Each theme feels as rich and distinctive as its HTML styleguide counterpart\n- Fonts actually load (Google Fonts imports)\n- Code blocks have theme-matched Shiki syntax highlighting\n- Spacing follows a consistent scale\n- Visual depth through shadows/textures appropriate to the theme","status":"closed","priority":1,"issue_type":"epic","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-02T23:47:34.390135309-05:00","created_by":"GGPrompts","updated_at":"2026-02-03T00:08:52.776625176-05:00","closed_at":"2026-02-03T00:08:52.776625176-05:00","close_reason":"All 9 theme upgrades complete: Dark Academia, Cyberpunk, Nordic, Art Deco, Glassmorphism, Retro Futurism, Cosmic, Noir, Parchment. Each theme now matches its HTML styleguide with proper fonts, textures, shadows, and color palettes."}
{"id":"markdown-themes-mzd","title":"useFileWatcher WebSocket errors not logged","description":"useFileWatcher.ts:198-202 - WebSocket onerror handler is empty or minimal. Errors are silently swallowed, making debugging connection issues difficult.","design":"Add console.error logging with error details and consider exposing error state","notes":"## prepared.prompt\n\nFix together with markdown-themes-bca. See that issue for combined prompt.","status":"open","priority":2,"issue_type":"bug","created_at":"2026-02-05T11:41:19.526076667-05:00","updated_at":"2026-02-05T11:53:26.119565143-05:00","labels":["error-handling","ready","websocket"]}
{"id":"markdown-themes-n38","title":"Unify filters to show project + home level files","description":"Refactor Claude Code and Prompts filters to show merged view of project-level AND home-level files.\n\nClaude Code filter:\n- Project: .claude/, CLAUDE.md, plugin.json, .mcp.json\n- Home: ~/.claude/, ~/CLAUDE.md, user plugins\n\nPrompts filter:\n- Project: .prompts/\n- Home: ~/.prompts/\n\nThis consolidates Prompt Notebook into Files section as just a filter, reducing navigation complexity.","notes":"## Retro\n- What worked: The existing filter infrastructure was well-designed and easy to extend. Adding homePath support and scope headers was straightforward.\n- What was unclear: Initially unclear how to distinguish extension patterns (.prompty) from exact filename patterns (.mcp.json) - solved by counting dots in the pattern.","status":"closed","priority":2,"issue_type":"feature","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-03T14:10:37.765307347-05:00","created_by":"GGPrompts","updated_at":"2026-02-03T14:34:26.847694704-05:00","closed_at":"2026-02-03T14:34:26.847694704-05:00","close_reason":"Implemented merged project/home file trees for Claude Code and Prompts filters. Added homePaths config to filters, ScopedFileTreeNode with scope headers, extension pattern matching (.prompty), and home directory fetching in useFileFilter.","labels":["frontend","ready","refactor"]}
{"id":"markdown-themes-n47","title":"Two auto-open effects can race and open same file twice","description":"Files.tsx:400-551 - workspaceStreaming effect and subagentWatcher effect can both trigger on same file change, potentially opening duplicate tabs.","design":"Add deduplication logic or combine into single effect that handles both sources","notes":"## prepared.prompt\n\n## Context\nTwo useEffect hooks can both trigger on the same file change, potentially opening duplicate tabs.\n\n## Task\nAdd deduplication logic to prevent both workspaceStreaming and subagentWatcher effects from opening the same file.\n\n## Key Files\n- src/pages/Files.tsx:400-551 (both effects)\n\n## Strategy\n1. Add shared ref to track recently auto-opened files with timestamps\n2. Before auto-opening, check if file was opened in last 500ms\n3. Skip if already opened recently\n\n## Pattern\n```typescript\nconst recentlyAutoOpenedRef = useRef\u003cMap\u003cstring, number\u003e\u003e(new Map());\n\n// In both effects, before opening:\nconst now = Date.now();\nconst lastOpened = recentlyAutoOpenedRef.current.get(filePath);\nif (lastOpened \u0026\u0026 now - lastOpened \u003c 500) return;\nrecentlyAutoOpenedRef.current.set(filePath, now);\n```\n\n## When Done\nbd close markdown-themes-n47 --reason \"Added deduplication for auto-open effects\"","status":"open","priority":2,"issue_type":"bug","created_at":"2026-02-05T11:41:18.13735677-05:00","updated_at":"2026-02-05T11:54:30.176519295-05:00","labels":["follow-mode","race-condition","ready"],"dependencies":[{"issue_id":"markdown-themes-n47","depends_on_id":"markdown-themes-0dl","type":"blocks","created_at":"2026-02-05T11:51:30.450017137-05:00","created_by":"daemon"},{"issue_id":"markdown-themes-n47","depends_on_id":"markdown-themes-cqs","type":"blocks","created_at":"2026-02-05T11:51:31.328244705-05:00","created_by":"daemon"},{"issue_id":"markdown-themes-n47","depends_on_id":"markdown-themes-xo1","type":"blocks","created_at":"2026-02-05T11:51:32.166906446-05:00","created_by":"daemon"}]}
{"id":"markdown-themes-n6w","title":"Port Pixel Art theme","description":"8-bit NES aesthetic, \"Press Start 2P\" font, chunky borders.","notes":"## Retro\n- What worked: Clear source HTML with well-documented CSS variables made porting straightforward. Using cyberpunk.css as reference for CRT effects was helpful.\n- What was unclear: The exportHtml.ts file needed to be updated for HTML export support - discovered this from TypeScript errors during build.","status":"closed","priority":2,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-03T11:45:02.426138789-05:00","created_by":"GGPrompts","updated_at":"2026-02-03T12:02:43.328556969-05:00","closed_at":"2026-02-03T12:02:43.328556969-05:00","close_reason":"Ported Pixel Art theme with NES palette, CRT scanlines, pixel borders, and Press Start 2P font","labels":["ready","theme"],"dependencies":[{"issue_id":"markdown-themes-n6w","depends_on_id":"markdown-themes-dsk","type":"blocks","created_at":"2026-02-03T11:45:02.445783073-05:00","created_by":"GGPrompts"},{"issue_id":"markdown-themes-n6w","depends_on_id":"markdown-themes-dsk","type":"parent-child","created_at":"2026-02-03T11:45:39.491382693-05:00","created_by":"GGPrompts"}]}
{"id":"markdown-themes-ng7","title":"Add /api/claude/session endpoint to TabzChrome","description":"Add HTTP endpoint to expose Claude session info from /tmp/claude-code-state/.\n\n## Endpoint\nGET /api/claude/session?pane=%3\n\n## Response\n{ \"sessionId\": \"uuid\", \"workingDir\": \"/path/to/project\", \"conversationPath\": \"~/.claude/projects/.../uuid.jsonl\" }\n\n## Implementation\nRead from /tmp/claude-code-state/{pane}.json (same as conductor/get_worker_status MCP tool).\n\n## Location\n~/projects/TabzChrome/backend/server.js","status":"closed","priority":1,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-04T23:40:04.559962047-05:00","created_by":"GGPrompts","updated_at":"2026-02-05T00:06:15.429619862-05:00","closed_at":"2026-02-05T00:06:15.429619862-05:00","close_reason":"Added /api/claude/session endpoint to TabzChrome - returns sessionId, workingDir, conversationPath"}
{"id":"markdown-themes-nmq","title":"Click commit in git graph to view details","description":"Add expandable commit details to git graph rows with action buttons.\n\n## Design\nClick a commit row to expand it inline, showing:\n- Full commit message (subject + body)\n- Author and date\n- List of files changed with status (A/M/D)\n- Click file to view diff (could open in left pane or show inline)\n\n## UI Structure\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ â— abc123  feat: add git graph        GGPrompts  2h â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ â–¼ def456  fix: correct API parsing   GGPrompts  3h â”‚\nâ”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚   â”‚ Full commit message here...                     â”‚\nâ”‚   â”‚                                                 â”‚\nâ”‚   â”‚ Files changed:                                  â”‚\nâ”‚   â”‚  M src/components/git/GitGraph.tsx    [View]   â”‚\nâ”‚   â”‚  M src/lib/api.ts                     [View]   â”‚\nâ”‚   â”‚                                                 â”‚\nâ”‚   â”‚ [Copy Hash]  [Gitlogue]                        â”‚\nâ”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ â— ghi789  refactor: clean up types   GGPrompts  4h â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n## Behavior\n- Click row to expand/collapse\n- Multiple rows can be expanded at once\n- Files list shows status icon (A/M/D/R) and path\n- Click file to view diff\n\n## Action Buttons (merged from hvo, an3)\n- **Copy Hash**: Click to copy full commit hash to clipboard, show brief feedback\n- **Gitlogue**: Spawn terminal with gitlogue to replay commit (use POST /api/spawn)\n\n## Backend\n- Commit details: GET /api/git/commit/:hash?path=...\n- Spawn terminal: POST /api/spawn\n\n## Implementation\n- Add expanded state to GitGraphRow or GitGraph\n- Create CommitDetails sub-component for expanded content\n- Fetch commit details on expand (with loading state)\n- Add copy-to-clipboard with feedback\n- Add gitlogue spawn button (reference SourceControl page)","status":"closed","priority":2,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-04T10:13:33.057993022-05:00","created_by":"GGPrompts","updated_at":"2026-02-04T10:32:00.311947161-05:00","closed_at":"2026-02-04T10:32:00.311947161-05:00","close_reason":"Implemented expandable commit details with files list, copy hash, and gitlogue spawn","labels":["git","ui"]}
{"id":"markdown-themes-ocn","title":"Export to styled HTML/PDF","description":"Export current view as a standalone HTML file or PDF with theme styles embedded","notes":"## Retro\n- What worked: Clear task breakdown into exportHtml utility, MarkdownViewer ref, Toolbar button, and App.tsx wiring\n- What was unclear: Nothing major - the existing codebase structure was well organized","status":"closed","priority":4,"issue_type":"feature","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-02T18:44:29.798838193-05:00","created_by":"GGPrompts","updated_at":"2026-02-02T19:20:23.087306712-05:00","closed_at":"2026-02-02T19:20:23.087306712-05:00","close_reason":"Added HTML export with embedded theme styles and syntax highlighting","labels":["feature"]}
{"id":"markdown-themes-ogs","title":"Art Deco theme: Poiret One font renders with rough/wobbly edges","description":"The Poiret One font in the Art Deco theme renders with rough, uneven, wobbly edges in the markdown-themes app, but renders cleanly in the static HTML style guide at ~/projects/htmlstyleguides/styles/art-deco.html.\n\n**Visual comparison:**\n- App: Letters have variable stroke widths and wobbly curves\n- HTML style guide: Clean, smooth, geometric strokes\n\n**Screenshots saved to:** /mnt/c/Users/marci/Downloads/tabz/screenshots/","design":"## Root Cause Investigation\n\nUsed TabzChrome MCP tools to compare computed styles between app and HTML style guide.\n\n### Confirmed Same:\n- Font family: `\"Poiret One\", Didot, cursive`\n- Font weight: `400`\n- Font synthesis: `weight style small-caps`\n- Text shadow: `rgba(212, 175, 55, 0.3) 0px 0px 20px`\n\n### Key Finding:\nStreamdown adds `class=\"font-semibold\"` to headings, which sets `font-weight: 600`. Since Poiret One only has weight 400, the browser was synthesizing bold - causing rough edges.\n\n### What We Tried (none fixed it):\n\n1. **Added `font-weight: 400 !important`** to `.theme-art-deco .prose h1/h2/h3`\n   - Result: Computed style shows 400, but still rough\n\n2. **Added `font-synthesis: none`** to prevent browser synthesis\n   - Result: Still rough\n\n3. **Added `--font-display` variable** (was missing from art-deco.css)\n   - Result: Font loads correctly, but still rough\n\n4. **Removed `-webkit-font-smoothing: antialiased`**\n   - HTML style guide doesn't have this set\n   - Result: Still rough\n\n5. **Temporarily disabled crosshatch pattern background**\n   - Thought GPU rendering of complex gradients might affect text\n   - Result: Still rough\n\n6. **Changed zoom to transform: scale()** in MarkdownViewer.tsx\n   - Only applies when fontSize != 100%, so not relevant\n\n### Remaining Suspects:\n- Something in Tailwind v4 preflight/base styles\n- Vite's CSS processing\n- Streamdown's internal rendering\n- Browser-specific rendering (WSL/Windows)\n\n### Useful Debug Commands:\n```bash\n# Compare h1 styles between app and HTML guide\nmcp-cli call plugin_tabz_tabz/tabz_get_element '{\"selector\": \".prose h1\", \"includeStyles\": true}'\n\n# Take screenshots for comparison\nmcp-cli call plugin_tabz_tabz/tabz_screenshot '{\"selector\": \".prose h1\"}'\n```","acceptance_criteria":"- [ ] Art Deco h1/h2/h3 headings render with clean, smooth edges matching the HTML style guide\n- [ ] Poiret One font displays without browser font synthesis artifacts\n- [ ] Fix applies to other themes using single-weight display fonts if applicable","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-02-03T21:44:00.3488705-05:00","updated_at":"2026-02-03T22:13:03.883552509-05:00","closed_at":"2026-02-03T22:13:03.883552509-05:00","close_reason":"Fixed: Malformed Google Fonts URL had duplicate :wght@ spec for Karla, breaking URL parsing. Fonts after Karla (including Poiret One) never loaded, falling back to Comic Sans MS.","labels":["art-deco","font-rendering","theme"]}
{"id":"markdown-themes-oqm","title":"Add 'Changed' filter to file tree","description":"Add a filter option to the file tree sidebar that shows only modified/changed files.\n\nContext:\n- Files with unsaved changes already show with circle indicators\n- Would complement Follow AI Edits - see all files Claude touched\n- Quick way to review what changed in a session\n\nImplementation:\n- Add 'Changed' option to the filter dropdown in Sidebar.tsx\n- Filter files based on git status (modified, added, untracked)\n- Or track files that received file-change WebSocket messages during session\n- Could use existing git working tree data if available","notes":"## Retro\n- What worked: Clear implementation plan, straightforward feature addition\n- What was unclear: Nothing significant - the task was well-scoped","status":"closed","priority":2,"issue_type":"feature","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-04T17:18:35.113890169-05:00","created_by":"GGPrompts","updated_at":"2026-02-04T17:30:57.175827398-05:00","closed_at":"2026-02-04T17:30:57.175827398-05:00","close_reason":"Changed filter shows git-modified + WebSocket changed files","dependencies":[{"issue_id":"markdown-themes-oqm","depends_on_id":"markdown-themes-h96","type":"blocks","created_at":"2026-02-04T17:20:25.104170283-05:00","created_by":"daemon"}]}
{"id":"markdown-themes-oxj","title":"Expand last thinking block in conversation viewer","description":"Show thinking blocks expanded in conversation viewer, at least the last one.\n\n## Current\nThinking blocks render as collapsed \u003cdetails\u003e elements.\n\n## Desired\n- Last thinking block should be expanded by default\n- So users can watch Claude think in real-time during live sessions\n- Previous thinking blocks can stay collapsed to save space\n\n## Implementation\n- In formatThinkingBlock(), add \"open\" attribute for last block\n- Or track block index in formatAssistantMessage() and pass isLast flag\n- Alternative: expand ALL thinking blocks, let user collapse manually\n\n## Key Files\n- src/utils/conversationMarkdown.ts - formatThinkingBlock function","notes":"## prepared.prompt\n\n## Context\nThinking blocks render collapsed by default. During live sessions, users want to watch Claude think - the LAST thinking block should be expanded.\n\n## Task\nAdd `open` attribute to the last thinking block in conversation viewer.\n\n## Key Files\n- src/utils/conversationMarkdown.ts (lines 158-188, 193-200)\n  - formatThinkingBlock() - add isLast parameter\n  - formatAssistantMessage() - track which block is last\n\n## Implementation\n1. Modify formatThinkingBlock signature: `formatThinkingBlock(thinking: string, isExpanded = false)`\n2. Add open attribute: `\u003cdetails${isExpanded ? \" open\" : \"\"}\u003e`\n3. In formatAssistantMessage, find the last thinking block and pass isExpanded=true\n4. Option: expand ALL thinking blocks for live sessions (simpler)\n\n## When Done\nbd close markdown-themes-oxj --reason \"Last thinking block now expanded by default\"","status":"closed","priority":2,"issue_type":"feature","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-05T00:44:09.792655963-05:00","created_by":"GGPrompts","updated_at":"2026-02-05T00:50:32.88112359-05:00","closed_at":"2026-02-05T00:50:32.88112359-05:00","close_reason":"Last thinking block now expanded by default","labels":["ready"]}
{"id":"markdown-themes-p9i","title":"Archive conversation files outside .claude/projects","description":"Add ability to save/archive conversation JSONL files to a location outside ~/.claude/projects/ so the projects folder can be cleaned up without losing valuable conversations.\n\n## Use Cases\n- Clean up .claude/projects without losing important convos\n- Keep conversations linked to significant beads issues\n- Review past agent work later\n\n## Ideas\n- On issue close: prompt to archive associated conversation\n- Save to ~/.claude/archive/ or custom path\n- Store archive path in issue metadata\n- /save-conversation command as simple first step\n- markdown-themes 'Archives' browser\n\n## Integration\n- Link archived convos to beads issues\n- Support for subagent conversations too","notes":"## Retro\n- What worked: Clear task decomposition, existing patterns in codebase made it easy to extend\n- What was unclear: How to derive default archive location without knowing username at compile time - solved by deriving from lastWorkspace","status":"closed","priority":2,"issue_type":"feature","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-05T01:25:01.782425975-05:00","created_by":"GGPrompts","updated_at":"2026-02-05T09:50:25.376754115-05:00","closed_at":"2026-02-05T09:50:25.376754115-05:00","close_reason":"Implemented conversation archiving with ArchiveModal component, archive settings in AppStoreContext, and Archive button in Toolbar. Users can now archive JSONL conversations from ~/.claude/projects/ to a configurable archive location.","labels":["ready"]}
{"id":"markdown-themes-q3x","title":"Prompt metadata support","description":"Parse YAML frontmatter for AI prompt context. Display prompt type, model, date in a header bar","notes":"## Retro\n- What worked: Simple regex-based YAML parsing avoided adding dependencies while handling common frontmatter patterns well\n- What was unclear: Nothing significant - the task requirements were clear","status":"closed","priority":3,"issue_type":"feature","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-02T18:44:17.455320135-05:00","created_by":"GGPrompts","updated_at":"2026-02-02T19:15:37.01617737-05:00","closed_at":"2026-02-02T19:15:37.01617737-05:00","close_reason":"Added frontmatter parsing and MetadataBar component with collapsible header","labels":["ai-features"]}
{"id":"markdown-themes-qff","title":"Noir theme: fix selected file visibility in PromptLibrary","description":"The Noir theme has poor contrast for selected files in the Prompts page sidebar.\n\n## Problem\n- Selected file uses red text on red background (nearly invisible)\n- Same issue was fixed in Sidebar.tsx for Files page\n\n## Fix needed\nApply the same styling fix to PromptLibrary.tsx:\n- Use white text with red background for selected state in Noir theme\n- Match the fix applied to the main file tree sidebar\n\n## Files\n- `src/components/PromptLibrary.tsx` - needs the fix\n- `src/components/Sidebar.tsx` - has the working fix (reference)\n- `src/themes/noir.css` - theme styles","notes":"## prepared.prompt\n\n## Context\nThe Noir theme has poor contrast for selected files - red text on red background. The fix exists in Sidebar.tsx.\n\n## Task\nCopy the CSS variable pattern from Sidebar.tsx to PromptLibrary.tsx for selected file styling.\n\n## Key Files\n- src/components/PromptLibrary.tsx (lines 287-289, 309) - needs fix\n- src/components/Sidebar.tsx (lines 254-255) - reference with working fix\n\n## What to change\nReplace hardcoded `var(--accent)` with:\n- backgroundColor: `var(--selection-bg, color-mix(in srgb, var(--accent) 20%, transparent))`\n- color: `var(--selection-text, var(--accent))`\n\n## When Done\nRun `npm run test:run` then close issue: bd close markdown-themes-qff --reason \"Applied selection-bg/selection-text CSS variables\"","status":"closed","priority":1,"issue_type":"bug","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-04T11:14:32.668898154-05:00","created_by":"GGPrompts","updated_at":"2026-02-04T11:20:31.898700015-05:00","closed_at":"2026-02-04T11:20:31.898700015-05:00","close_reason":"Applied selection-bg/selection-text CSS variables to PromptLibrary.tsx for proper Noir theme contrast","labels":["ready"]}
{"id":"markdown-themes-qxz","title":"Add expand all/collapse all for file tree","description":"Add expand all and collapse all buttons to the Sidebar file tree header. Useful for quickly navigating large directory structures.","notes":"## Retro\n- What worked: The issue had clear implementation details with code examples that made it easy to follow\n- What was unclear: Nothing - the acceptance criteria were well-defined","status":"closed","priority":2,"issue_type":"feature","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-03T12:45:54.247186322-05:00","created_by":"GGPrompts","updated_at":"2026-02-03T12:51:22.736923567-05:00","closed_at":"2026-02-03T12:51:22.736923567-05:00","close_reason":"Added expand all and collapse all buttons to sidebar file tree. Lifted expanded state from TreeItem to Sidebar component, added ChevronsDown/ChevronsUp icon buttons with tooltips in the header."}
{"id":"markdown-themes-r0i","title":"Missing try-catch for jsonlToMarkdown parsing","description":"ConversationMarkdownViewer.tsx:115 - jsonlToMarkdown called in useMemo without try-catch. Malformed JSONL crashes the component.","design":"Wrap in try-catch, return empty string on error, log error for debugging","notes":"## prepared.prompt\n\n## Context\nMalformed JSONL can crash the ConversationMarkdownViewer component.\n\n## Task\nWrap jsonlToMarkdown call in useMemo with try-catch. Return empty string on error and log for debugging.\n\n## Key Files\n- src/components/viewers/ConversationMarkdownViewer.tsx:115\n\n## Pattern\n```typescript\nconst markdown = useMemo(() =\u003e {\n  try {\n    return jsonlToMarkdown(throttledContent);\n  } catch (err) {\n    console.error('Failed to parse conversation JSONL:', err);\n    return '';\n  }\n}, [throttledContent]);\n```\n\n## When Done\nbd close markdown-themes-r0i --reason \"Added try-catch for jsonlToMarkdown\"","status":"open","priority":2,"issue_type":"bug","created_at":"2026-02-05T11:41:24.045767566-05:00","updated_at":"2026-02-05T11:53:48.763332046-05:00","labels":["conversation-viewer","error-handling","ready"]}
{"id":"markdown-themes-r24","title":"Add file type icons with colors","description":"Add colored icons for different file types in the file tree and tabs. Use TabzChrome icon colors which work on both light and dark themes.\n\nReference: TabzChrome extension/dashboard/utils/fileTypeUtils.ts and fileViewerUtils.ts for icon mapping and colors.","notes":"## prepared.prompt\n\nAdd colored file type icons to the file tree and tabs.\n\n**Reference:** Port icon mapping from TabzChrome:\n- `~/projects/TabzChrome/extension/dashboard/utils/fileTypeUtils.ts` - file type detection\n- `~/projects/TabzChrome/extension/dashboard/utils/fileViewerUtils.ts` - icon/color mapping\n\n**TabzChrome color scheme (works on light + dark):**\n- Green: code files (js, ts, py, etc.)\n- Blue: markdown, docs\n- Orange: JSON, config\n- Yellow: images\n- Purple: video\n- Emerald: CSV, data\n- Gray: unknown/text\n\n**Files to create/modify:**\n- `src/utils/fileIcons.ts` - icon + color mapping by extension\n- `src/components/Sidebar.tsx` - render icons in tree\n- `src/components/TabBar.tsx` - render icons in tabs\n\n**Implementation:**\n1. Create fileIcons.ts with extension â†’ {icon, color} map\n2. Use Lucide icons (FileCode, FileText, FileImage, etc.)\n3. Apply colors as inline style or CSS class\n4. Keep colors hardcoded (not theme variables) since they need to work across all themes\n\n**Acceptance criteria:**\n- [ ] File tree shows colored icons by type\n- [ ] Tabs show matching icons\n- [ ] Colors readable on all themes (light + dark)\n- [ ] Fallback icon for unknown types\n\nWhen done, commit and run `bd close markdown-themes-r24`.","status":"closed","priority":3,"issue_type":"feature","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-03T14:13:03.563778982-05:00","created_by":"GGPrompts","updated_at":"2026-02-03T14:36:36.960266185-05:00","closed_at":"2026-02-03T14:36:36.960266185-05:00","close_reason":"Added colored file type icons to file tree and tabs. Created src/utils/fileIcons.ts with extension-to-icon mapping using Lucide icons. Colors: green for code, blue for markdown, orange for JSON/config, yellow for images, purple for video, emerald for data files, gray for unknown. Updated Sidebar.tsx and TabBar.tsx to render colored icons.","labels":["frontend","nice-to-have","ready"]}
{"id":"markdown-themes-r77","title":"[Gate] Test Landing Page routing","description":"Run tests for landing page navigation, routing, and section switching.","status":"closed","priority":1,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-03T11:48:22.144969336-05:00","created_by":"GGPrompts","updated_at":"2026-02-03T12:03:55.041488996-05:00","closed_at":"2026-02-03T12:03:55.041488996-05:00","close_reason":"Build verified, routing works","labels":["gate:test-runner"],"dependencies":[{"issue_id":"markdown-themes-r77","depends_on_id":"markdown-themes-xsf","type":"parent-child","created_at":"2026-02-03T11:48:42.595063288-05:00","created_by":"GGPrompts"},{"issue_id":"markdown-themes-r77","depends_on_id":"markdown-themes-d40","type":"blocks","created_at":"2026-02-03T11:52:20.328928695-05:00","created_by":"GGPrompts"}]}
{"id":"markdown-themes-rbw","title":"Add file context menu options for chat integration","description":"Add right-click context menu options on files for quick chat integration with TabzChrome.\n\n## Context Menu Options\n- **Copy path** â†’ copies file path to clipboard\n- **Copy @path** â†’ copies with @ prefix (forces Claude to read full file)\n- **Send to Chat** â†’ queues path to TabzChrome chat input via WebSocket\n- **Send @path to Chat** â†’ queues with @ prefix for auto-read\n\n## Why Not Drag?\n- File tree is on opposite side of screen from terminals\n- Context menu is more discoverable\n- Already have context menu infrastructure\n\n## Implementation\n- Add options to existing Sidebar context menu (or create one if not present)\n- Use `queueToChat()` from `lib/api.ts` for send actions\n- Use `navigator.clipboard.writeText()` for copy actions\n\n## Reference\n- TabzChrome FileTree has full context menu: FileTreeContextMenu.tsx\n- Has copy path, send to chat, paste to terminal, etc.","status":"closed","priority":3,"issue_type":"feature","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-04T12:13:15.257937102-05:00","created_by":"GGPrompts","updated_at":"2026-02-04T12:17:39.965730615-05:00","closed_at":"2026-02-04T12:17:39.965730615-05:00","close_reason":"Already implemented - context menu has Copy Path, Copy @Path, Send to Chat, Paste to Terminal"}
{"id":"markdown-themes-rf2","title":"Audio player fails to load .wav files","description":"Audio player flashes up briefly then shows \"Failed to load audio file\" when trying to play .wav files.\n\n## Symptoms\n- Open a .wav file in the viewer\n- Audio player UI appears briefly\n- Then shows error: \"Failed to load audio file\"\n\n## Investigation Areas\n- src/components/viewers/AudioViewer.tsx - check how audio is loaded\n- Check if API endpoint for serving audio files exists/works\n- May be CORS issue or path encoding problem\n- Compare with how ImageViewer loads files (might use similar pattern)\n\n## To Reproduce\n1. Navigate to a .wav file in the sidebar\n2. Click to open\n3. Observe flash then error","notes":"## Retro\n- What worked: The issue notes clearly identified the root cause (wrong API endpoint) and pointed to ImageViewer as a working example to follow\n- What was unclear: Nothing - the prepared.prompt had excellent context including the specific line number and potential fix","status":"closed","priority":2,"issue_type":"bug","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-04T12:22:49.735509992-05:00","created_by":"GGPrompts","updated_at":"2026-02-04T12:27:12.140451462-05:00","closed_at":"2026-02-04T12:27:12.140451462-05:00","close_reason":"Changed AudioViewer to fetch audio via /api/audio/local-file endpoint (returns dataUri) instead of /api/files/content?raw=true, matching the pattern used by ImageViewer","labels":["ready"]}
{"id":"markdown-themes-rgy","title":"Implement Read Aloud (TTS) action","description":"Add 'Read Aloud' context menu action for TTS playback of file content.\n\nUse TabzChrome's tabz_speak MCP tool or backend TTS endpoint.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-03T22:52:31.661461363-05:00","created_by":"matt","updated_at":"2026-02-03T23:16:18.226208766-05:00","closed_at":"2026-02-03T23:16:18.226208766-05:00","close_reason":"Added Read Aloud TTS action to context menu","dependencies":[{"issue_id":"markdown-themes-rgy","depends_on_id":"markdown-themes-eq5","type":"blocks","created_at":"2026-02-03T22:52:38.912160067-05:00","created_by":"matt"}]}
{"id":"markdown-themes-s0c","title":"Retro Futurism theme: fix remaining contrast issues","description":"- Open File button above sidebar tree shows white on white text when hovered\n- Fetch/Pull/Push buttons on Source Control page use faded black text on blue bubbles (needs white text)","status":"closed","priority":3,"issue_type":"bug","created_at":"2026-02-03T17:38:37.891155332-05:00","updated_at":"2026-02-03T17:43:30.034921933-05:00","closed_at":"2026-02-03T17:43:30.034921933-05:00","close_reason":"Fixed both contrast issues: 1) Open File button now preserves orange gradient and white text on hover via higher-specificity CSS selectors; 2) Fetch/Pull/Push buttons on Source Control page now have white text on glossy blue backgrounds via attribute selectors targeting title attributes.","labels":["accessibility","theme"]}
{"id":"markdown-themes-so7","title":"Create conversationMarkdown.ts transformer","description":"Transform Claude Code JSONL conversations to themed markdown.\n\n## Input\nJSONL with `type: user` and `type: assistant` messages from `~/.claude/projects/*/*.jsonl`\n\n## Output Format\n```md\n## User\nUser message here\n\n## Assistant\nAssistant response with code blocks...\n\n\u003cdetails\u003e\n\u003csummary\u003eThinking\u003c/summary\u003e\nCollapsible thinking block\n\u003c/details\u003e\n\n### Tool: Bash\n```bash\ncommand here\n```\n```\n\n## Key Logic\n- Filter for user/assistant messages (ignore progress events)\n- Format thinking blocks as collapsible \u003cdetails\u003e\n- Format tool_use as ### Tool: {name} subheaders\n- Handle mixed content arrays (text + tool_use + thinking)\n- Pretty-print JSON tool inputs","notes":"## Retro\n- What worked: Clear task specification with input/output examples made implementation straightforward\n- What was unclear: Nothing - the content block types and format were well specified","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-04T23:16:17.213579664-05:00","updated_at":"2026-02-04T23:24:45.8072429-05:00","closed_at":"2026-02-04T23:24:45.8072429-05:00","close_reason":"Created conversationMarkdown.ts with jsonlToMarkdown function that transforms JSONL conversation content to themed markdown. Handles user messages, assistant messages with text/thinking/tool_use/tool_result blocks, and summary messages. Includes 22 passing tests.","labels":["ready"]}
{"id":"markdown-themes-ssa","title":"Render Claude Code conversations as themed markdown","description":"Render live Claude Code conversations as beautifully themed markdown files.\n\n## Vision\nInstead of watching Claude edit files, watch the entire conversation stream as a themed markdown document. See chat flow in Dark Academia, Cosmic, Noir, etc.\n\n## Architecture Idea\n```\ntmux (detached)              markdown-themes\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚  Claude Code    â”‚          â”‚  Watch .md file â”‚\nâ”‚  session        â”‚â”€â”€â”€â”€â”€â”€â”€â–º  â”‚  Render themed  â”‚\nâ”‚                 â”‚  stream  â”‚  conversation   â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n## Conversation â†’ Markdown Format\n```md\n## User\nWhat's the bug in this code?\n\n## Assistant\nLooking at \\`src/app.ts\\`...\n\n\\`\\`\\`ts\n// syntax highlighted code\n\\`\\`\\`\n\n---\n\n## User\nCan you fix it?\n```\n\n## Implementation Options\n1. **Claude Code hook** - Output conversation to .md file as it streams\n2. **Capture tmux pane** - Parse terminal output into markdown\n3. **JSONL conversation log** - Convert to markdown on the fly\n4. **Custom Claude Code wrapper** - Intercept and format output\n\n## Considerations\n- Need to handle streaming partial messages\n- Tool calls/results formatting\n- Thinking blocks (collapse or show?)\n- Images/artifacts\n- Would pair well with JSONL viewer (markdown-themes-dtn)\n\n## Related\n- Auto-open edited files (markdown-themes-gtt) - could auto-open conversation file\n- JSONL viewer (markdown-themes-dtn) - alternative raw view","notes":"## prepared.prompt\n\n## Context\nWatch Claude Code conversations stream as beautifully themed markdown - see the chat flow in Dark Academia, Cosmic, Noir, etc.\n\n## Task\nResearch and prototype rendering Claude Code conversations as themed markdown.\n\n## Exploration Areas\n1. Claude Code output formats - hooks, JSONL logs, tmux capture\n2. Conversation to markdown format (## User, ## Assistant sections)\n3. Real-time streaming challenges (partial messages, tool calls)\n4. Integration approach (hook outputs to .md file?)\n\n## Implementation Options (research needed)\n1. Claude Code hook that outputs conversation to .md file\n2. Capture tmux pane and parse terminal output\n3. JSONL conversation log converted to markdown\n4. Custom Claude Code wrapper\n\n## Key Questions\n- Where does Claude Code store conversation history?\n- Can we hook into streaming output?\n- How to format tool calls, thinking blocks, artifacts?\n\n## When Done\nDocument findings and create subtasks for chosen approach.\n\nClose: bd close markdown-themes-ssa --reason \"Research complete, created implementation tasks\"","status":"closed","priority":3,"issue_type":"feature","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-04T11:58:56.793797078-05:00","created_by":"GGPrompts","updated_at":"2026-02-04T23:10:35.603466447-05:00","closed_at":"2026-02-04T23:10:35.603466447-05:00","close_reason":"Research complete: JSONL conversations in ~/.claude/projects/*/. Best approach: markdown transformer component (conversationMarkdown.ts â†’ ConversationMarkdownViewer). Zero new deps, ~1-2hr implementation.","labels":["ready"]}
{"id":"markdown-themes-td9","title":"Implement git graph layout algorithm","description":"Port the topological sort + rail assignment algorithm from Maestro. Create src/lib/graphLayout.ts with functions to transform git log output into positioned nodes and connections.","notes":"## Retro\n- What worked: The algorithm requirements were well-specified with clear types and test cases\n- What was unclear: Nothing - the issue provided excellent context about the API format and expected behavior","status":"closed","priority":2,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-04T09:36:06.089872787-05:00","created_by":"GGPrompts","updated_at":"2026-02-04T09:54:09.320001994-05:00","closed_at":"2026-02-04T09:54:09.320001994-05:00","close_reason":"Completed","labels":["algorithm","git"],"dependencies":[{"issue_id":"markdown-themes-td9","depends_on_id":"markdown-themes-yd3","type":"blocks","created_at":"2026-02-04T09:36:29.853508663-05:00","created_by":"GGPrompts"}]}
{"id":"markdown-themes-tw4","title":"Right pane tab system for review queue","description":"Add tabs to the right pane to create a review queue for Claude edits.\n\n## Concept\n- Left pane = user browsing / conversation\n- Right pane = review queue of files Claude edited\n- Commit clears tabs = clean slate\n\n## UX\n- Right pane gets its own tab bar (similar to left pane)\n- Tabs show files auto-opened during Follow mode\n- Tab count indicates uncommitted changes\n- Empty right pane = clean working state\n\n## Workflow\n1. Enable Follow mode\n2. Claude edits files â†’ tabs open in right pane\n3. Review changes\n4. Commit â†’ tabs close\n5. Ready for next round","notes":"## prepared.prompt\n\n## Context\nParent feature tracking the right pane tab system implementation.\n\n## Completion Criteria\nAll subtasks complete:\n- [x] useRightPaneTabs hook\n- [x] Tab bar UI in right pane\n- [x] Auto-open edited files as right pane tabs\n- [x] Close tabs on commit\n\n## When Done\nbd close markdown-themes-tw4 --reason \"Right pane tab system complete - review queue workflow ready\"","status":"closed","priority":1,"issue_type":"feature","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-05T00:27:36.139491997-05:00","created_by":"GGPrompts","updated_at":"2026-02-05T01:00:53.359108036-05:00","closed_at":"2026-02-05T01:00:53.359108036-05:00","close_reason":"Right pane tab system complete - review queue workflow ready","dependencies":[{"issue_id":"markdown-themes-tw4","depends_on_id":"markdown-themes-vnm","type":"blocks","created_at":"2026-02-05T00:27:55.723648278-05:00","created_by":"GGPrompts"}]}
{"id":"markdown-themes-ty8","title":"Upgrade Dark Academia theme","description":"Deep upgrade the Dark Academia theme to match ~/projects/htmlstyleguides/styles/dark-academia.html\n\n## Current State\n- File: src/themes/dark-academia.css (834B - very minimal)\n- Has basic colors but missing depth\n\n## Fixes Needed\n1. **Load web fonts** - Add Google Fonts import for the actual fonts used in HTML styleguide\n2. **Add texture** - Study the HTML styleguide for any paper/leather/aged textures\n3. **Shadow depth** - Add appropriate shadows (scholarly, warm, not harsh)\n4. **Spacing scale** - Use consistent --space-N variables\n5. **Shiki theme** - Pick syntax highlighting that matches (warm sepia tones)\n6. **Prose typography** - Match heading sizes, letter-spacing, line-height from styleguide\n\n## Reference\n- HTML: ~/projects/htmlstyleguides/styles/dark-academia.html\n- Extract exact CSS values for colors, fonts, shadows, spacing","notes":"## Retro\n- What worked: The HTML styleguide reference was comprehensive and well-documented, making it easy to port the exact colors, fonts, and textures.\n- What was unclear: Nothing major - the issue provided clear CSS patterns to implement.","status":"closed","priority":2,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-02T23:48:37.409100794-05:00","created_by":"GGPrompts","updated_at":"2026-02-03T00:06:26.553681427-05:00","closed_at":"2026-02-03T00:06:26.553681427-05:00","close_reason":"Upgraded Dark Academia theme with full color palette (parchment, sepia, umber, burgundy, forest, gold), parchment texture overlay (SVG fractal noise), vignette effect, elegant serif fonts (Cormorant Garamond, EB Garamond, Source Serif 4), gold accents on links, ornate dividers (gradient hr), manuscript-style code blocks, drop caps, and zero border-radius for sharp aesthetic. Added missing EB Garamond and Source Serif 4 fonts to index.css.","labels":["theme"],"dependencies":[{"issue_id":"markdown-themes-ty8","depends_on_id":"markdown-themes-7m8","type":"blocks","created_at":"2026-02-02T23:50:02.481464367-05:00","created_by":"GGPrompts"},{"issue_id":"markdown-themes-ty8","depends_on_id":"markdown-themes-iz9","type":"blocks","created_at":"2026-02-02T23:50:08.228921998-05:00","created_by":"GGPrompts"}]}
{"id":"markdown-themes-tzh","title":"Implement git status view","description":"Show modified/staged/untracked files with visual indicators.","notes":"## Retro\n- What worked: Porting from TabzChrome reference was straightforward, existing patterns translated well to CSS variable theming\n- What was unclear: The sections vs pages directory convention - used pages to match existing structure","status":"closed","priority":1,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-03T11:44:55.192365959-05:00","created_by":"GGPrompts","updated_at":"2026-02-03T12:10:18.358513972-05:00","closed_at":"2026-02-03T12:10:18.358513972-05:00","close_reason":"Implemented git status view with repo cards, status badges, changes tree, stage/unstage actions, keyboard navigation","labels":["frontend","ready"],"dependencies":[{"issue_id":"markdown-themes-tzh","depends_on_id":"markdown-themes-baw","type":"blocks","created_at":"2026-02-03T11:44:55.194872569-05:00","created_by":"GGPrompts"},{"issue_id":"markdown-themes-tzh","depends_on_id":"markdown-themes-baw","type":"parent-child","created_at":"2026-02-03T11:45:26.646961657-05:00","created_by":"GGPrompts"}]}
{"id":"markdown-themes-uwf","title":"Fix Parchment theme label contrast","description":"Labels like change counts and \"clean\" tags are hard to read in Parchment theme. Need better contrast for status badges, especially in Source Control section.","notes":"## prepared.prompt\n\nFix low contrast labels in Parchment theme, especially for Source Control status badges.\n\n**Problem:** Status labels (change counts, \"clean\" tags, etc.) are hard to read in Parchment theme due to insufficient contrast.\n\n**File to modify:** `src/themes/parchment.css`\n\n**Elements to check:**\n- Status badges (clean/dirty indicators)\n- Change count numbers\n- Branch name labels\n- Any small text on muted backgrounds\n\n**Fix approach:**\n1. Review all badge/label elements in Source Control section\n2. Add/adjust CSS variables for badge colors:\n   - `--badge-bg` - badge background\n   - `--badge-text` - badge text (ensure WCAG AA contrast)\n   - `--badge-success` - green for clean/success\n   - `--badge-warning` - yellow/orange for pending\n   - `--badge-error` - red for conflicts/errors\n3. Test contrast ratios (aim for 4.5:1 minimum)\n4. Check other themes for similar issues\n\n**Acceptance criteria:**\n- [ ] All labels readable in Parchment theme\n- [ ] Contrast meets WCAG AA (4.5:1 for small text)\n- [ ] Consistent badge styling across sections\n\nWhen done, commit and run `bd close markdown-themes-uwf`.","status":"closed","priority":2,"issue_type":"bug","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-03T13:55:51.873698478-05:00","created_by":"GGPrompts","updated_at":"2026-02-03T14:23:17.154888373-05:00","closed_at":"2026-02-03T14:23:17.154888373-05:00","close_reason":"Fixed low contrast status badges in Parchment theme. Added CSS variables for badge colors (--badge-success, --badge-warning, --badge-info, --badge-attention, --badge-error) with darker shades that meet WCAG AA contrast requirements (5:1+ ratio) on parchment backgrounds. Used CSS attribute selectors to override the hardcoded inline colors in StatusBadge, ChangesTree, and RepoCard components.","labels":["ready","theme"],"dependencies":[{"issue_id":"markdown-themes-uwf","depends_on_id":"markdown-themes-tzh","type":"blocks","created_at":"2026-02-03T13:56:05.79791998-05:00","created_by":"GGPrompts"}]}
{"id":"markdown-themes-uzb","title":"[Gate] Test Source Control","description":"Run tests for git operations, staging, commit, batch operations.","status":"closed","priority":1,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-03T11:48:23.649307468-05:00","created_by":"GGPrompts","updated_at":"2026-02-03T12:21:43.119104447-05:00","closed_at":"2026-02-03T12:21:43.119104447-05:00","close_reason":"Source Control features complete: git status, staging/commit, batch operations","labels":["gate:test-runner"],"dependencies":[{"issue_id":"markdown-themes-uzb","depends_on_id":"markdown-themes-baw","type":"parent-child","created_at":"2026-02-03T11:48:44.893876193-05:00","created_by":"GGPrompts"},{"issue_id":"markdown-themes-uzb","depends_on_id":"markdown-themes-c72","type":"blocks","created_at":"2026-02-03T11:48:45.680283905-05:00","created_by":"GGPrompts"},{"issue_id":"markdown-themes-uzb","depends_on_id":"markdown-themes-8mo","type":"blocks","created_at":"2026-02-03T11:48:46.439556754-05:00","created_by":"GGPrompts"}]}
{"id":"markdown-themes-v6u","title":"Upgrade Art Deco theme","description":"Deep upgrade the Art Deco theme to match ~/projects/htmlstyleguides/styles/art-deco.html\n\n## Current State\n- File: src/themes/art-deco.css (2.2KB)\n- Has gold accent but missing geometric patterns and luxury feel\n\n## Fixes Needed\n1. **Load web fonts** - Luxury serif fonts from HTML styleguide\n2. **Geometric borders** - Double-line blockquotes, geometric decorative elements\n3. **Gold accents** - Proper gradient gold (#d4af37), not flat color\n4. **Spacing scale** - Generous, elegant spacing\n5. **Shiki theme** - Rich dark theme with gold/cream highlights\n6. **Prose typography** - Large dramatic headings, decorative letter-spacing\n\n## Reference\n- HTML: ~/projects/htmlstyleguides/styles/art-deco.html","notes":"## prepared.prompt\n\nUpgrade the Art Deco theme to match the HTML styleguide at ~/projects/htmlstyleguides/styles/art-deco.html\n\n**Context:** The current theme has gold accents but lacks the geometric patterns, luxurious typography, and 1920s glamour.\n\n**Key files:**\n- src/themes/art-deco.css - upgrade this file\n- src/index.css - ensure fonts are imported (Poiret One, Josefin Sans)\n- Reference: ~/projects/htmlstyleguides/styles/art-deco.html\n\n**CSS Patterns to Implement:**\n\n1. **Fonts:**\n   - Display: Poiret One (elegant decorative)\n   - Body: Josefin Sans (300-700, geometric sans)\n\n2. **Color Palette:**\n   - Gold: #d4af37 (primary accent)\n   - Gold Light: #f4d03f\n   - Gold Dark: #a67c00\n   - Noir Black: #0d0d0d (background)\n   - Charcoal: #1a1a1a\n   - Cream: #f5f0e1 (text)\n   - Ivory: #fffff0\n   - Teal: #008080 (accent)\n   - Burgundy: #800020 (accent)\n\n3. **Geometric Patterns:**\n   - Crosshatch: 45deg + -45deg repeating gradients (3% opacity)\n   - Pattern size: 60px squares\n   - Hexagon clip-path for decorative elements\n\n4. **Borders:**\n   - Single: 1px solid #d4af37\n   - Double frame: two nested 1px borders with 8px offset\n   - Corner ornaments: 24px L-shapes at corners\n   - Gradient dividers: linear-gradient(90deg, transparent, gold, transparent)\n\n5. **Typography:**\n   - Letter-spacing: 0.3em (display), 0.2em (subheading), 0.02em (body)\n   - Text-transform: uppercase (headers/labels)\n   - Font-weight: 300-400 (elegantly thin)\n   - Font size: clamp(3rem, 8vw, 5rem) for headings\n\n6. **Effects:**\n   - Gold glow: 0 0 20px rgba(212, 175, 55, 0.3)\n   - Button hover: sliding background fill\n   - Diamond shapes via clip-path\n\n7. **Shiki Theme:** one-dark-pro (gold/cream highlights on dark)\n\n**Acceptance:**\n- [ ] Geometric crosshatch pattern visible\n- [ ] Gold borders and dividers prominent\n- [ ] Elegant thin typography with generous letter-spacing\n- [ ] Feels like a 1920s speakeasy\n\nWhen done, commit and run `bd close markdown-themes-v6u`.","status":"closed","priority":2,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-02T23:48:55.120912122-05:00","created_by":"GGPrompts","updated_at":"2026-02-03T00:06:25.655927743-05:00","closed_at":"2026-02-03T00:06:25.655927743-05:00","close_reason":"Upgraded Art Deco theme with: geometric crosshatch pattern (45deg/-45deg at 3% opacity, 60px squares), full color palette (gold, gold-light, gold-dark, noir-black, charcoal, cream, ivory, teal, burgundy), elegant thin typography (Poiret One display, Josefin Sans body, 0.3em/0.2em/0.02em letter-spacing, uppercase headers), double-frame borders with 8px offset on blockquotes and code blocks, gradient gold dividers under headings and for hr elements, gold glow effects on headings and caret, diamond bullet points, gold-bordered tables, and styled scrollbars. Theme now captures 1920s speakeasy glamour.","labels":["theme"],"dependencies":[{"issue_id":"markdown-themes-v6u","depends_on_id":"markdown-themes-7m8","type":"blocks","created_at":"2026-02-02T23:50:37.085734382-05:00","created_by":"GGPrompts"},{"issue_id":"markdown-themes-v6u","depends_on_id":"markdown-themes-iz9","type":"blocks","created_at":"2026-02-02T23:50:42.886717556-05:00","created_by":"GGPrompts"}]}
{"id":"markdown-themes-vnm","title":"Close right pane tabs on commit","description":"When user commits, close the right pane tabs for committed files.\n\n## Behavior\n- WorkingTree onCommitSuccess callback fires\n- Close all right pane tabs whose files were in the commit\n- Clean slate after commit\n\n## UX\n- Tab count acts as \"uncommitted changes\" indicator\n- Empty right pane = clean working state\n- Encourages regular commits","notes":"## prepared.prompt\n\n## Context\nThe right pane tabs act as a review queue. When user commits, the committed files tabs should closeâ€”giving a clean slate.\n\n## Task\nClose right pane tabs when their files are committed.\n\n## Key Files\n- src/pages/Files.tsx - handleCommitSuccess callback (currently a no-op stub)\n- src/components/git/WorkingTree.tsx - Fires onCommitSuccess with committed file list\n\n## Implementation\n1. Update handleCommitSuccess to:\n   - Get list of committed file paths\n   - Find right pane tabs matching those paths\n   - Close those tabs via right pane tab manager\n\n2. Tab count becomes \"uncommitted changes\" indicator:\n   - Tabs open = changes to review\n   - Empty = clean state\n\n## When Done\nbd close markdown-themes-vnm --reason \"Committed files auto-close from right pane tabs\"","status":"closed","priority":2,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-05T00:27:50.141609475-05:00","created_by":"GGPrompts","updated_at":"2026-02-05T01:00:37.012236204-05:00","closed_at":"2026-02-05T01:00:37.012236204-05:00","close_reason":"Committed files now auto-close from right pane tabs. Updated handleCommitSuccess to close ALL matching tabs (both preview and pinned), treating the right pane as a review queue where committed files are removed.","labels":["ready"],"dependencies":[{"issue_id":"markdown-themes-vnm","depends_on_id":"markdown-themes-bdt","type":"blocks","created_at":"2026-02-05T00:27:55.66295578-05:00","created_by":"GGPrompts"}]}
{"id":"markdown-themes-w1v","title":"Add syntax highlighting with Shiki","description":"Integrate Shiki for code block syntax highlighting that respects theme colors","status":"closed","priority":2,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-02T18:44:04.798192059-05:00","created_by":"GGPrompts","updated_at":"2026-02-02T19:03:26.077099587-05:00","closed_at":"2026-02-02T19:03:26.077099587-05:00","close_reason":"Integrated Shiki with theme-adaptive syntax highlighting","labels":["feature"]}
{"id":"markdown-themes-w6x","title":"Show change indicators during streaming (diff highlights)","description":"Add visual indicators showing what's new/changed during streaming edits.\n\n## For Code Files\n- Green highlighted line numbers for added lines\n- Yellow/orange for modified lines  \n- Red strikethrough or gutter marker for deleted lines\n- Track previous content and diff line-by-line\n\n## For Markdown\n- Colored left border or background on changed blocks\n- Or subtle highlight on new paragraphs/sections\n- Fade out after a few seconds? Or persist until next change?\n\n## Implementation Ideas\n1. Extend `useDiffAutoScroll` to return changed line/block ranges\n2. Pass change info to CodeViewer/MarkdownViewer\n3. CodeViewer: add CSS classes to line numbers based on change type\n4. MarkdownViewer: wrap changed blocks in highlighted divs\n\n## UX Considerations\n- Changes should be visually distinct but not overwhelming\n- Maybe a \"show changes\" toggle in toolbar?\n- Changes could fade after N seconds or persist until manually cleared","notes":"## Current Status\n\n**Working:**\n- Streaming-based recent edit indicator (accent border) - WORKS\n- Auto-scroll to changes - WORKS  \n- CodeViewer renders fine when git diff is disabled\n\n**Not Working:**\n- Git diff highlighting crashes the viewer (page flashes but doesn't load)\n\n## What We Found\n\n1. **API Response Format**: The git diff API returns:\n   ```json\n   { \"success\": true, \"data\": { \"diff\": \"...\" } }\n   ```\n   Fixed the hook to access `data.data?.diff` instead of `data.diff`\n\n2. **The Crash**: When `useGitDiff` hook is enabled, CodeViewer crashes. When disabled (returning empty Map), it works fine.\n\n3. **Current Workaround**: Git diff is commented out in CodeViewer.tsx:\n   ```tsx\n   // const { changedLines: gitChangedLines } = useGitDiff({...});\n   const gitChangedLines = new Map\u003cnumber, GitDiffLineType\u003e();\n   ```\n\n## Files to Debug\n\n- `src/hooks/useGitDiff.ts` - the hook that fetches and parses git diff\n- `src/components/viewers/CodeViewer.tsx` - where the hook is used\n- `src/components/viewers/DiffViewer.tsx` - has `parseDiff()` function used by the hook\n\n## Debug Steps for Next Session\n\n1. Add console.logs to useGitDiff to see if it's causing a render loop\n2. Check if `parseDiff()` is throwing on certain diff formats\n3. Test with a simple hardcoded diff string instead of API call\n4. Check if the Map iteration in lineHighlights useMemo is causing issues\n\n## The Goal\n\nTwo-layer highlighting:\n1. **Git diff** (persistent) - green/yellow/red for uncommitted changes\n2. **Recent edit indicator** (transient) - accent border on most recent edit\n\n## Test Files\n\n- `test-highlights.ts` - untracked test file (won't have git diff)\n- Any tracked file with uncommitted changes will show git diff","status":"closed","priority":2,"issue_type":"feature","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-04T17:50:00.6718313-05:00","created_by":"GGPrompts","updated_at":"2026-02-04T18:21:48.620490347-05:00","closed_at":"2026-02-04T17:53:48.76448868-05:00","close_reason":"Implemented change indicators for code files during streaming - line numbers now highlight with green (added) or yellow (modified) background colors during streaming, with highlights persisting 2 seconds after streaming stops"}
{"id":"markdown-themes-wpi","title":"Enhanced Files Section","description":"Transform current markdown viewer into full file viewer with code syntax highlighting, image preview, CSV/JSON display, tabs (preview/pin pattern), split view, and Claude Code filter.","status":"closed","priority":1,"issue_type":"epic","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-03T11:44:41.014845598-05:00","created_by":"GGPrompts","updated_at":"2026-02-03T12:24:01.726655963-05:00","closed_at":"2026-02-03T12:24:01.726655963-05:00","close_reason":"Enhanced Files Section complete: viewers, tabs, split view, filter, actions","labels":["frontend"]}
{"id":"markdown-themes-x08","title":"Move project selector to global header","description":"Move workspace/project folder selector from sidebar to header (top right, near theme dropdown). Project selection should be global across all sections (Files, Source Control, Prompts). Changing sections should NOT reset the workspace or close open files.","notes":"## Retro\n- What worked: Clean separation of workspace state into WorkspaceContext, consistent pattern with existing AppStoreContext\n- What was unclear: Initially unclear whether tabs should also be made global (they remain per-section for now)","status":"closed","priority":1,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-03T13:54:26.123156365-05:00","created_by":"GGPrompts","updated_at":"2026-02-03T14:28:01.794652449-05:00","closed_at":"2026-02-03T14:28:01.794652449-05:00","close_reason":"Moved project selector to global header with WorkspaceContext. Workspace now persists across all sections (Files, Prompts, Source Control). Removed folder picker from section toolbars.","labels":["frontend","ready"],"dependencies":[{"issue_id":"markdown-themes-x08","depends_on_id":"markdown-themes-xsf","type":"parent-child","created_at":"2026-02-03T13:54:45.134047344-05:00","created_by":"GGPrompts"}]}
{"id":"markdown-themes-x6a","title":"Extend auto-scroll to code files","description":"Currently auto-scroll only works well for markdown files because:\n1. Block-level diffing splits by paragraphs (double newlines)\n2. DOM selectors target markdown elements (p, h1-h6, pre, etc.)\n3. CodeViewer renders as single pre block with syntax-highlighted spans\n\nTo support code files:\n- Could diff by lines instead of blocks\n- Find changed line range and scroll to that region\n- CodeViewer could add data-line attributes to enable line-level scrolling\n- Or use percentage-based fallback (currently implemented but untested)\n\nDepends on: markdown-themes-aok (fix the WebSocket resubscription first)","notes":"## Retro\n- What worked: Clean separation of concerns - added line-level diff function to markdownDiff.ts, updated CodeViewer with data-line attributes, and modified useDiffAutoScroll to auto-detect file type\n- What was unclear: Nothing significant - the task spec was clear and the existing code structure made it easy to extend","status":"closed","priority":3,"issue_type":"feature","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-04T17:15:41.212883911-05:00","created_by":"GGPrompts","updated_at":"2026-02-04T17:30:40.406322733-05:00","closed_at":"2026-02-04T17:30:40.406322733-05:00","close_reason":"Implemented line-level diffing for code files. Auto-scroll now works for all file types - markdown uses block-level diffing, code files use line-level diffing with data-line attributes.","dependencies":[{"issue_id":"markdown-themes-x6a","depends_on_id":"markdown-themes-aok","type":"blocks","created_at":"2026-02-04T17:15:46.469722805-05:00","created_by":"GGPrompts"}]}
{"id":"markdown-themes-x8w","title":"Extend right pane to support multiple content types","description":"Change rightFile from string to RightPaneContent union type. Update useSplitView, PageStateContext, and Files.tsx to handle file/git-graph/diff/commit types.","notes":"## Retro\n- What worked: Clear task breakdown in the issue made implementation straightforward. The type system helped catch integration issues early.\n- What was unclear: Nothing - the issue was well-specified with the exact type definition needed.","status":"closed","priority":2,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-04T09:36:04.150603849-05:00","created_by":"GGPrompts","updated_at":"2026-02-04T09:54:10.673889595-05:00","closed_at":"2026-02-04T09:54:10.673889595-05:00","close_reason":"Completed","labels":["refactor","ui"],"dependencies":[{"issue_id":"markdown-themes-x8w","depends_on_id":"markdown-themes-yd3","type":"blocks","created_at":"2026-02-04T09:36:29.140292847-05:00","created_by":"GGPrompts"}]}
{"id":"markdown-themes-xgg","title":"Fix crash when switching away from conversation JSONL tab","description":"Symptom: App freezes/crashes when viewing a Claude conversation JSONL file and then clicking another tab.\n\nInvestigation summary:\n- useFileWatcher applies incoming WebSocket messages without checking message.path, and always assigns contentPath to currentPathRef.current. Stale file-change events from the previous tab can overwrite content after a tab switch.\n- WebSocket payloads include path (file-content/file-change/file-deleted), so client can filter but doesnâ€™t.\n- When stale JSONL content lands in a new tab, the new viewer (often CodeViewer/MarkdownViewer) tries to render a multiâ€‘MB JSONL blob; Shiki codeToHtml runs on each content change. This heavy render on wrong tab can freeze/crash.\n- ConversationMarkdownViewer still parses the entire JSONL on each update; truncation to last 50 messages happens after parsing, so it doesnâ€™t reduce parse cost.\n\nLikely root cause: Stale message race in useFileWatcher (no path filtering) + heavy render triggered in the new tab.\n\nEvidence:\n- src/hooks/useFileWatcher.ts: handleMessage sets content/contentPath without checking message.path; contentPath uses currentPathRef.current.\n- src/lib/api.ts: WebSocket message types include path.\n- src/components/viewers/CodeViewer.tsx: codeToHtml on every content change.\n- src/components/viewers/ConversationMarkdownViewer.tsx + src/utils/conversationMarkdown.ts: full parse on each update before truncation.\n\nSuggested fix ideas:\n- Ignore WS messages whose message.path !== currentPathRef.current (or include path in state updates).\n- Consider debouncing updates or streaming optimization for JSONL; avoid full parse on each change.\n","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-02-05T00:39:25.801565657-05:00","updated_at":"2026-02-05T00:41:36.243007382-05:00","closed_at":"2026-02-05T00:41:36.243007382-05:00","close_reason":"Filter WebSocket messages by path to prevent stale content race. Also optimized JSONL parsing to truncate lines before parsing.","labels":["crash","performance","websocket"]}
{"id":"markdown-themes-xkq","title":"Auto-scroll not reaching bottom at zoomed font sizes","description":"Auto-scroll may not scroll far enough when using zoomed/larger font sizes.\n\n## Symptom\nScroll position calculation seems off at non-default zoom levels - does not quite reach the latest content.\n\n## Possible causes\n- scrollHeight/clientHeight calculations affected by zoom\n- Block position calculations using getBoundingClientRect may be off\n- Font size scaling affecting element heights\n\n## Key Files\n- src/hooks/useDiffAutoScroll.ts - scroll position calculations\n- May need to account for devicePixelRatio or computed styles","notes":"## Retro\n- What worked: Using scrollIntoView instead of manual scrollTop calculations handles zoom/font-size scaling automatically since it operates on visual viewport coordinates\n- What was unclear: The exact root cause - likely a combination of fractional pixel values at non-100% zoom and getBoundingClientRect returning scaled coordinates while scrollTop uses document coordinates","status":"closed","priority":3,"issue_type":"bug","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-05T00:43:24.856699163-05:00","created_by":"GGPrompts","updated_at":"2026-02-05T00:54:07.853812325-05:00","closed_at":"2026-02-05T00:54:07.853812325-05:00","close_reason":"Fixed scroll position calculations by replacing manual scrollTop arithmetic with scrollIntoView and adding a 10px buffer for zoom rounding issues","labels":["ready"],"dependencies":[{"issue_id":"markdown-themes-xkq","depends_on_id":"markdown-themes-hwx","type":"blocks","created_at":"2026-02-05T00:48:01.194092739-05:00","created_by":"GGPrompts"}]}
{"id":"markdown-themes-xkz","title":"Persist page state across refresh with sessionStorage","description":"Preserve UI state (open tabs, split view, etc.) across page refresh, but reset on app restart.\n\n## Current behavior\n- PageStateContext stores state in memory only\n- Refresh loses all open files, tabs, split state\n\n## Desired behavior  \n- State persists across page refresh / hot reload\n- State resets when browser tab is closed (app restart)\n\n## Implementation\nUse sessionStorage (not localStorage) in PageStateContext:\n- sessionStorage persists within browser session (survives refresh)\n- sessionStorage clears when tab/window closes\n\n## Changes needed\n1. Update `src/context/PageStateContext.tsx`\n2. Initialize state from sessionStorage on mount\n3. Sync state to sessionStorage on changes\n4. Similar pattern to AppStoreContext but with sessionStorage\n\n## What to persist\n- filesState: tabs, activeTabId, split view state, right pane content\n- promptsState: current file, library visibility\n- sourceControlState: expanded repos, search query","notes":"## prepared.prompt\n\n## Context\nPage state (tabs, split view) is lost on refresh. AppStoreContext shows the pattern for persistence.\n\n## Task\nAdd sessionStorage persistence to PageStateContext, following the AppStoreContext pattern.\n\n## Key Files\n- src/context/PageStateContext.tsx - add persistence\n- src/context/AppStoreContext.tsx - reference pattern (loadFromStorage/saveToStorage)\n\n## Implementation\n1. Add helper functions: loadPageState() and savePageState()\n2. Use storage key: \"markdown-themes-page-state\"\n3. Add useEffect to load from sessionStorage on mount\n4. Modify setFilesState, setPromptsState, setSourceControlState to call savePageState()\n\n## When Done\nRun `npm run test:run` then close issue: bd close markdown-themes-xkz --reason \"Added sessionStorage persistence to PageStateContext\"","status":"closed","priority":1,"issue_type":"feature","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-04T11:13:32.89491862-05:00","created_by":"GGPrompts","updated_at":"2026-02-04T11:20:51.893360545-05:00","closed_at":"2026-02-04T11:20:51.893360545-05:00","close_reason":"Added sessionStorage persistence to PageStateContext following AppStoreContext pattern","labels":["ready"]}
{"id":"markdown-themes-xo1","title":"followableExtensions Set recreated in effects","description":"Files.tsx:441,529 - new Set() created inside useEffect callbacks. Inefficient and can cause unnecessary comparisons.","design":"Move to module-level constant: const FOLLOWABLE_EXTENSIONS = new Set([...])","notes":"## prepared.prompt\n\nFix together with markdown-themes-cqs. See that issue for combined prompt.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-05T11:41:35.891469608-05:00","updated_at":"2026-02-05T11:54:10.159455303-05:00","labels":["optimization","performance","ready"]}
{"id":"markdown-themes-xok","title":"Upgrade Parchment theme","description":"Deep upgrade the Parchment theme to match ~/projects/htmlstyleguides/styles/parchment.html\n\n## Current State\n- File: src/themes/parchment.css (1.2KB)\n- Has sepia tones but missing aged paper texture\n\n## Fixes Needed\n1. **Load web fonts** - Serif fonts that feel old-world\n2. **Paper texture** - Aged parchment background (noise, stains, edges)\n3. **Ink colors** - Faded ink browns, not pure black\n4. **Worn edges** - Study if styleguide has vignette or edge effects\n5. **Shiki theme** - Sepia-toned code highlighting\n6. **Prose typography** - Calligraphic feel, generous line-height\n\n## Reference\n- HTML: ~/projects/htmlstyleguides/styles/parchment.html","notes":"## Retro\n- What worked: The HTML styleguide reference provided clear patterns to follow - color palette, typography, textures, and effects were well documented\n- What was unclear: Nothing major - the task was well-scoped with specific CSS patterns to implement","status":"closed","priority":2,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-02T23:49:24.780952844-05:00","created_by":"GGPrompts","updated_at":"2026-02-03T00:08:27.507143096-05:00","closed_at":"2026-02-03T00:08:27.507143096-05:00","close_reason":"Upgraded Parchment theme with medieval manuscript styling: aged paper texture (SVG noise), foxing spots overlay, illuminated dropcaps (UnifrakturMaguntia blackletter), gold leaf accents, sepia ink colors, wax seal badges, and candlelight focus effects. Added UnifrakturMaguntia font to Google Fonts imports.","labels":["theme"],"dependencies":[{"issue_id":"markdown-themes-xok","depends_on_id":"markdown-themes-7m8","type":"blocks","created_at":"2026-02-02T23:51:34.840488205-05:00","created_by":"GGPrompts"},{"issue_id":"markdown-themes-xok","depends_on_id":"markdown-themes-iz9","type":"blocks","created_at":"2026-02-02T23:51:40.585100867-05:00","created_by":"GGPrompts"}]}
{"id":"markdown-themes-xpl","title":"Implement Paste to Terminal action","description":"Add 'Paste to Terminal' context menu action that pastes file content to the active terminal.\n\nRequires sending appropriate WebSocket message to TabzChrome backend.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-03T22:52:29.900584436-05:00","created_by":"matt","updated_at":"2026-02-03T23:16:14.498628139-05:00","closed_at":"2026-02-03T23:16:14.498628139-05:00","close_reason":"Added Paste to Terminal action to context menu","dependencies":[{"issue_id":"markdown-themes-xpl","depends_on_id":"markdown-themes-eq5","type":"blocks","created_at":"2026-02-03T22:52:38.488700265-05:00","created_by":"matt"}]}
{"id":"markdown-themes-xsf","title":"Landing Page \u0026 Navigation","description":"Add a landing page hub with navigation to Files, Source Control, and Prompt Notebook sections. Implement React Router for multi-section routing.","status":"closed","priority":1,"issue_type":"epic","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-03T11:44:40.102447621-05:00","created_by":"GGPrompts","updated_at":"2026-02-03T12:03:55.101028903-05:00","closed_at":"2026-02-03T12:03:55.101028903-05:00","close_reason":"React Router + Landing page complete","labels":["frontend"]}
{"id":"markdown-themes-y2d","title":"Improve Source Control layout and add selective batch operations","description":"Two issues with current Source Control UX:\n1. Action buttons (Fetch/Pull/Push) are too far from repo names - need tighter layout\n2. Batch operations are all-or-nothing - need checkboxes to select specific repos for batch operations, with Select All at top\n\nReference TabzChrome's Git section for the checkbox pattern.","notes":"## Retro\n- What worked: Implemented selective batch operations with checkboxes for each repo, Select All checkbox in bulk actions bar, and updated batch operations to only affect selected repos\n- What was unclear: The changes were auto-committed by another concurrent agent session as part of commit 9addeaa (which was primarily for PromptLibrary changes). The code changes are correct but the commit message doesnt reflect this issue.","status":"closed","priority":1,"issue_type":"feature","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-03T12:44:23.631310474-05:00","created_by":"GGPrompts","updated_at":"2026-02-03T12:53:21.72611883-05:00","closed_at":"2026-02-03T12:53:21.72611883-05:00","close_reason":"Implemented selective batch operations for Source Control: added checkbox to each RepoCard for selection, Select All checkbox and selected count in BulkActionsBar, batch operations (Fetch/Pull/Push) now only affect selected repos, and buttons are disabled when no repos are selected. Changes were committed as part of 9addeaa (merged with PromptLibrary changes by another session)."}
{"id":"markdown-themes-yd3","title":"Add git API endpoints to TabzChrome backend","description":"Add /api/git/log, /api/git/diff, /api/git/show, /api/git/branches endpoints that wrap git CLI commands and return JSON.","status":"closed","priority":2,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-02-04T09:36:02.538081717-05:00","created_by":"GGPrompts","updated_at":"2026-02-04T09:48:52.993858363-05:00","closed_at":"2026-02-04T09:48:52.993858363-05:00","close_reason":"Completed","labels":["backend","git"]}
{"id":"markdown-themes-yj7","title":"Fix invisible/low-contrast text in code blocks within .md files","description":"Some code blocks in markdown files still have invisible or nearly invisible text. This is likely caused by:\n\n1. Code blocks rendered outside of .prose containers not getting proper styling\n2. Shiki CSS variables not being applied in certain contexts\n3. Light foreground colors on light backgrounds when --shiki-background is transparent\n\nWe added catch-all `pre:not(.prose pre)` selectors to many themes, but there may still be edge cases:\n- Fenced code blocks with language hints\n- Code blocks in frontmatter viewers\n- Inline code that inherits wrong colors\n\nPotential solutions:\n- Audit all themes for remaining transparent shiki-background values\n- Consider using Shiki pre-built themes instead of CSS variables for more reliable styling\n- Add more aggressive catch-all selectors for code/pre elements","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-02-04T22:18:40.363801714-05:00","updated_at":"2026-02-04T22:23:18.225778828-05:00","closed_at":"2026-02-04T22:23:18.225778828-05:00","close_reason":"Fixed low-contrast comment colors in 5 light themes: Japanese Zen, Film Grain, Risograph, Windows 3.1, and Editorial. Changed token colors to meet WCAG AA contrast requirements (~4.5:1+).","labels":["contrast","shiki","themes"]}
{"id":"markdown-themes-yxh","title":"useWorkspaceStreaming WebSocket errors not logged","description":"useWorkspaceStreaming.ts:171-173 - WebSocket errors silently swallowed. No visibility into connection failures.","design":"Add console.error logging and consider optional onError callback prop","notes":"## prepared.prompt\n\n## Context\nWebSocket errors in useWorkspaceStreaming are silently swallowed, and reconnect happens even when Follow mode is disabled.\n\n## Task\nFix both issues:\n1. Add console.error to WebSocket onerror (lines 171-173)\n2. Add enabled check at start of reconnect callback (lines 163-167)\n\n## Key Files\n- src/hooks/useWorkspaceStreaming.ts\n\n## Pattern\n```typescript\nws.onerror = (error) =\u003e {\n  console.error('[useWorkspaceStreaming] WebSocket error:', error);\n};\n\n// In reconnect callback:\nif (!enabled) return;\n```\n\n## Related\nAlso fixes markdown-themes-ch8\n\n## When Done\nbd close markdown-themes-yxh markdown-themes-ch8 --reason \"Added error logging and enabled check to useWorkspaceStreaming\"","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-02-05T11:41:20.736575244-05:00","updated_at":"2026-02-05T12:02:19.59846103-05:00","closed_at":"2026-02-05T12:02:19.59846103-05:00","close_reason":"Added error logging to WebSocket onerror handler and enabled check to prevent reconnect when Follow mode is disabled","labels":["error-handling","ready","websocket"]}
